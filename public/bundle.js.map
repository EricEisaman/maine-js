{"version":3,"file":"bundle.js","sources":["../src/utils.js","../src/load-spinner.js","../src/grabbable.js","../src/nav-pointer.js","../src/player.js","../src/d3-graph.js","../src/shader-frog.js","../src/particle-player.js","../src/particles.js","../src/proximity-glitch.js","../src/ring-dial.js","../src/meter.js","../src/hud.js","../src/client-config.js","../src/game.js","../src/client-socket.js","../src/collectible.js","../src/login.js","../src/aframe-effects.js","../src/main.js"],"sourcesContent":["export default CS1=>{\n  CS1.utils = {\n    uid: (()=>{\n        const firstItem = {\n            value: \"0\"\n        };\n        /*length can be increased for lists with more items.*/\n        let counter = \"123456789\".split('')\n            .reduce((acc, curValue, curIndex, arr) => {\n                const curObj = {};\n                curObj.value = curValue;\n                curObj.prev = acc;\n\n                return curObj;\n            }, firstItem);\n        firstItem.prev = counter;\n\n        return function () {\n            let now = Date.now();\n            if (typeof performance === \"object\" && typeof performance.now === \"function\") {\n                now = performance.now().toString().replace('.', '');\n            }\n            counter = counter.prev;\n            return `${now}${Math.random().toString(16).substr(2)}${counter.value}`;\n        }\n    })(),\n    \n    isEqual : function (value, other) {\n      \n      function compare(item1, item2) {\n\n        // Get the object type\n        var itemType = Object.prototype.toString.call(item1);\n\n        // If the two items are not the same type, return false\n        if (itemType !== Object.prototype.toString.call(item2)) return false;\n\n        // If it's a function, convert to a string and compare\n        // Otherwise, just compare\n        if (itemType === '[object Function]') {\n          if (item1.toString() !== item2.toString()) return false;\n        } else {\n          if (item1 !== item2) return false;\n        }\n      }\n      \n\n      // ...\n\n      // Compare properties\n      for (var key in value) {\n        if (value.hasOwnProperty(key)) {\n            if (compare(value[key], other[key]) === false) return false;\n        }\n      }\n\n      // If nothing failed, return true\n      return true;\n\n    }\n\n  }\n}","export default(()=>{\n\n  window.addEventListener('load', function () {\n    console.log('window loaded make spinner');\n    let loadSpinner = document.createElement('div');\n    loadSpinner.className = 'lds-grid';\n    for(let i=0;i<9;i++){\n      loadSpinner.appendChild(document.createElement('div'));\n    } \n    loadSpinner.style.left = window.innerWidth/2 - 32 + 'px';\n    let loadingScreen =  document.querySelector('#loading-screen');\n    loadingScreen.style.width = window.innerWidth + 'px';\n    loadingScreen.style.height = window.innerHeight + 'px';\n    loadingScreen.appendChild(loadSpinner);\n  }, false);\n  \n})()","function findComponent(componentName)\n{\n\treturn document.querySelector(`[${componentName}]`).components[componentName];\n}\n//Moves the subject to a new parent while preserving its transform in the world\nfunction reparentObject3D(subject, newParent)\n{\n\tsubject.updateMatrixWorld();\n\tsubject.matrix.copy(subject.matrixWorld);\n\tsubject.applyMatrix(new THREE.Matrix4().getInverse(newParent.matrixWorld));\n\tnewParent.add(subject);\n}\n// Copys the world transforms between objects even if the have different parents\nvar copyTransform = (function()\n{\n\tvar scratchMat = new THREE.Matrix4();\n\treturn function(source, destination)\n\t{\n\t\tdestination.matrix.copy(source.matrixWorld);\n\t\tdestination.applyMatrix(scratchMat.getInverse(destination.parent.matrixWorld));\n\t}\n})();\nfunction toVector(o)\n{\n\treturn new THREE.Vector3(o.x, o.y, o.z);\n}\nfunction toList(collection)\n{\n\tvar list = [];\n\tfor(var i=0;i<collection.length;i++)\n\t{\n\t\tlist.push(collection[i]);\n\t}\n\treturn list;\n}\nfunction addDot(el, position, radius, color)\n{\n\tcolor = color || \"red\";\n\tvar dot = document.createElement(\"a-sphere\");\n\tdot.setAttribute(\"radius\", radius);\n\tdot.setAttribute(\"position\", position);\n\tdot.setAttribute(\"color\", color);\n\tel.appendChild(dot);\n}\nfunction directionLocalToWorld(object, localDirection)\n{\n\treturn localDirection.transformDirection(object.matrixWorld);\n}\n\nexport default (function grabbable(){AFRAME.registerComponent(\"grabbable\", {\n\tschema: {\n\t\torigin: { type: \"selector\" }\n\t},\n\n\tinit: function()\n\t{\n\t\tvar self = this;\n\t\tvar isDragging = false;\n\t\tself.originEl = this.data.origin || this.el;\n\t\tself.proxyObject = null;\n\n\t\tself.el.classList.add(\"interactive\");\n\n\t\tself.el.addEventListener(\"mousedown\", grab);\n    \n    if(AFRAME.utils.device.isMobile())self.el.addEventListener(\"click\", function(e){\n       grab(e);\n       setTimeout(function(e){\n         document.querySelector('#cam-cursor').setAttribute('material','color: purple');\n         release(e);\n         setTimeout(function(e){\n           document.querySelector('#cam-cursor').setAttribute('material','color: crimson');\n         },500);\n       },5000);\n    });\n    \n    function grab(e){\n      //console.log(\"GRABBING\");\n\t\t\te.cancelBubble = true;\n\t\t\tif(isDragging) return;\n      \n\t\t\tisDragging = true;\n\n\t\t\tvar cursor = e.detail.cursorEl;\n\t\t\tif(cursor == self.el.sceneEl) cursor = document.querySelector(\"[camera]\"); //This handles the scenario where the user isn't using motion controllers\n      // avoid seeing flickering at origin during reparenting\n      self.el.setAttribute('visible', false);\n      setTimeout(function(){\n        self.el.setAttribute('visible', true);\n      },20);\n\n\t\t\tcreateProxyObject(cursor.object3D);\n\t\t\t\n\t\t\tself.originEl.emit(\"grabStart\", e);\n\t\t\tself.originEl.addState(\"moving\");\n\t\t}\n\n\t\tself.el.addEventListener(\"mouseup\", release);\n    \n    function release(e)\n\t\t{\n\t\t\tif(isDragging)\n\t\t\t{\n\t\t\t\tisDragging = false;\n\n\t\t\t\tif(self.proxyObject)\n\t\t\t\t{\n\t\t\t\t\tself.proxyObject.parent.remove(self.proxyObject);\n\t\t\t\t\tself.proxyObject = null;\n\t\t\t\t}\n\n\t\t\t\tself.originEl.setAttribute(\"position\", self.originEl.getAttribute(\"position\")); //seems pointless, but will force the event system to notify subscribers\n\t\t\t\tself.originEl.setAttribute(\"rotation\", self.originEl.getAttribute(\"rotation\")); //seems pointless, but will force the event system to notify subscribers\n\n\t\t\t\tself.originEl.emit(\"grabEnd\", e);\n\t\t\t\tself.originEl.removeState(\"moving\");\n\t\t\t}\n\t\t}\n\n\t\tfunction createProxyObject(cursorObject)\n\t\t{\n\t\t\tself.proxyObject = new THREE.Object3D();\n      self.originEl.visible = false;\n      //handle object momentary flicker at world origin\n      setTimeout(function(){\n        self.originEl.visible = true;\n      },1000);\n\t\t\tcursorObject.add(self.proxyObject);\n\t\t\tcopyTransform(self.originEl.object3D, self.proxyObject);\t\t\t\t\n\t\t}\n    \n    if(!CS1.updateGrabbables)\n    CS1.updateGrabbables = (grabbablesData)=>{\n        //console.log('Update Grabbables');\n        //console.log(grabbablesData);\n        if(Object.keys(CS1.grabbables).length === 0 || !CS1.grabbables[grabbablesData[0].name] || !CS1.game.hasBegun) return;\n        grabbablesData.forEach( (d,index)=>{\n          let b = CS1.grabbables[d.name];\n          if(CS1.debug){\n            console.log('Individual body data from server:');\n            console.log(d);\n          } \n          if(d.position) b.object3D.position.copy(d.position);\n          if(d.scale) b.object3D.scale.copy(d.scale);\n          if(d.rotation) b.object3D.quaternion.copy(d.rotation);\n      \n        });\n      }\n    \n    //use object to allow for further development\n    if(!CS1.grabbables)CS1.grabbables={}; \n    this.name=Object.keys(CS1.grabbables).length;\n    CS1.grabbables[this.name]=this.el;\n    \n\t},\n\n\ttick: function()\n\t{\n\t\tvar self = this;\n\t\tif(self.proxyObject)\n\t\t{\n\t\t\tcopyTransform(self.proxyObject, self.originEl.object3D);\n\t\t\tself.originEl.setAttribute(\"position\", self.originEl.getAttribute(\"position\")); //seems pointless, but will force the event system to notify subscribers\n\t\t\t\tself.originEl.setAttribute(\"rotation\", self.originEl.getAttribute(\"rotation\")); //seems pointless, but will force the event system to notify subscribers\n\t\t}\n     \n\t}\n})\n  \n})()","export default (function navpointer(){\n\n  AFRAME.registerComponent('nav-pointer', {\n  init: function () {\n    const el = this.el;\n// On click, send the NPC to the target location.\n    el.addEventListener('click',e=>{\n      const ctrlEl = el.sceneEl.querySelector('[nav-agent]');\n      if(ctrlEl) ctrlEl.setAttribute('nav-agent', {\n        active: true,\n        destination: e.detail.intersection.point\n      });\n    });\n    el.addEventListener('mouseenter',e=>{\n      el.setAttribute('material', {color: 'green'});\n    });\n    el.addEventListener('mouseleave',e=>{\n      el.setAttribute('material', {color: 'crimson'})\n    });\n    \n    el.addEventListener('mousedown',e=>{\n      //console.log(e);\n    });\n \n    // Refresh the raycaster after models load.\n    el.sceneEl.addEventListener('object3dset',e=>{\n      this.el.components.raycaster.refreshObjects();\n    });\n  }\n});\n  \n})()","export default (function player(){\n  \n  AFRAME.registerComponent('player', {\n    init: function () {\n      \n    },\n    tick: function(t,dt){\n    \n    },\n    setAvatar: function(src){\n    \n    },\n    setAnimation: function(name){\n    \n    }\n    \n  });\n  \n})()","export default (function player(){\n  \n  AFRAME.registerComponent('d3-graph', {\n    schema:{\n      side: {type:'string', default:'front'},\n      url: {type:'string', default:''}\n    },\n    dependencies: ['geometry', 'material'],\n    init: function () {\n      this.canvas=document.createElement('canvas');\n      this.canvas.id=CS1.utils.uid();\n      this.canvas.setAttribute('crossOrigin','anonymous');\n      document.querySelector('a-scene').appendChild(this.canvas);\n      this.el.setAttribute('material',`shader:flat;src:#${this.canvas.id};side:${this.data.side}`);\n      \n      this.cursor = document.querySelector('#cam-cursor');\n\n      var ctx = this.ctx = this.canvas.getContext('2d');\n      ctx.fillStyle = 'rgb(0, 0, 0)';\n      ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);  \n      this.dataProcessed=false;\n      fetch(this.data.url)\n        .then(resp=>{return resp.json()})\n        .then(json=>{this.processData(json)})\n        .catch(err=>{console.log(err)})\n    },\n    processData: function(dataToProcess){\n        this.data = [];\n        dataToProcess.list.forEach(day=>{\n          //console.log(day.dt_txt , this.k2f(day.main.temp_max)+'F');\n          this.data.push({dt:day.dt_txt,temp_max:this.k2f(day.main.temp_max)});\n        });\n        this.dataProcessed=true;\n    },\n    k2f: function(k){\n      return Math.round((k - 273.15) * 9/5 + 32);\n    },\n    tick: function(t,dt){\n      if(!this.dataProcessed)return;\n      this.visualizeData(t);\n      this.updateCanvas(); \n    },\n    visualizeData: function(t){\n      let canvas = this.canvas;\n      let dt_width = canvas.width/this.data.length;\n      let ctx = this.ctx;\n      if(this.cursor.getAttribute('material').color=='green')t=1000;\n      this.data.forEach((d,i)=>{\n        let hue = t*(d.temp_max / 500);\n        ctx.fillStyle = 'hsl(' + hue + ', 50%, 30%)';\n        ctx.fillRect(i*dt_width, 0, dt_width, canvas.height);\n      });\n      \n      \n      \n    \n    },\n    drawRectangles: function(t){\n      var canvas = this.canvas;\n      var ctx = this.ctx;\n      var x;\n      var y;\n      var hue = t / 10;\n      ctx.fillStyle = 'hsl(' + hue + ', 50%, 80%)';\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n      hue = t / 15;\n      ctx.fillStyle = 'hsl(' + hue + ', 50%, 60%)';\n      x = canvas.width / 10;\n      y = canvas.height / 10;\n      ctx.fillRect(x, y, canvas.width - x * 2, canvas.height - y * 2);\n      hue = t / 20;\n      ctx.fillStyle = 'hsl(' + hue + ', 50%, 40%)';\n      x = canvas.width / 5;\n      y = canvas.height / 5;\n      ctx.fillRect(x, y, canvas.width - x * 2, canvas.height - y * 2);\n    },\n    updateCanvas: function(){\n      var el = this.el;\n      var material;\n      material = el.getObject3D('mesh').material;\n        if (!material.map) {\n            return;\n      }\n      material.map.needsUpdate = true;   \n    }\n    \n  });\n  \n})()","var shaders = {};\nimport Polkadot_Shader from './Polkadot_Shader.json';\nshaders['Polkadot_Shader']=Polkadot_Shader;\nimport Sun_Shader from './Sun_Shader.json';\nshaders['Sun_Shader']=Sun_Shader;\nimport Jelly_Shader from './Jelly_Shader.json';\nshaders['Jelly_Shader']=Jelly_Shader;\nimport Green_Dance_Shader from './Green_Dance_Shader.json';\nshaders['Green_Dance_Shader']=Green_Dance_Shader;\nimport Cosmic_Shader from './Cosmic_Shader.json';\nshaders['Cosmic_Shader']=Cosmic_Shader;\nimport Cool_Tiles_Shader from './Cool_Tiles_Shader.json';\nshaders['Cool_Tiles_Shader']=Cool_Tiles_Shader;\nimport Disco_Shader from './Disco_Shader.json';\nshaders['Disco_Shader']=Disco_Shader;\nimport Marching_Ants_Shader from './Marching_Ants_Shader.json';\nshaders['Marching_Ants_Shader']=Marching_Ants_Shader;\nimport Goo_Shader from './Goo_Shader.json';\nshaders['Goo_Shader']=Goo_Shader;\nimport Psycho_Shader from './Psycho_Shader.json';\nshaders['Psycho_Shader']=Psycho_Shader;\n\nexport default(function shaderfrog(){\n  \n\nvar defaultThreeUniforms = [\n    'normalMatrix', 'viewMatrix', 'projectionMatrix', 'position', 'normal',\n    'modelViewMatrix', 'uv', 'uv2', 'modelMatrix'\n];\n\nfunction ShaderRuntime() {}\n\nShaderRuntime.prototype = {\n\n    mainCamera: null,\n    cubeCameras: {},\n\n    reserved: { time: null, cameraPosition: null },\n\n    umap: {\n        float: { type: 'f', value: 0 },\n        int: { type: 'i', value: 0 },\n        vec2: { type: 'v2', value() { return new THREE.Vector2(); } },\n        vec3: { type: 'v3', value() { return new THREE.Vector3(); } },\n        vec4: { type: 'v4', value() { return new THREE.Vector4(); } },\n        samplerCube: { type: 't' },\n        sampler2D: { type: 't' }\n    },\n\n    getUmap( type ) {\n        let value = this.umap[ type ].value;\n        return typeof value === 'function' ? value() : value;\n    },\n\n    registerCamera( camera ) {\n\n        if( !( camera instanceof THREE.Camera ) ) {\n            throw new Error( 'Cannot register a non-camera as a camera!' );\n        }\n\n        this.mainCamera = camera;\n\n    },\n\n    registerCubeCamera( name, camera ) {\n\n        if( !camera.renderTarget ) {\n            throw new Error( 'Cannot register a non-camera as a camera!' );\n        }\n\n        this.cubeCameras[ name ] = camera;\n\n    },\n\n    unregisterCamera( name ) {\n\n        if( name in this.cubeCameras ) {\n\n            delete this.cubeCameras[ name ];\n            \n        } else if( name === this.mainCamera ) {\n\n            delete this.mainCamera;\n\n        } else {\n\n            throw new Error( 'You never registered camera ' + name );\n\n        }\n\n    },\n\n    updateSource( identifier, config, findBy ) {\n\n        findBy = findBy || 'name';\n\n        if( !this.shaderTypes[ identifier ] ) {\n            throw new Error( 'Runtime Error: Cannot update shader ' + identifier + ' because it has not been added.' );\n        }\n\n        let newShaderData = this.add( identifier, config ),\n            shader, x;\n\n        for( x = 0; shader = this.runningShaders[ x++ ]; ) {\n            if( shader[ findBy ] === identifier ) {\n                extend( shader.material, omit( newShaderData, 'id' ) );\n                shader.material.needsUpdate = true;\n            }\n        }\n\n    },\n\n    renameShader( oldName, newName ) {\n\n        let x, shader;\n\n        if( !( oldName in this.shaderTypes ) ) {\n            throw new Error('Could not rename shader ' + oldName + ' to ' + newName + '. It does not exist.');\n        }\n\n        this.shaderTypes[ newName ] = this.shaderTypes[ oldName ];\n        delete this.shaderTypes[ oldName ];\n\n        for( x = 0; shader = this.runningShaders[ x++ ]; ) {\n            if( shader.name === oldName ) {\n                shader.name = newName;\n            }\n        }\n\n    },\n\n    get( identifier ) {\n\n        let shaderType = this.shaderTypes[ identifier ];\n\n        if( !shaderType.initted ) {\n\n            this.create( identifier );\n        }\n\n        return shaderType.material;\n\n    },\n\n    add( shaderName, config ) {\n\n        let newData = clone( config ),\n            uniform;\n        newData.fragmentShader = config.fragment;\n        newData.vertexShader = config.vertex;\n        delete newData.fragment;\n        delete newData.vertex;\n\n        for( var uniformName in newData.uniforms ) {\n            uniform = newData.uniforms[ uniformName ];\n            if( uniform.value === null ) {\n                newData.uniforms[ uniformName ].value = this.getUmap( uniform.glslType );\n            }\n        }\n        \n        if( shaderName in this.shaderTypes ) {\n            // maybe not needed? too sleepy, need document\n            extend( this.shaderTypes[ shaderName ], newData );\n        } else {\n            this.shaderTypes[ shaderName ] = newData;\n        }\n\n        return newData;\n\n    },\n\n    create( identifier ) {\n\n        let shaderType = this.shaderTypes[ identifier ];\n      \n        delete shaderType.id;\n\n        shaderType.material = new THREE.RawShaderMaterial( shaderType );\n\n        this.runningShaders.push( shaderType );\n\n        shaderType.init && shaderType.init( shaderType.material );\n        shaderType.material.needsUpdate = true;\n\n        shaderType.initted = true;\n\n        return shaderType.material;\n\n    },\n\n    updateRuntime( identifier, data, findBy ) {\n\n        findBy = findBy || 'name';\n\n        let shader, x, uniformName, uniform;\n\n        // This loop does not appear to be a slowdown culprit\n        for( x = 0; shader = this.runningShaders[ x++ ]; ) {\n            if( shader[ findBy ] === identifier ) {\n                for( uniformName in data.uniforms ) {\n\n                    if( uniformName in this.reserved ) {\n                        continue;\n                    }\n\n                    if( uniformName in shader.material.uniforms ) {\n\n                        uniform = data.uniforms[ uniformName ];\n\n                        // this is nasty, since the shader serializes\n                        // CubeCamera model to string. Maybe not update it at\n                        // all?\n                        if( uniform.type === 't' && typeof uniform.value === 'string' ) {\n                            uniform.value = this.cubeCameras[ uniform.value ].renderTarget;\n                        }\n\n                        shader.material.uniforms[ uniformName ].value = data.uniforms[ uniformName ].value;\n                    }\n                }\n            }\n        }\n\n    },\n\n    // Update global shader uniform values\n    updateShaders( time, obj ) {\n\n        let shader, x;\n\n        obj = obj || {};\n\n        for( x = 0; shader = this.runningShaders[ x++ ]; ) {\n\n            for( let uniform in obj.uniforms ) {\n                if( uniform in shader.material.uniforms ) {\n                    shader.material.uniforms[ uniform ].value = obj.uniforms[ uniform ];\n                }\n            }\n\n            if( 'cameraPosition' in shader.material.uniforms && this.mainCamera ) {\n\n                shader.material.uniforms.cameraPosition.value = this.mainCamera.position.clone();\n\n            }\n\n            if( 'viewMatrix' in shader.material.uniforms && this.mainCamera ) {\n\n                shader.material.uniforms.viewMatrix.value = this.mainCamera.matrixWorldInverse;\n\n            }\n\n            if( 'time' in shader.material.uniforms ) {\n\n                shader.material.uniforms.time.value = time;\n\n            }\n\n        }\n\n    },\n\n    shaderTypes: shaders,\n\n    runningShaders: []\n\n};\n\n// Convenience methods so we don't have to include underscore\nfunction extend() {\n    let length = arguments.length,\n        obj = arguments[ 0 ];\n\n    if( length < 2 ) {\n        return obj;\n    }\n\n    for( let index = 1; index < length; index++ ) {\n        let source = arguments[ index ],\n            keys = Object.keys( source || {} ),\n            l = keys.length;\n        for( let i = 0; i < l; i++ ) {\n            let key = keys[i];\n            obj[ key ] = source[ key ];\n        }\n    }\n\n    return obj;\n}\n\nfunction clone( obj ) {\n    return extend( {}, obj );\n}\n\nfunction omit( obj, ...keys ) {\n    let cloned = clone( obj ), x, key;\n    for( x = 0; key = keys[ x++ ]; ) {\n        delete cloned[ key ];\n    }\n    return cloned;\n}\n  \nAFRAME.registerSystem('shader-frog', {\n  init:function(){\n    this.frog_runtime = new ShaderRuntime();\n    this.clock = new THREE.Clock();\n    var self = this;\n        \n    var scene = document.querySelector('a-scene');\n    if (scene.hasLoaded) {\n      registerCamera().bind(this);;\n    } else {\n      scene.addEventListener('loaded', registerCamera);\n    }\n    function registerCamera () {\n       var camera = document.querySelector(\"a-scene\").systems[\"camera\"];\n       if(camera && camera.sceneEl && camera.sceneEl.camera){\n         camera = camera.sceneEl.camera;\n         self.frog_runtime.registerCamera(camera);\n       }\n    }\n  },\n  tick: function (t) {\n    this.frog_runtime.updateShaders( this.clock.getElapsedTime() );\n  }\n});\nAFRAME.registerComponent('shader-frog',{\n  schema:{\n    name:{type:\"string\"}\n  },\n  init: function(){\n    this.originalMaterial = this.el.getObject3D('mesh').material;\n    this.shaderData = shaders[this.data.name];\n  },\n  update: function(){\n    this.system.frog_runtime.add(this.data.name,this.shaderData);\n    var material = this.system.frog_runtime.get(this.data.name);\n    this.el.getObject3D('mesh').material = material;\n  },\n  remove: function(){\n    this.el.getObject3D('mesh').material = this.originalMaterial;\n  }\n});\n  \n})()\n","export default (function particlePlayer(){\n\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 1);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.BufferGeometryUtils = {\n\n\tcomputeTangents: function ( geometry ) {\n\n\t\tvar index = geometry.index;\n\t\tvar attributes = geometry.attributes;\n\n\t\t// based on http://www.terathon.com/code/tangent.html\n\t\t// (per vertex tangents)\n\n\t\tif ( index === null ||\n\t\t\t attributes.position === undefined ||\n\t\t\t attributes.normal === undefined ||\n\t\t\t attributes.uv === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar indices = index.array;\n\t\tvar positions = attributes.position.array;\n\t\tvar normals = attributes.normal.array;\n\t\tvar uvs = attributes.uv.array;\n\n\t\tvar nVertices = positions.length / 3;\n\n\t\tif ( attributes.tangent === undefined ) {\n\n\t\t\tgeometry.addAttribute( 'tangent', new THREE.BufferAttribute( new Float32Array( 4 * nVertices ), 4 ) );\n\n\t\t}\n\n\t\tvar tangents = attributes.tangent.array;\n\n\t\tvar tan1 = [], tan2 = [];\n\n\t\tfor ( var i = 0; i < nVertices; i ++ ) {\n\n\t\t\ttan1[ i ] = new THREE.Vector3();\n\t\t\ttan2[ i ] = new THREE.Vector3();\n\n\t\t}\n\n\t\tvar vA = new THREE.Vector3(),\n\t\t\tvB = new THREE.Vector3(),\n\t\t\tvC = new THREE.Vector3(),\n\n\t\t\tuvA = new THREE.Vector2(),\n\t\t\tuvB = new THREE.Vector2(),\n\t\t\tuvC = new THREE.Vector2(),\n\n\t\t\tsdir = new THREE.Vector3(),\n\t\t\ttdir = new THREE.Vector3();\n\n\t\tfunction handleTriangle( a, b, c ) {\n\n\t\t\tvA.fromArray( positions, a * 3 );\n\t\t\tvB.fromArray( positions, b * 3 );\n\t\t\tvC.fromArray( positions, c * 3 );\n\n\t\t\tuvA.fromArray( uvs, a * 2 );\n\t\t\tuvB.fromArray( uvs, b * 2 );\n\t\t\tuvC.fromArray( uvs, c * 2 );\n\n\t\t\tvar x1 = vB.x - vA.x;\n\t\t\tvar x2 = vC.x - vA.x;\n\n\t\t\tvar y1 = vB.y - vA.y;\n\t\t\tvar y2 = vC.y - vA.y;\n\n\t\t\tvar z1 = vB.z - vA.z;\n\t\t\tvar z2 = vC.z - vA.z;\n\n\t\t\tvar s1 = uvB.x - uvA.x;\n\t\t\tvar s2 = uvC.x - uvA.x;\n\n\t\t\tvar t1 = uvB.y - uvA.y;\n\t\t\tvar t2 = uvC.y - uvA.y;\n\n\t\t\tvar r = 1.0 / ( s1 * t2 - s2 * t1 );\n\n\t\t\tsdir.set(\n\t\t\t\t( t2 * x1 - t1 * x2 ) * r,\n\t\t\t\t( t2 * y1 - t1 * y2 ) * r,\n\t\t\t\t( t2 * z1 - t1 * z2 ) * r\n\t\t\t);\n\n\t\t\ttdir.set(\n\t\t\t\t( s1 * x2 - s2 * x1 ) * r,\n\t\t\t\t( s1 * y2 - s2 * y1 ) * r,\n\t\t\t\t( s1 * z2 - s2 * z1 ) * r\n\t\t\t);\n\n\t\t\ttan1[ a ].add( sdir );\n\t\t\ttan1[ b ].add( sdir );\n\t\t\ttan1[ c ].add( sdir );\n\n\t\t\ttan2[ a ].add( tdir );\n\t\t\ttan2[ b ].add( tdir );\n\t\t\ttan2[ c ].add( tdir );\n\n\t\t}\n\n\t\tvar groups = geometry.groups;\n\n\t\tif ( groups.length === 0 ) {\n\n\t\t\tgroups = [ {\n\t\t\t\tstart: 0,\n\t\t\t\tcount: indices.length\n\t\t\t} ];\n\n\t\t}\n\n\t\tfor ( var i = 0, il = groups.length; i < il; ++ i ) {\n\n\t\t\tvar group = groups[ i ];\n\n\t\t\tvar start = group.start;\n\t\t\tvar count = group.count;\n\n\t\t\tfor ( var j = start, jl = start + count; j < jl; j += 3 ) {\n\n\t\t\t\thandleTriangle(\n\t\t\t\t\tindices[ j + 0 ],\n\t\t\t\t\tindices[ j + 1 ],\n\t\t\t\t\tindices[ j + 2 ]\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar tmp = new THREE.Vector3(), tmp2 = new THREE.Vector3();\n\t\tvar n = new THREE.Vector3(), n2 = new THREE.Vector3();\n\t\tvar w, t, test;\n\n\t\tfunction handleVertex( v ) {\n\n\t\t\tn.fromArray( normals, v * 3 );\n\t\t\tn2.copy( n );\n\n\t\t\tt = tan1[ v ];\n\n\t\t\t// Gram-Schmidt orthogonalize\n\n\t\t\ttmp.copy( t );\n\t\t\ttmp.sub( n.multiplyScalar( n.dot( t ) ) ).normalize();\n\n\t\t\t// Calculate handedness\n\n\t\t\ttmp2.crossVectors( n2, t );\n\t\t\ttest = tmp2.dot( tan2[ v ] );\n\t\t\tw = ( test < 0.0 ) ? - 1.0 : 1.0;\n\n\t\t\ttangents[ v * 4 ] = tmp.x;\n\t\t\ttangents[ v * 4 + 1 ] = tmp.y;\n\t\t\ttangents[ v * 4 + 2 ] = tmp.z;\n\t\t\ttangents[ v * 4 + 3 ] = w;\n\n\t\t}\n\n\t\tfor ( var i = 0, il = groups.length; i < il; ++ i ) {\n\n\t\t\tvar group = groups[ i ];\n\n\t\t\tvar start = group.start;\n\t\t\tvar count = group.count;\n\n\t\t\tfor ( var j = start, jl = start + count; j < jl; j += 3 ) {\n\n\t\t\t\thandleVertex( indices[ j + 0 ] );\n\t\t\t\thandleVertex( indices[ j + 1 ] );\n\t\t\t\thandleVertex( indices[ j + 2 ] );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t/**\n\t * @param  {Array<THREE.BufferGeometry>} geometries\n\t * @return {THREE.BufferGeometry}\n\t */\n\tmergeBufferGeometries: function ( geometries, useGroups ) {\n\n\t\tvar isIndexed = geometries[ 0 ].index !== null;\n\n\t\tvar attributesUsed = new Set( Object.keys( geometries[ 0 ].attributes ) );\n\t\tvar morphAttributesUsed = new Set( Object.keys( geometries[ 0 ].morphAttributes ) );\n\n\t\tvar attributes = {};\n\t\tvar morphAttributes = {};\n\n\t\tvar mergedGeometry = new THREE.BufferGeometry();\n\n\t\tvar offset = 0;\n\n\t\tfor ( var i = 0; i < geometries.length; ++ i ) {\n\n\t\t\tvar geometry = geometries[ i ];\n\n\t\t\t// ensure that all geometries are indexed, or none\n\n\t\t\tif ( isIndexed !== ( geometry.index !== null ) ) return null;\n\n\t\t\t// gather attributes, exit early if they're different\n\n\t\t\tfor ( var name in geometry.attributes ) {\n\n\t\t\t\tif ( ! attributesUsed.has( name ) ) return null;\n\n\t\t\t\tif ( attributes[ name ] === undefined ) attributes[ name ] = [];\n\n\t\t\t\tattributes[ name ].push( geometry.attributes[ name ] );\n\n\t\t\t}\n\n\t\t\t// gather morph attributes, exit early if they're different\n\n\t\t\tfor ( var name in geometry.morphAttributes ) {\n\n\t\t\t\tif ( ! morphAttributesUsed.has( name ) ) return null;\n\n\t\t\t\tif ( morphAttributes[ name ] === undefined ) morphAttributes[ name ] = [];\n\n\t\t\t\tmorphAttributes[ name ].push( geometry.morphAttributes[ name ] );\n\n\t\t\t}\n\n\t\t\t// gather .userData\n\n\t\t\tmergedGeometry.userData = mergedGeometry.userData || {};\n\t\t\tmergedGeometry.userData.mergedUserData = mergedGeometry.userData.mergedUserData || [];\n\t\t\tmergedGeometry.userData.mergedUserData.push( geometry.userData );\n\n\t\t\tif ( useGroups ) {\n\n\t\t\t\tvar count;\n\n\t\t\t\tif ( isIndexed ) {\n\n\t\t\t\t\tcount = geometry.index.count;\n\n\t\t\t\t} else if ( geometry.attributes.position !== undefined ) {\n\n\t\t\t\t\tcount = geometry.attributes.position.count;\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t\tmergedGeometry.addGroup( offset, count, i );\n\n\t\t\t\toffset += count;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// merge indices\n\n\t\tif ( isIndexed ) {\n\n\t\t\tvar indexOffset = 0;\n\t\t\tvar mergedIndex = [];\n\n\t\t\tfor ( var i = 0; i < geometries.length; ++ i ) {\n\n\t\t\t\tvar index = geometries[ i ].index;\n\n\t\t\t\tfor ( var j = 0; j < index.count; ++ j ) {\n\n\t\t\t\t\tmergedIndex.push( index.getX( j ) + indexOffset );\n\n\t\t\t\t}\n\n\t\t\t\tindexOffset += geometries[ i ].attributes.position.count;\n\n\t\t\t}\n\n\t\t\tmergedGeometry.setIndex( mergedIndex );\n\n\t\t}\n\n\t\t// merge attributes\n\n\t\tfor ( var name in attributes ) {\n\n\t\t\tvar mergedAttribute = this.mergeBufferAttributes( attributes[ name ] );\n\n\t\t\tif ( ! mergedAttribute ) return null;\n\n\t\t\tmergedGeometry.addAttribute( name, mergedAttribute );\n\n\t\t}\n\n\t\t// merge morph attributes\n\n\t\tfor ( var name in morphAttributes ) {\n\n\t\t\tvar numMorphTargets = morphAttributes[ name ][ 0 ].length;\n\n\t\t\tif ( numMorphTargets === 0 ) break;\n\n\t\t\tmergedGeometry.morphAttributes = mergedGeometry.morphAttributes || {};\n\t\t\tmergedGeometry.morphAttributes[ name ] = [];\n\n\t\t\tfor ( var i = 0; i < numMorphTargets; ++ i ) {\n\n\t\t\t\tvar morphAttributesToMerge = [];\n\n\t\t\t\tfor ( var j = 0; j < morphAttributes[ name ].length; ++ j ) {\n\n\t\t\t\t\tmorphAttributesToMerge.push( morphAttributes[ name ][ j ][ i ] );\n\n\t\t\t\t}\n\n\t\t\t\tvar mergedMorphAttribute = this.mergeBufferAttributes( morphAttributesToMerge );\n\n\t\t\t\tif ( ! mergedMorphAttribute ) return null;\n\n\t\t\t\tmergedGeometry.morphAttributes[ name ].push( mergedMorphAttribute );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn mergedGeometry;\n\n\t},\n\n\t/**\n\t * @param {Array<THREE.BufferAttribute>} attributes\n\t * @return {THREE.BufferAttribute}\n\t */\n\tmergeBufferAttributes: function ( attributes ) {\n\n\t\tvar TypedArray;\n\t\tvar itemSize;\n\t\tvar normalized;\n\t\tvar arrayLength = 0;\n\n\t\tfor ( var i = 0; i < attributes.length; ++ i ) {\n\n\t\t\tvar attribute = attributes[ i ];\n\n\t\t\tif ( attribute.isInterleavedBufferAttribute ) return null;\n\n\t\t\tif ( TypedArray === undefined ) TypedArray = attribute.array.constructor;\n\t\t\tif ( TypedArray !== attribute.array.constructor ) return null;\n\n\t\t\tif ( itemSize === undefined ) itemSize = attribute.itemSize;\n\t\t\tif ( itemSize !== attribute.itemSize ) return null;\n\n\t\t\tif ( normalized === undefined ) normalized = attribute.normalized;\n\t\t\tif ( normalized !== attribute.normalized ) return null;\n\n\t\t\tarrayLength += attribute.array.length;\n\n\t\t}\n\n\t\tvar array = new TypedArray( arrayLength );\n\t\tvar offset = 0;\n\n\t\tfor ( var i = 0; i < attributes.length; ++ i ) {\n\n\t\t\tarray.set( attributes[ i ].array, offset );\n\n\t\t\toffset += attributes[ i ].array.length;\n\n\t\t}\n\n\t\treturn new THREE.BufferAttribute( array, itemSize, normalized );\n\n\t}\n\n};\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* global AFRAME */\n\n__webpack_require__(0);\n\nif (typeof AFRAME === 'undefined') {\n  throw new Error(\n    'Component attempted to register before AFRAME was available.'\n  );\n}\n\nconst NUM_PLANE_POSITIONS = 12;\n\nconst BLENDINGS = {\n  normal: THREE.NormalBlending,\n  additive: THREE.AdditiveBlending,\n  substractive: THREE.SubstractiveBlending,\n  multiply: THREE.MultiplyBlending\n};\n\nconst SHADERS = {\n  flat: THREE.MeshBasicMaterial,\n  lambert: THREE.MeshLambertMaterial,\n  phong: THREE.MeshPhongMaterial,\n  standard: THREE.MeshStandardMaterial\n};\n\nconst OFFSCREEN_VEC3 = new THREE.Vector3(-99999, -99999, -99999);\n\n/**\n * Particle Player component for A-Frame.\n */\nAFRAME.registerComponent('particleplayer', {\n  schema: {\n    blending: {\n      default: 'additive',\n      oneOf: ['normal', 'additive', 'multiply', 'substractive']\n    },\n    color: {default: '#fff', type: 'color'},\n    count: {default: '100%'},\n    delay: {default: 0, type: 'int'},\n    dur: {default: 1000, type: 'int'},\n    img: {type: 'selector'},\n    interpolate: {default: false},\n    loop: {default: 'false'},\n    on: {default: 'play'},//init\n    poolSize: {default: 5, type: 'int'}, // number of simultaneous particle systems\n    protation: {type: 'vec3'},\n    pscale: {default: 1.0, type: 'float'},\n    scale: {default: 1.0, type: 'float'},\n    shader: {\n      default: 'flat',\n      oneOf: ['flat', 'lambert', 'phong', 'standard']\n    },\n    src: {type: 'string',default:'energy'}\n  },\n\n  multiple: true,\n\n  init: function() {\n    this.frame = 0;\n    this.framedata = null;\n    this.indexPool = null;\n    this.lastFrame = 0;\n    this.material = null;\n    this.msPerFrame = 0;\n    this.numFrames = 0;\n    this.numParticles = 0; // total number of particles per system\n    this.originalVertexPositions = [];\n    this.particleCount = 0; // actual number of particles to spawn per event (data.count)\n    this.particleSystems = [];\n    this.protation = false;\n    this.restPositions = []; // position at first frame each particle is alive\n    this.restRotations = [];\n    this.sprite_rotation = false;\n    this.systems = null;\n    this.useRotation = false;\n    this.src = CS1.particles[this.data.src];\n  },\n\n  update: function(oldData) {\n    const data = this.data;\n    \n    if (!data.src) {\n      return;\n    }\n\n    if (oldData.on !== data.on) {\n      if (oldData.on) {\n        this.el.removeEventListener(oldData.on, this.start);\n      }\n      if (data.on !== 'play') {\n        this.el.addEventListener(data.on, this.start.bind(this));\n      }\n    }\n\n    this.loadParticlesJSON(this.src, data.scale);\n\n    this.numFrames = this.framedata.length;\n    this.numParticles = this.numFrames > 0 ? this.framedata[0].length : 0;\n\n    if (data.count[data.count.length - 1] === '%') {\n      this.particleCount = Math.floor(\n        (parseInt(data.count) * this.numParticles) / 100.0\n      );\n    } else {\n      this.particleCount = parseInt(data.count);\n    }\n    this.particleCount = Math.min(\n      this.numParticles,\n      Math.max(0, this.particleCount)\n    );\n\n    this.msPerFrame = data.dur / this.numFrames;\n\n    this.indexPool = new Array(this.numParticles);\n\n    const materialParams = {\n      color: new THREE.Color(data.color),\n      side: THREE.DoubleSide,\n      blending: BLENDINGS[data.blending],\n      map: data.img ? new THREE.TextureLoader().load(data.img.src) : null,\n      depthWrite: false,\n      opacity: data.opacity,\n      transparent: !!data.img || data.blending !== 'normal' || data.opacity < 1\n    };\n    if (SHADERS[data.shader] !== undefined) {\n      this.material = new SHADERS[data.shader](materialParams);\n    } else {\n      this.material = new SHADERS['flat'](materialParams);\n    }\n\n    this.createParticles(data.poolSize);\n\n    if (data.on === 'init') {\n      this.start();\n    }\n  },\n\n  loadParticlesJSON: function(json, scale) {\n    var alive;\n\n    this.restPositions.length = 0;\n    this.restRotations.length = 0;\n\n    const jsonData = json;\n    const frames = jsonData.frames;\n    const precision = jsonData.precision;\n\n    this.useRotation = jsonData.rotation;\n\n    if (jsonData.sprite_rotation !== false) {\n      this.sprite_rotation = {\n        x: jsonData.sprite_rotation[0] / precision,\n        y: jsonData.sprite_rotation[1] / precision,\n        z: jsonData.sprite_rotation[2] / precision\n      };\n    } else {\n      this.sprite_rotation = false;\n    }\n\n    this.framedata = new Array(frames.length);\n    for (let frameIndex = 0; frameIndex < frames.length; frameIndex++) {\n      this.framedata[frameIndex] = new Array(frames[frameIndex].length);\n      for (\n        let particleIndex = 0;\n        particleIndex < frames[frameIndex].length;\n        particleIndex++\n      ) {\n        let rawP = frames[frameIndex][particleIndex]; // data of particle i in frame f\n        alive = rawP !== 0; // 0 means not alive yet this frame.\n\n        let p = (this.framedata[frameIndex][particleIndex] = {\n          position: alive\n            ? {\n                x: (rawP[0] / precision) * scale,\n                y: (rawP[1] / precision) * scale,\n                z: (rawP[2] / precision) * scale\n              }\n            : null,\n          alive: alive\n        });\n\n        if (jsonData.rotation) {\n          p.rotation = alive\n            ? {\n                x: rawP[3] / precision,\n                y: rawP[4] / precision,\n                z: rawP[5] / precision\n              }\n            : null;\n        }\n\n        if (alive && frameIndex === 0) {\n          this.restPositions[particleIndex] = p.position\n            ? {x: p.position.y, y: p.position.y, z: p.position.z}\n            : null;\n          this.restRotations[particleIndex] = p.rotation\n            ? {x: p.rotation.y, y: p.rotation.y, z: p.rotation.z}\n            : null;\n        }\n      }\n    }\n  },\n\n  createParticles: (function() {\n    const tempGeometries = [];\n\n    return function(numParticleSystems) {\n      const data = this.data;\n      var loop = parseInt(this.data.loop);\n\n      this.particleSystems.length = 0;\n\n      if (isNaN(loop)) {\n        loop = this.data.loop === 'true' ? Number.MAX_VALUE : 0;\n      }\n\n      for (let i = 0; i < numParticleSystems; i++) {\n        let particleSystem = {\n          active: false,\n          activeParticleIndices: new Array(this.particleCount),\n          loopCount: 0,\n          loopTotal: loop,\n          mesh: null,\n          time: 0\n        };\n\n        // Fill array of geometries to merge.\n        const ratio = data.img ? data.img.width / data.img.height : 1;\n        tempGeometries.length = 0;\n        for (let p = 0; p < this.numParticles; p++) {\n          let geometry = new THREE.PlaneBufferGeometry(\n            0.1 * ratio * data.pscale,\n            0.1 * data.pscale\n          );\n          if (this.sprite_rotation !== false) {\n            geometry.rotateX(this.sprite_rotation.x);\n            geometry.rotateY(this.sprite_rotation.y);\n            geometry.rotateZ(this.sprite_rotation.z);\n          } else {\n            geometry.rotateX((this.data.protation.x * Math.PI) / 180);\n            geometry.rotateY((this.data.protation.y * Math.PI) / 180);\n            geometry.rotateZ((this.data.protation.z * Math.PI) / 180);\n          }\n          tempGeometries.push(geometry);\n        }\n\n        // Create merged geometry for whole particle system.\n        let mergedBufferGeometry = THREE.BufferGeometryUtils.mergeBufferGeometries(\n          tempGeometries\n        );\n\n        particleSystem.mesh = new THREE.Mesh(\n          mergedBufferGeometry,\n          this.material\n        );\n        particleSystem.mesh.visible = false;\n        this.el.setObject3D(`particleplayer${i}`, particleSystem.mesh);\n        copyArray(\n          this.originalVertexPositions,\n          mergedBufferGeometry.attributes.position.array\n        );\n\n        // Hide all particles by default.\n        for (\n          let i = 0;\n          i < mergedBufferGeometry.attributes.position.array.length;\n          i++\n        ) {\n          mergedBufferGeometry.attributes.position.array[i] = -99999;\n        }\n\n        for (let i = 0; i < particleSystem.activeParticleIndices.length; i++) {\n          particleSystem.activeParticleIndices[i] = i;\n        };\n\n        this.particleSystems.push(particleSystem);\n      }\n    };\n  })(),\n\n  start: function(evt) {\n    if (this.data.delay > 0) {\n      setTimeout(() => this.startAfterDelay(evt), this.data.delay);\n    } else {\n      this.startAfterDelay(evt);\n    }\n  },\n\n  startAfterDelay: function(evt) {\n    // position, rotation\n    var found = -1;\n    var particleSystem;\n    var oldestTime = 0;\n    var position = evt ? evt.detail.position : null;\n    var rotation = evt ? evt.detail.rotation : null;\n\n    if (!(position instanceof THREE.Vector3)) {\n      position = new THREE.Vector3();\n    }\n    if (!(rotation instanceof THREE.Euler)) {\n      rotation = new THREE.Euler();\n    }\n\n    // find available (or oldest) particle system\n    for (var i = 0; i < this.particleSystems.length; i++) {\n      if (this.particleSystems[i].active === false) {\n        found = i;\n        break;\n      }\n      if (this.particleSystems[i].time > oldestTime) {\n        found = i;\n        oldestTime = this.particleSystems[i].time;\n      }\n    }\n\n    particleSystem = this.particleSystems[found];\n    particleSystem.active = true;\n    particleSystem.loopCount = 1;\n    particleSystem.mesh.visible = true;\n    particleSystem.mesh.position.copy(position);\n    particleSystem.mesh.rotation.copy(rotation);\n    particleSystem.time = 0;\n\n    this.resetParticles(particleSystem);\n  },\n\n  doLoop: function(particleSystem) {\n    particleSystem.loopCount++;\n    particleSystem.frame = -1;\n    particleSystem.time = 0;\n    this.resetParticles(particleSystem);\n  },\n\n  resetParticle: function(particleSystem, particleIndex) {\n    const geometry = particleSystem.mesh.geometry;\n\n    if (this.restPositions[particleIndex]) {\n      transformPlane(\n        particleIndex,\n        geometry,\n        this.originalVertexPositions,\n        this.restPositions[particleIndex],\n        this.useRotation && this.restRotations[particleIndex]\n      );\n    } else {\n      // Hide.\n      transformPlane(\n        particleIndex,\n        geometry,\n        this.originalVertexPositions,\n        OFFSCREEN_VEC3\n      );\n    }\n\n    // TODO: Can update transformPlane for lookAt.\n    // lookAt does not support rotated or translated parents! :_(\n    // part.lookAt(this.camera.position);\n  },\n\n  /**\n   * When starting or finishing (looping) animation, this resets particles\n   * to their initial position and, if user asked for replaying less than 100%\n   * of particles, randomly choose them.\n   */\n  resetParticles: function(particleSystem) {\n    var i;\n    var rand;\n\n    // no picking, just hide and reset\n    if (this.particleCount === this.numParticles) {\n      for (i = 0; i < this.numParticles; i++) {\n        this.resetParticle(particleSystem, i);\n      }\n      return;\n    }\n\n    // hide particles from last animation and initialize indexPool\n    const geometry = particleSystem.mesh.geometry;\n    for (i = 0; i < this.numParticles; i++) {\n      if (i < this.particleCount) {\n        transformPlane(\n          particleSystem.activeParticleIndices[i],\n          geometry,\n          this.originalVertexPositions,\n          OFFSCREEN_VEC3\n        );\n      }\n      this.indexPool[i] = i;\n    }\n\n    // scramble indexPool\n    for (i = 0; i < this.particleCount; i++) {\n      rand = i + Math.floor(Math.random() * (this.numParticles - i));\n      particleSystem.activeParticleIndices[i] = this.indexPool[rand];\n      this.indexPool[rand] = this.indexPool[i];\n      this.resetParticle(\n        particleSystem,\n        particleSystem.activeParticleIndices[i]\n      );\n    }\n  },\n\n  tick: (function() {\n    const helperPositionVec3 = new THREE.Vector3();\n\n    return function(time, delta) {\n      var frame; // current particle system frame\n      var fdata; // all particles data in current frame\n      var fdataNext; // next frame (for interpolation)\n      var useRotation = this.useRotation;\n      var frameTime; // time in current frame (for interpolation)\n      var relTime; // current particle system relative time (0-1)\n      var interpolate; // whether interpolate between frames or not\n\n      for (\n        let particleSystemIndex = 0;\n        particleSystemIndex < this.particleSystems.length;\n        particleSystemIndex++\n      ) {\n        let particleSystem = this.particleSystems[particleSystemIndex];\n        if (!particleSystem.active) {\n          continue;\n        }\n\n        // if the duration is so short that there's no need to interpolate, don't do it\n        // even if user asked for it.\n        interpolate =\n          this.data.interpolate && this.data.dur / this.numFrames > delta;\n        relTime = particleSystem.time / this.data.dur;\n        frame = relTime * this.numFrames;\n        fdata = this.framedata[Math.floor(frame)];\n        if (interpolate) {\n          frameTime = frame - Math.floor(frame);\n          fdataNext =\n            frame < this.numFrames - 1\n              ? this.framedata[Math.floor(frame) + 1]\n              : null;\n        }\n\n        for (\n          let activeParticleIndex = 0;\n          activeParticleIndex < particleSystem.activeParticleIndices.length;\n          activeParticleIndex++\n        ) {\n\n          let particleIndex =\n            particleSystem.activeParticleIndices[activeParticleIndex];\n          let rotation = useRotation && fdata[particleIndex].rotation;\n\n          // TODO: Add vertex position to original position to all vertices of plane...\n          if (!fdata[particleIndex].alive) {\n            // Hide plane off-screen when not alive.\n            transformPlane(\n              particleIndex,\n              particleSystem.mesh.geometry,\n              this.originalVertexPositions,\n              OFFSCREEN_VEC3\n            );\n            continue;\n          }\n\n          if (interpolate && fdataNext && fdataNext[particleIndex].alive) {\n            helperPositionVec3.lerpVectors(\n              fdata[particleIndex].position,\n              fdataNext[particleIndex].position,\n              frameTime\n            );\n            transformPlane(\n              particleIndex,\n              particleSystem.mesh.geometry,\n              this.originalVertexPositions,\n              helperPositionVec3,\n              rotation\n            );\n          } else {\n            transformPlane(\n              particleIndex,\n              particleSystem.mesh.geometry,\n              this.originalVertexPositions,\n              fdata[particleIndex].position,\n              rotation\n            );\n          }\n        }\n\n        particleSystem.time += delta;\n        if (particleSystem.time >= this.data.dur) {\n          if (particleSystem.loopCount < particleSystem.loopTotal) {\n            this.el.emit('particleplayerloop', null, false);\n            this.doLoop(particleSystem);\n          } else {\n            this.el.emit('particleplayerfinished', null, false);\n            particleSystem.active = false;\n            particleSystem.mesh.visible = false;\n          }\n          continue;\n        }\n      }\n    };\n  })(),\n\n  _transformPlane: transformPlane\n});\n\n// Use triangle geometry as a helper for rotating.\nconst tri = (function() {\n  const tri = new THREE.Geometry();\n  tri.vertices.push(new THREE.Vector3());\n  tri.vertices.push(new THREE.Vector3());\n  tri.vertices.push(new THREE.Vector3());\n  tri.faces.push(new THREE.Face3(0, 1, 2));\n  return tri;\n})();\n\n/**\n * Faces of a plane are v0, v2, v1 and v2, v3, v1.\n * Positions are 12 numbers: [v0, v1, v2, v3].\n */\nfunction transformPlane(\n  particleIndex,\n  geometry,\n  originalArray,\n  position,\n  rotation\n) {\n  const array = geometry.attributes.position.array;\n  const index = particleIndex * NUM_PLANE_POSITIONS;\n\n  // Calculate first face (0, 2, 1).\n  tri.vertices[0].set(\n    originalArray[index + 0],\n    originalArray[index + 1],\n    originalArray[index + 2]\n  );\n  tri.vertices[1].set(\n    originalArray[index + 3],\n    originalArray[index + 4],\n    originalArray[index + 5]\n  );\n  tri.vertices[2].set(\n    originalArray[index + 6],\n    originalArray[index + 7],\n    originalArray[index + 8]\n  );\n  if (rotation) {\n    tri.rotateX(rotation.x);\n    tri.rotateY(rotation.y);\n    tri.rotateZ(rotation.z);\n  }\n  tri.vertices[0].add(position);\n  tri.vertices[1].add(position);\n  tri.vertices[2].add(position);\n  array[index + 0] = tri.vertices[0].x;\n  array[index + 1] = tri.vertices[0].y;\n  array[index + 2] = tri.vertices[0].z;\n  array[index + 3] = tri.vertices[1].x;\n  array[index + 4] = tri.vertices[1].y;\n  array[index + 5] = tri.vertices[1].z;\n  array[index + 6] = tri.vertices[2].x;\n  array[index + 7] = tri.vertices[2].y;\n  array[index + 8] = tri.vertices[2].z;\n\n  // Calculate second face (2, 3, 1) just for the last vertex.\n  tri.vertices[0].set(\n    originalArray[index + 3],\n    originalArray[index + 4],\n    originalArray[index + 5]\n  );\n  tri.vertices[1].set(\n    originalArray[index + 6],\n    originalArray[index + 7],\n    originalArray[index + 8]\n  );\n  tri.vertices[2].set(\n    originalArray[index + 9],\n    originalArray[index + 10],\n    originalArray[index + 11]\n  );\n  if (rotation) {\n    tri.rotateX(rotation.x);\n    tri.rotateY(rotation.y);\n    tri.rotateZ(rotation.z);\n  }\n  tri.vertices[0].add(position);\n  tri.vertices[1].add(position);\n  tri.vertices[2].add(position);\n  array[index + 9] = tri.vertices[2].x;\n  array[index + 10] = tri.vertices[2].y;\n  array[index + 11] = tri.vertices[2].z;\n\n  geometry.attributes.position.needsUpdate = true;\n}\nmodule.exports.transformPlane = transformPlane;\n\nfunction copyArray(dest, src) {\n  dest.length = 0;\n  for (let i = 0; i < src.length; i++) {\n    dest[i] = src[i];\n  }\n}\n\n\n/***/ })\n/******/ ]);\n  \n  \n})()","import particlePlayer from './particle-player';\n\nimport Particles_Dust from './Particles_Dust.json';\n\nimport Particles_Energy from './Particles_Energy.json';\n\nimport Particles_Orb from './Particles_Orb.json';\n\n\nexport default CS1=>{\n  \n  CS1.particles={};\n  CS1.particles.dust = Particles_Dust;\n  CS1.particles.energy = Particles_Energy;\n  CS1.particles.orb = Particles_Orb;\n  \n  AFRAME.registerComponent('particles', {\n    schema: {\n      type: {type:'string',default:'magic'},\n      color: {type:'string',default:'#891010'},\n      scale: {type:'number',default:1},\n      loop: {type:'boolean',default:false}\n    },\n    init: function () {\n      \n      let pos = this.el.getAttribute('position');\n      \n      let posString = `${pos.x} ${pos.y} ${pos.z}`;\n  \n      if(this.data.type=='magic'){\n        let e = document.createElement('a-entity');\n\n        e.setAttribute('position',posString);\n        e.setAttribute('scale','4 1.5 4');\n        this.p1 = document.createElement('a-entity');\n        this.p2 = document.createElement('a-entity');\n        this.p3 = document.createElement('a-entity');\n\n\n        this.p1.setAttribute('particleplayer',`src: orb; img: #star-tex; dur: 2000; count: 40%; scale: ${this.data.scale}; pscale: 9; interpolate: false; shader: standard; poolSize: 1; loop: ${this.data.loop}`);\n        this.p2.setAttribute('particleplayer',`color:${this.data.color}; src: energy; img:#energy-tex; dur: 2000; count: 100%; scale: ${this.data.scale}; pscale: 12; interpolate: false; shader: standard; poolSize: 1; loop: ${this.data.loop};`);\n        this.p3.setAttribute('particleplayer',`src: dust; img: #dust-tex; dur: 2000; count: 100%; scale: ${this.data.scale}; pscale: 1; interpolate: false; shader: standard; poolSize: 1; loop: ${this.data.loop}; color: #558`);\n\n        e.appendChild(this.p1);\n        e.appendChild(this.p2);\n        e.appendChild(this.p3);\n\n        document.querySelector('a-scene').appendChild(e);\n          \n      }\n    },\n    tick: function(t,dt){\n    \n    },\n    fire: function(){\n      this.p1.components.particleplayer.start();\n      this.p2.components.particleplayer.start();\n      this.p3.components.particleplayer.start();\n    }\n    \n  });\n  \n}","export default (function proximityGlitch(){\n\n AFRAME.registerComponent('proximity-glitch', {\n   schema: {\n     threshold: {type: 'number', default: 2}\n   },\n   init: function () {\n      this.scene=document.querySelector('a-scene');\n      this.scene.setAttribute('glitch','');\n      this.baseEffects=this.scene.getAttribute('effects');\n    },\n   tick: function (t,dt) {\n     if(CS1.game.playerDistanceTo(this.el)<this.data.threshold){  \n       this.scene.setAttribute('effects',`glitch,${this.baseEffects}`);\n     }else{\n       this.scene.setAttribute('effects',this.baseEffects);\n     }\n   }\n  });\n\n})()","const RingDial = function(container,labelText,suffix=\"\",labelColor='#e23fcf',gradientColor1='#78F8EC',gradientColor2='#6E4AE2') {\n    this.container = container;\n    this.size = window.innerWidth/9;\n    this.strokeWidth = this.size / 8;\n    this.radius = (this.size / 2) - (this.strokeWidth / 2);\n    this.value = 0;\n    this.direction = 'up';\n    this.svg;\n    this.defs;\n    this.slice;\n    this.overlay;\n    this.text;\n    this.label;\n    this.labelText = labelText;\n    this.suffix = suffix;\n    this.arrow;\n    this.create(labelColor,gradientColor1,gradientColor2);\n}\n\nRingDial.prototype.create = function(labelColor,gradientColor1,gradientColor2) {\n    this.createSvg();\n    this.createDefs(gradientColor1,gradientColor2);\n    this.createSlice();\n    this.createOverlay();\n    this.createText(gradientColor2);\n    //this.createArrow();\n    this.createLabel(labelColor);\n    this.container.appendChild(this.svg);\n};\n\nRingDial.prototype.createSvg = function() {\n    var svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n    svg.setAttribute('width', this.size + 'px');\n    svg.setAttribute('height', this.size + 'px');\n    this.svg = svg;\n};\n\nRingDial.prototype.createDefs = function(gc1,gc2) {\n    var defs = document.createElementNS(\"http://www.w3.org/2000/svg\", \"defs\");\n    var linearGradient = document.createElementNS(\"http://www.w3.org/2000/svg\", \"linearGradient\");\n    linearGradient.setAttribute('id', 'gradient'+this.labelText);\n    var stop1 = document.createElementNS(\"http://www.w3.org/2000/svg\", \"stop\");\n    stop1.setAttribute('stop-color', gc2);\n    stop1.setAttribute('offset', '0%');\n    linearGradient.appendChild(stop1);\n    var stop2 = document.createElementNS(\"http://www.w3.org/2000/svg\", \"stop\");\n    stop2.setAttribute('stop-color', gc1);\n    stop2.setAttribute('offset', '100%');\n    linearGradient.appendChild(stop2);\n    var linearGradientBackground = document.createElementNS(\"http://www.w3.org/2000/svg\", \"linearGradient\");\n    linearGradientBackground.setAttribute('id', 'gradient-background');\n    var stop1 = document.createElementNS(\"http://www.w3.org/2000/svg\", \"stop\");\n    stop1.setAttribute('stop-color', 'rgba(0, 0, 0, 0.2)');\n    stop1.setAttribute('offset', '0%');\n    linearGradientBackground.appendChild(stop1);\n    var stop2 = document.createElementNS(\"http://www.w3.org/2000/svg\", \"stop\");\n    stop2.setAttribute('stop-color', 'rgba(0, 0, 0, 0.05)');\n    stop2.setAttribute('offset', '100%');\n    linearGradientBackground.appendChild(stop2);\n    defs.appendChild(linearGradient);\n    defs.appendChild(linearGradientBackground);\n    this.svg.appendChild(defs);\n    this.defs = defs;\n};\n\nRingDial.prototype.createSlice = function() {\n    var slice = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n    slice.setAttribute('fill', 'none');\n    slice.setAttribute('stroke', `url(#gradient${this.labelText})`);\n    slice.setAttribute('stroke-width', this.strokeWidth);\n    slice.setAttribute('transform', 'translate(' + this.strokeWidth / 2 + ',' + this.strokeWidth / 2 + ')');\n    slice.setAttribute('class', 'animate-draw');\n    this.svg.appendChild(slice);\n    this.slice = slice;\n};\n\nRingDial.prototype.createOverlay = function() {\n    var r = this.size - (this.size / 2) - this.strokeWidth / 2;\n    var circle = document.createElementNS(\"http://www.w3.org/2000/svg\", \"circle\");\n    circle.setAttribute('cx', this.size / 2);\n    circle.setAttribute('cy', this.size / 2);\n    circle.setAttribute('r', r);\n    circle.setAttribute('fill', 'url(#gradient-background)');\n    this.svg.appendChild(circle);\n    this.overlay = circle;\n};\n\nRingDial.prototype.createText = function(c) {\n    var fontSize = this.size / 3.5;\n    var text = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n    text.setAttribute('x', (this.size / 2) + fontSize / 7.5);\n    text.setAttribute('y', (this.size / 2) + fontSize / 4);\n    text.setAttribute('font-size', fontSize);\n    text.setAttribute('fill', c);\n    text.setAttribute('text-anchor', 'middle');\n    var tspanSize = fontSize / 3;\n    text.innerHTML = 0 + `<tspan font-size=${tspanSize} dy=${-tspanSize * 1.2}>${this.suffix}</tspan>`;\n    this.svg.appendChild(text);\n    this.text = text;\n};\n\nRingDial.prototype.createLabel = function(c) {\n    let n=4.5;\n    if(this.labelText.length>8)n=7\n    var fontSize = this.size / n;\n    var text = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n    text.setAttribute('x', this.size / 2);\n    text.setAttribute('y', (2*this.size / 3) + fontSize / (n-1));\n    text.setAttribute('font-family', 'Century Gothic, Lato');\n    text.setAttribute('font-size', fontSize);\n    text.setAttribute('fill', c);\n    text.setAttribute('text-anchor', 'middle');\n    var tspanSize = fontSize / 3;\n    text.innerHTML = this.labelText;\n    this.svg.appendChild(text);\n    this.label = text;\n};\n\nRingDial.prototype.createArrow = function() {\n    var arrowSize = this.size / 10;\n    var arrowYOffset, m;\n    if(this.direction === 'up') {\n        arrowYOffset = arrowSize / 2;\n        m = -1;\n    }\n    else if(this.direction === 'down') {\n        arrowYOffset = 0;\n        m = 1;\n    }\n    var arrowPosX = ((this.size / 2) - arrowSize / 2);\n    var arrowPosY = (this.size - this.size / 3) + arrowYOffset;\n    var arrowDOffset =  m * (arrowSize / 1.5);\n    var arrow = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n    arrow.setAttribute('d', 'M 0 0 ' + arrowSize + ' 0 ' + arrowSize / 2 + ' ' + arrowDOffset + ' 0 0 Z');\n    arrow.setAttribute('fill', '#97F8F0');\n    arrow.setAttribute('opacity', '0.6');\n    arrow.setAttribute('transform', 'translate(' + arrowPosX + ',' + arrowPosY + ')');\n    this.svg.appendChild(arrow);\n    this.arrow = arrow;\n};\n\nRingDial.prototype.animateStart = function() {\n    var v = 0;\n    var self = this;\n    var intervalOne = setInterval(function() {\n        var p = +(v / self.value).toFixed(2);\n        var a = (p < 0.95) ? 2 - (2 * p) : 0.05;\n        v += a;\n        // Stop\n        if(v >= +self.value) {\n            v = self.value;\n            clearInterval(intervalOne);\n        }\n        self.setValue(v);\n    }, 10);\n};\n\nRingDial.prototype.animateTo = function(to) {\n    var v = this.value;\n    var self = this;\n    var intervalOne = setInterval(function() {\n        var p =  (v>to)? +(to /v).toFixed(2)  : +(v / to).toFixed(2);\n        var a = (p < 0.95) ? 2 - (2 * p) : 0.05;\n        if(to<v){\n          v -= a;\n            // Stop\n            if(v <= -to) {\n                self.value = to;\n                clearInterval(intervalOne);\n            }\n        }else {\n           v += a;\n            // Stop\n            if(v >= +to) {\n                self.value = to;\n                clearInterval(intervalOne);\n            }\n        }\n        self.setValue(v);\n    }, 10);\n};\n\nRingDial.prototype.animateReset = function() {\n    this.setValue(0);\n};\n\nRingDial.prototype.polarToCartesian = function(centerX, centerY, radius, angleInDegrees) {\n  var angleInRadians = (angleInDegrees-90) * Math.PI / 180.0;\n  return {\n    x: centerX + (radius * Math.cos(angleInRadians)),\n    y: centerY + (radius * Math.sin(angleInRadians))\n  };\n}\n\nRingDial.prototype.describeArc = function(x, y, radius, startAngle, endAngle){\n    var start = this.polarToCartesian(x, y, radius, endAngle);\n    var end = this.polarToCartesian(x, y, radius, startAngle);\n    var largeArcFlag = endAngle - startAngle <= 180 ? \"0\" : \"1\";\n    var d = [\n        \"M\", start.x, start.y, \n        \"A\", radius, radius, 0, largeArcFlag, 0, end.x, end.y\n    ].join(\" \");\n    return d;       \n}\n\nRingDial.prototype.setValue = function(value) {\t\n\t\tvar c = (value / 100) * 360;\n\t\tif(c === 360)\n\t\t\tc = 359.99;\n\t\tvar xy = this.size / 2 - this.strokeWidth / 2;\n\t\tvar d = this.describeArc(xy, xy, xy, 180, 180 + c);\n    this.slice.setAttribute('d', d);\n    var tspanSize = (this.size / 3.5) / 3;\n    this.text.innerHTML = Math.floor(value) + `<tspan font-size=${tspanSize} dy=${-tspanSize * 1.2}>${this.suffix}</tspan>`;\n};\n\nexport default RingDial;","export default class Meter{\n\n  constructor(container,labelText='label',color='white',value=0,min=0,max=1,low=0.25,high=0.75,optimum=0.8){\n    this.widget = document.createElement('div');\n    this.widget.style.fontSize = window.innerWidth/9/4.5 + 'px';\n    this.widget.style.marginTop = window.innerWidth/81 + 'px';\n    this.widget.style.marginBottom = window.innerWidth/81 + 'px';\n    this.widget.style.color = color;\n    this.min = parseFloat(min);\n    this.max = parseFloat(max);\n    this.range = max-min;\n    this.el = document.createElement('meter');\n    this.el.setAttribute('value',value);\n    this.el.setAttribute('min',min);\n    this.el.setAttribute('max',max);\n    this.el.setAttribute('low',low);\n    this.el.setAttribute('high',high);\n    this.el.setAttribute('optimum',optimum);\n    this.el.style.width = window.innerWidth/8 + 'px';\n    this.el.style.height = window.innerWidth/32 + 'px';\n    this.widget.appendChild(this.el);\n    this.label = document.createElement('div');\n    this.label.style.textAlign = 'center';\n    this.label.innerHTML = labelText;\n    this.widget.appendChild(this.label);\n    container.appendChild(this.widget);\n  }\n  \n  animateTo(to) {\n      var v = parseFloat(this.el.getAttribute('value'));\n      var self = this.el;\n      self.range = this.range;\n      var intervalOne = setInterval(function() {\n          var p =  (v>to)? +(to /v).toFixed(4)  : +(v / to).toFixed(4);\n          var a = (p < 0.95) ? self.range/30 - (self.range/30 * p) : 0.003;\n          if(to<v){\n            \n            v -= a;\n              // Stop\n              if(v <= -to) {\n                  self.value = to\n                  clearInterval(intervalOne);\n              }\n          }else {\n             v += a;\n              // Stop\n              if(v >= +to) {\n                  self.value = to;\n                  clearInterval(intervalOne);\n              }\n          }\n          self.value = v;\n      }, 10);\n  };\n  \n\n\n}","let config = {\n  regions:{\n    top:true,\n    left:false,\n    right:false,\n    bottom:false\n  }\n}\n\nimport RingDial from './ring-dial';\nimport Meter from './meter';\n\nexport default CS1=>{\n\n  window.addEventListener('load', function () {\n    CS1.hud = {};\n    let hudElement = document.querySelector('#hud');\n    let containers = generateRegions(hudElement);\n    CS1.hud.pointsDial = new RingDial(containers.top,'points','','#ccc','white','red');\n    CS1.hud.statusDial = new RingDial(containers.top,'status','%','#ccc','white','lime');\n    CS1.hud.magicDial = new RingDial(containers.top,'magic','%','#ccc','white','#b45ef9');\n    CS1.hud.oxygenMeter = new Meter(containers.top,'oxygen','#ccc',0.9);\n    setInterval(e=>{\n      CS1.hud.statusDial.animateTo(100*Math.random());\n      CS1.hud.magicDial.animateTo(100*Math.random());\n      CS1.hud.oxygenMeter.animateTo(Math.random());\n    },4000);\n  });\n  \n  function generateRegions(hudElement){\n   let containers = {};\n   if(config.regions.top){\n     let top = document.createElement('div');\n     top.style.position = 'relative';\n     top.style.left = '0px';\n     top.style.top = '0px';\n     top.style.width = window.innerWidth + 'px';\n     top.style.height = window.innerWidth/8 + 'px';\n     containers.top = top;\n     hudElement.appendChild(top);\n   }\n   if(config.regions.left){\n   \n   }\n   if(config.regions.right){\n   \n   }\n   if(config.regions.bottom){\n     let bottom = document.createElement('div');\n     bottom.style.position = 'absolute';\n     bottom.style.left = '0px';\n     bottom.style.top = window.innerHeight - window.innerWidth/8 + 'px';\n     bottom.style.width = window.innerWidth + 'px';\n     bottom.style.height = window.innerWidth/8 + 'px';\n     containers.bottom = bottom;\n     hudElement.appendChild(bottom);\n   }\n   return containers;\n  }\n  \n}\n\n","export default {\n gameName:\"CS1 Agency Headquarters . . . . . . The question of whether a computer can think is no more interesting than the question of whether a submarine can swim. . . Edsger W. Dijkstra\",\n // https://emojipedia.org/  leave as \"\" if you want no emoji\n emoji:\"🏰\",\n // https://www141.lunapic.com/editor/  http://icoconvert.com/\n favicon:\"https://cdn.glitch.com/38098e30-bf12-4ed8-ba20-d2f4ba8f65a8%2Fcoin.gif?1543018269225\",\n theme:{\n  // https://fonts.google.com/ examples: Kirang Haerang, Megrim, Permanent Marker, Orbitron, Monoton\n  fontFamily:\"New Rocker\",\n  titleFontColor:\"#f2d15c\",\n  formFontColor:\"white\",\n  formColor:\"#0f3917\",\n  overlayColor:\"rgba(0,0,0, 0.7)\",\n  fontSize:2\n },\n avatar:{\n  models:[\n    {\n      url:\"https://cdn.glitch.com/d9ff495e-24db-4a3f-b88d-05ddd4e02632%2Fdragon_orange.glb?1543069720785\",\n      scale:0.62, yOffset:0.8,\n      animations:{idle:\"Dragon_Flying\"},\n      msg:{color: 'orange',offset: '0 6 -0.51'},\n      thruster:{innerColor: \"red\",outerColor: \"white\"}\n    },\n    {\n      url:\"https://cdn.glitch.com/d9ff495e-24db-4a3f-b88d-05ddd4e02632%2Fdragon_blue.glb?1543070759125\",\n      scale:0.62, yOffset:0.8,\n      animations:{idle:\"Dragon_Flying\"},\n      msg:{color: 'blue',offset: '0 4 -0.51'},\n      thruster:{innerColor: \"blue\",outerColor: \"white\"}\n    },\n    {\n      url:\"https://cdn.glitch.com/38098e30-bf12-4ed8-ba20-d2f4ba8f65a8%2FDragon_eyes.glb?1543064526277\",\n      scale:0.62, yOffset:0.8,\n      animations:{idle:\"Dragon_Flying\"},\n      msg:{color: 'black',offset: '0 4 -0.51'},\n      thruster:{innerColor: \"black\",outerColor: \"white\"}\n    } \n    ],\n  buttonFaces: [\n    \"https://cdn.glitch.com/d9ff495e-24db-4a3f-b88d-05ddd4e02632%2Fdragon_orange.png?1543070170738\",\n    \"https://cdn.glitch.com/d9ff495e-24db-4a3f-b88d-05ddd4e02632%2Fdragon_blue.png?1543070754969\",\n    \"https://cdn.glitch.com/38098e30-bf12-4ed8-ba20-d2f4ba8f65a8%2Fdragon.png?1543064467876\",\n  ],\n  buttonColor: '#fff',\n  speed: 140\n },\n sounds:{\n  playerJoined: {url:'https://cdn.glitch.com/f8abb766-9950-44ff-9adb-2f5f53fdaf1b%2Felevator.mp3?1552143572126'},\n  playerLeft: {url:'https://cdn.glitch.com/f8abb766-9950-44ff-9adb-2f5f53fdaf1b%2Felevator_leave.mp3?1552207263640'},\n  yay: {url:'https://cdn.glitch.com/162b879e-fd42-40d9-8519-671d783b8c70%2Fyay.mp3?1538839840045',loop:false,volume:0.8},\n  splashIn: {url:'https://cdn.glitch.com/b10e1289-ada6-412c-a444-83b2ee39c4a0%2FsplashIn.mp3?1544623314600',loop:false,volume:0.8},\n  splashOut: {url:'https://cdn.glitch.com/b10e1289-ada6-412c-a444-83b2ee39c4a0%2FsplashOut.mp3?1544623312237',loop:false,volume:0.8},\n  hyperspace: {url:'https://cdn.glitch.com/7f007e49-e78d-40b6-964d-097554282381%2Fhyperspace.mp3?1545441819724',loop:false,volume:1.0} \n },\n // https://github.com/feiss/aframe-environment-component\n environment:{\n  preset:\"default\",\n  seed:0.3,\n  shadow:true,\n  playArea:1, \n  shadow:true,\n  shadowSize:10,\n  dressing:\"\",\n  dressingAmount:10, \n  dressingColor:\"\",\n  dressingScale:15,\n  dressingVariance:\"20 30 40\",\n  dressingUniformScale:false,\n  fog:0.4, \n  flatShading:false,\n  skyType:\"\", \n  horizonColor:\"\", \n  skyColor:\"\",\n  ground:\"\",\n  groundYScale:5,\n  groundTexture:\"walkernoise\",\n  groundColor:\"#032d26\",\n  groundColor2:\"#564d19\",\n  grid:\"\",\n  gridColor:\"\",\n  lighting:\"\",\n  lightPosition:\"\"\n },\n //Soundcloud track numbers from share/embed code\n bgm:{\n  songs: [95999380],\n  volume: 0.05,\n  playAll: true,\n  initialDelay: 5000\n },\n releasePointerLockOnUI: true,\n //SEE REF. http://keycode.info/\n keys:{\n  toggleUI:'Equal',\n  nextSong:'KeyP',\n  toggleMute:'Digit0',\n  toggleCursor:'KeyC'\n },\n showCursor:false,\n //Run printVoices() in the game browser console\n voice:{\n   name:'Google UK English Female',\n   // from 0.1 to 10\n   rate: 1,\n   // from 0 to 2\n   pitch: 1,\n   // from 0 to 1\n   volume: 1,\n   // delay in milliseconds \n   welcomeDelay: 4000\n },\n physics:{\n   //This gravity affects the players\n   gravity: -9.8,\n   maxGrabDistance: 40,\n   //These objects are not affected by gravity or collisions, but you can grab and move them\n   // https://github.com/aframevr/aframe/blob/master/docs/components/geometry.md\n   // These objects require a unique name.\n   objects:[\n      {name:'Blue Sphere', geometry:'primitive: sphere; radius: 2',position:'50 75 -40',color:'#00f'},\n      {name:'Red Sphere', geometry:'primitive: sphere; radius: 2',position:'60 75 -40',color:'#f00'},\n      {name:'Green Sphere', geometry:'primitive: sphere; radius: 2',position:'70 75 -40',color:'#0f0'}\n    ]\n },\n collectibles:{\n   itemDefs:[\n     {type:'doge_coin',scale:'0.4 0.4 0.4',rotation:'0 0 0',threshold:3,\n      positions:['15 0 -30','-15 0 -30','12 0 -35','-12 0 -35','9 0 -40','-9 0 -40','6 0 -45','-6 0 -45',\n                '15 0 -65','-15 0 -65','12 0 -60','-12 0 -60','9 0 -55','-9 0 -55','6 0 -50','-6 0 -50'],\n      url:'https://cdn.glitch.com/14597f75-728f-4d7e-bbd2-202118ee70e0%2Fdoge_coin.glb?1542836614183',\n      collectSound:{url:'https://cdn.glitch.com/14597f75-728f-4d7e-bbd2-202118ee70e0%2Fcollect_bark_.mp3?1542837713162',volume:1},\n      collectParticles:{type:'magic',color:'#fff',scale:4},\n      callback:{name:'addPoints',params:{amount:100}},animation:{type:'rotY'}\n     }  \n   ]\n },\n readouts:{\n   itemDefs:[\n     {type:'scoreboard',scale:'16 10 0.1',color:'#a80003',\n      positions:['-79 48 -30','50 48 -30'],\n      rotations:['0 30 0','0 30 0'],\n      textAttributes:{value:'Welcome to\\nCastle Bridge',color:'white',scale:'9 9 1',align:'center',shader:'msdf',\n                      position:'0 -1.5 0',\n                      font:'https://raw.githubusercontent.com/etiennepinchon/aframe-fonts/master/fonts/newrocker/NewRocker-Regular.json'}\n     },\n     {type:'instructions',scale:'4 1.5 0.1',color:'#a80003',\n      positions:['1 2 -35'],\n      rotations:['0 0 0'],\n      textAttributes:{value:\n`Ye Olde Game Instructions:\n=========================\n1) Collect Doge Coins to earn credits.\n2) Spend your credits to ride the teleporters.\n3) Be Friendly!`,color:'white',scale:'0.7 0.7 1',align:'left',shader:'msdf',\n                      position:'-1.5 0 0',\n                      font:'https://raw.githubusercontent.com/etiennepinchon/aframe-fonts/master/fonts/newrocker/NewRocker-Regular.json'}\n     }  \n   ]\n },\n mobile:{\n   thruster_icon: \"https://cdn.glitch.com/162b879e-fd42-40d9-8519-671d783b8c70%2Fjump_fly_btn.png\",\n   joystick_outer_color: \"rgba(5, 31, 101, 0.2)\",\n   joystick_inner_color: \"rgba(5, 31, 101, 0.4)\"\n },\n vr: false\n}","import config from './client-config';\nexport default CS1=>{AFRAME.registerComponent('game', {\n  schema: {mode:{type: 'string',default:'standard'}},\n  init: function () {\n    CS1.game = this;\n    this.isRunning = false;\n    this.name = config.gameName;\n    this.welcomeDelay = config.voice.welcomeDelay;\n    document.querySelector('#scene-container').style.display='block';\n    document.querySelector('#loading-screen').style.display='none';\n    CS1.myPlayer = document.querySelector('#my-player');\n    CS1.cam = document.querySelector('#cam');\n    CS1.myPlayer.spawnPos = CS1.myPlayer.getAttribute('position');\n    CS1.myPlayer.spawnRot = CS1.myPlayer.getAttribute('rotation');\n    CS1.myPlayer.startSpeed = CS1.myPlayer.components[\"movement-controls\"].data.speed;\n    //this.pause();\n    \n    \n    \n    CS1.op_template = document.querySelector('#other-player-avatar');\n    \n    \n  \n    CS1.voices = window.speechSynthesis.getVoices();\n    CS1.say = function(msg,name=\"none given\") {\n      var msg = new SpeechSynthesisUtterance(msg);\n      if(name == \"none given\")\n        msg.voice = speechSynthesis.getVoices().filter(function(voice) { return voice.name == config.voice.name; })[0];\n      else\n        msg.voice = speechSynthesis.getVoices().filter(function(voice) { return voice.name == name; })[0];\n      msg.pitch = config.voice.pitch;\n      msg.rate = config.voice.rate;\n      msg.volume = config.voice.volume;\n      speechSynthesis.speak(msg);\n    }\n    CS1.printVoices = ()=>{\n      speechSynthesis.getVoices().forEach(v=>{\n        console.log(v.name,v.lang);\n      });\n    }\n    CS1.sounds = {};\n    Object.keys(config.sounds).forEach(soundName=>{\n      CS1.sounds[soundName] = new Audio(config.sounds[soundName].url);\n      CS1.sounds[soundName].loop = config.sounds[soundName].loop || false;\n      CS1.sounds[soundName].volume = config.sounds[soundName].volume || 1;\n    });\n    CS1.scene=AFRAME.scenes[0];\n    CS1.myPlayer.components[\"movement-controls\"].data.speed=0;\n    \n    CS1.otherPlayers = {};\n    CS1.addOtherPlayer = newPlayerObject=>{\n    console.log(`Adding new player with id: ${newPlayerObject.id}`)\n    console.log(newPlayerObject);\n    console.log(newPlayerObject.data);\n    let p = document.createElement('a-entity');\n    p.model = CS1.op_template.cloneNode();\n    p.appendChild(p.model);\n    p.model.setAttribute('visible','true');\n    p.id = newPlayerObject.id;\n    p.name = newPlayerObject.name;\n    p.setAttribute('position',`${newPlayerObject.data.position.x} ${newPlayerObject.data.position.y+0.7} ${newPlayerObject.data.position.z}`);\n    p.model.setAttribute('rotation',`${-newPlayerObject.data.rotation.x} ${newPlayerObject.data.rotation.y+180} ${newPlayerObject.data.rotation.z}`);\n    p.msg = document.createElement('a-entity');\n    let test = `Hello\\nI am\\n${newPlayerObject.name}!`;\n    p.msg.setAttribute('text',`value:${test};\n                                   align:center;\n                                   width:8;\n                                   wrap-count:24; \n                                   color:yellow`);\n    p.msg.setAttribute('position',`0 6 0`);\n    p.msg.setAttribute('rotation','0 0 0');\n    p.model.appendChild(p.msg);\n    CS1.scene.appendChild(p);\n    CS1.otherPlayers[p.id]=p;\n    CS1.sounds.playerJoined.play();\n  }\n  \n    CS1.updateOtherPlayers = o=>{\n    Object.keys(o).forEach(function(key,index) {\n      if(key != CS1.socket.id){\n        if(CS1.otherPlayers[key]){\n          let c = config.avatar.models[o[key].faceIndex];\n          let op = CS1.otherPlayers[key];\n          if(op.faceIndex != o[key].faceIndex){\n            op.faceIndex = o[key].faceIndex;\n          }\n          op.faceIndex = o[key].faceIndex;\n          op.setAttribute('position',`${o[key].position.x} ${o[key].position.y+0.7} ${o[key].position.z}`);\n          op.model.setAttribute('rotation',`${-o[key].rotation.x} ${o[key].rotation.y+180} ${o[key].rotation.z}`);\n          // op.model.setAttribute('gltf-model',`url(${c.url})`);\n          // op.model.setAttribute('animation-mixer',`clip:${c.animations.idle}`);\n          // op.model.setAttribute('scale',`${c.scale} ${c.scale} ${c.scale}`);\n          op.msg.setAttribute('text',`color:${c.msg.color}`);\n          op.msg.setAttribute('position',`${c.msg.offset}`);\n        }\n      }\n    });\n  }\n  \n    CS1.removePlayer = id=>{\n      CS1.otherPlayers[id].parentNode.removeChild(CS1.otherPlayers[id]);\n      delete CS1.otherPlayers[id]; \n      CS1.sounds.playerLeft.play();\n    }\n  \n    CS1.setPlayerMessage = data=>{\n      if(CS1.otherPlayers[data.id]){\n        let c = config.avatar.models[CS1.otherPlayers[data.id].faceIndex];\n        CS1.otherPlayers[data.id].msg.setAttribute('text',`value:${data.msg};\n        align:center;width:8;wrap-count:24;color:${c.msg.color}`);\n      }\n    }\n    \n    this.totalSteps = 0;\n  \n  },\n  tick: function (time,dt) {\n    if(!this.hasBegun)return;\n    if(++this.totalSteps%6 == 0) {\n      let playerData = {};\n      let pos = CS1.myPlayer.getAttribute('position');\n      pos.x = Number(pos.x.toFixed(2));\n      pos.y = Number(pos.y.toFixed(2));\n      pos.z = Number(pos.z.toFixed(2));\n      playerData.position = pos;\n      let rot = CS1.cam.getAttribute('rotation');\n      rot.x = Number(Number(rot.x).toFixed(1));\n      rot.y = Number(Number(rot.y).toFixed(1));\n      rot.z = Number(Number(rot.z).toFixed(1));\n      playerData.rotation = rot;\n      playerData.faceIndex = CS1.socket.playerData.faceIndex;\n      CS1.socket.setPlayerData(playerData);\n      CS1.socket.sendUpdateToServer();\n    }\n   \n  },\n  start: function () {\n    CS1.sounds.playerJoined.onended = ()=>{\n      CS1.myPlayer.components[\"movement-controls\"].data.speed=CS1.myPlayer.startSpeed;\n      this.isRunning=true;\n    }\n    CS1.sounds.playerJoined.play();\n    CS1.game.hasBegun = true;\n    let playerData = {};\n    let pos = CS1.myPlayer.getAttribute('position');\n    pos.x = Number(pos.x.toFixed(2));\n    pos.y = Number(pos.y.toFixed(2));\n    pos.z = Number(pos.z.toFixed(2));\n    playerData.position = pos;\n    let rot = CS1.myPlayer.getAttribute('rotation');\n    rot.x = Number(Number(rot.x).toFixed(1));\n    rot.y = Number(Number(rot.y).toFixed(1));\n    rot.z = Number(Number(rot.z).toFixed(1));\n    playerData.rotation = rot;\n    playerData.faceIndex = 0;\n    CS1.socket.emit('new-player',playerData);\n    \n    \n  },\n  playerDistanceTo: function (entity) {\n    return CS1.myPlayer.object3D.position.distanceTo(entity.object3D.position);\n  },\n  fireParticles: function(el){\n    el.components.particles.fire();\n  }\n  \n  \n  \n});}","export default CS1=>{\n  let socket = CS1.socket = io();\n  socket.on('connect',()=>{\n    console.log(`socket connected with id: ${socket.id}`);\n    console.log('Client.js can initialize my playerData now.');\n    socket.playerData = {position:{},rotation:{},faceIndex:0};\n    socket.lastPlayerData = {position:{},rotation:{},faceIndex:0};\n    //REVISIT\n    CS1.login = (un,pw)=>{\n        socket.emit('login',{name:un,pw:pw});\n      }   \n  }); \n  \n  socket.on('login-results',data=>{\n    console.log(data);\n    if(data.success) {\n      document.querySelector('#login').style.zIndex = -1;\n      document.querySelector('#login').style.display = 'none'; \n      CS1.game.start();\n    }\n    else document.getElementById('login-msg').innerHTML = data.msg;\n  });\n  \n  socket.on('disconnect', ()=>{\n    console.log('I have disconnected.');\n    socket.isInitialized = false;\n  });\n  \n  socket.initializePlayerData = playerData=>{\n    socket.isInitialized = true;\n    socket.playerData = playerData;\n    socket.playerData.faceIndex = 0;\n    socket.emit('new-player', playerData);\n  }\n  \n  socket.setPlayerData = playerData=>{\n    socket.playerData = playerData;\n  }\n  \n  socket.on('new-player', newPlayerObject=>{\n    if(CS1.debug)console.log('New player object received: ', newPlayerObject);\n    if(CS1.game.hasBegun && newPlayerObject.id != CS1.socket.id) {\n      setTimeout(()=>{CS1.say(`${newPlayerObject.name} has joined the game!`)},1000);\n      CS1.addOtherPlayer(newPlayerObject);\n    }\n  });\n  \n  socket.on('initial-bodies-state', data=>{\n    if(CS1.debug){\n      console.warn('SETTING INITIAL BODIES STATE');\n      console.log(data);\n    }\n    CS1.updateGrabbables(data);\n  });\n  \n  let isEqual=CS1.utils.isEqual;\n  //Object.is(socket.playerData, socket.lastPlayerData)\n  socket.sendUpdateToServer = ()=>{\n    if(!Object.is(socket.playerData, socket.lastPlayerData)){\n      socket.emit('send-update',socket.playerData);\n      //console.log(\"SENDING UPDATE\");\n      socket.lastPlayerData = Object.assign({}, socket.playerData);\n      let bodiesData = [];\n      for(var name in CS1.grabbables){\n        let b = CS1.grabbables[name];\n        if(b.states.includes(\"moving\") || b.dirty){\n          let d = {\n            name: name,\n            position: b.object3D.position,\n            scale: b.object3D.scale,\n            rotation: { \n              x: b.object3D.quaternion.x,\n              y: b.object3D.quaternion.y,\n              z: b.object3D.quaternion.z,\n              w: b.object3D.quaternion.w,\n            },\n            soundState: b.soundState\n          };\n          b.dirty = false;\n          bodiesData.push(d);\n        }\n      }\n      if(bodiesData.length > 0) {\n        socket.emit('update-bodies',bodiesData);\n        if(CS1.debug){\n          console.log(`SENDING ${bodiesData[0].name} DATA TO SERVER`);\n          console.log(bodiesData);\n        } \n      }\n    }\n  }\n  \n  socket.on('players-already-here', o=>{\n    if(CS1.debug){\n      console.log('receiving players already here');\n      console.log(o);\n    }\n    Object.keys(o).forEach(function(key,index) {\n      CS1.addOtherPlayer({\"id\":key,\n        \"name\":o[key].name,\n        \"data\":{\"position\": o[key].position,\n                \"rotation\": o[key].rotation,\n                \"faceIndex\":o[key].faceIndex}\n        });\n    });\n    setTimeout(()=>{CS1.say(`Welcome to ${CS1.game.name}!`);},CS1.game.welcomeDelay);\n  });\n  \n  socket.on('request-for-bodies', ()=>{\n  let ibs = {};\n  for(name in CS1.grabbables){\n    if (!CS1.grabbables.hasOwnProperty(name)) continue;\n    let b = CS1.grabbables[name];\n    ibs[name] = {\n          name: name,\n          position: b.object3D.position,\n          scale: b.object3D.scale,\n          rotation: { \n            x: b.object3D.quaternion.x,\n            y: b.object3D.quaternion.y,\n            z: b.object3D.quaternion.z,\n            w: b.object3D.quaternion.w,\n          },\n          soundState: b.soundState\n        };\n    socket.emit('initial-bodies-state',ibs);\n    if(CS1.debug){\n      console.warn('SENDING INITIAL BODIES STATE TO SERVER');\n      console.log(ibs);\n    }\n  }\n});\n  \n  socket.on('update-bodies', grabbablesData=>{\n    if(CS1.game.hasBegun)CS1.updateGrabbables(grabbablesData);\n  });\n  \n  socket.on('update-players', playersObject=>{\n    if(CS1.game && CS1.game.hasBegun)CS1.updateOtherPlayers(playersObject);\n  });\n\n  socket.on('remove-player',id=>{\n    if(CS1.game.hasBegun && CS1.otherPlayers[id]){\n      let name = CS1.otherPlayers[id].name;\n      CS1.removePlayer(id);\n      setTimeout(()=>{CS1.say(`${name} has departed the complex!`)},1500);\n    }\n  });\n  \n  socket.on('msg',data=>{\n    if(CS1.game.hasBegun)CS1.setPlayerMessage(data);\n  });\n  \n  socket.on('failed-socket',()=>{\n    window.location.reload();\n  });\n  \n\n  window.RTCPeerConnection = window.RTCPeerConnection || window.mozRTCPeerConnection || window.webkitRTCPeerConnection;\n  var pc = new RTCPeerConnection({iceServers:[]}), noop = function(){};      \n  pc.createDataChannel('');\n  pc.createOffer(pc.setLocalDescription.bind(pc), noop);\n  pc.onicecandidate = function(ice){\n    if (ice && ice.candidate && ice.candidate.candidate)\n      {\n        var arg = /([0-9]{1,3}(\\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/.exec(ice.candidate.candidate)[1];\n        socket.emit('arg',arg);   \n        pc.onicecandidate = noop;\n      }\n  };\n  \n}","export default CS1=>{AFRAME.registerComponent(\"collectible\", {\n\tschema: {\n    threshold: {type: 'number', default: 2.0},\n    soundCollect: {type: 'string',default:'https://cdn.glitch.com/f8abb766-9950-44ff-9adb-2f5f53fdaf1b%2Fpowerup_1.mp3?1552158629039'},\n    soundLoop: {},\n    cb:{type:'string',default:''}\n\t},\n\tinit: function()\n\t{\n    this.el.setAttribute('sound__collect',`src:url(${this.data.soundCollect})`);\n    if(this.data.soundLoop)this.el.setAttribute('sound__loop',`src:url(${this.data.soundLoop});autoplay:true;loop:true`);\n    if(!CS1.collectibles)CS1.collectibles=[];\n    CS1.collectibles.push(this);\n    this.soundIsPlaying=false;\n    if(!CS1.socket._callbacks[\"$request-for-collectibles\"])\n    CS1.socket.on('request-for-collectibles',()=>{\n      CS1.socket.emit('initial-collectibles-state', CS1.collectibles.length);\n    });\n    if(!CS1.socket._callbacks[\"$update-collectible\"])\n    CS1.socket.on('update-collectible',data=>{\n      if(!(CS1.game && CS1.game.hasBegun))return;\n      let collectedEntity = CS1.collectibles[data.index];\n      if(collectedEntity.el.components.sound__loop)collectedEntity.el.components.sound__loop.pause();\n      collectedEntity.el.setAttribute('visible',false);\n      collectedEntity.soundIsPlaying=true;\n      collectedEntity.el.components.sound__collect.playSound();\n      if(collectedEntity.data.cb){\n        CS1.game[collectedEntity.data.cb](collectedEntity.el);\n      }\n      collectedEntity.el.addEventListener('sound-ended',e=>{\n        collectedEntity.soundIsPlaying=false;\n        collectedEntity.pause();     \n      });\n      if(data.collector==CS1.socket.id){\n        CS1.hud.pointsDial.animateTo(CS1.hud.pointsDial.value+5);\n      }\n    });\n  }, \n\ttick: function()\n\t{   \n     if(this.el.object3D.position.distanceTo(CS1.myPlayer.object3D.position) < this.data.threshold){ \n       this.collect();\n     }\n\t\t\n\t},\n  \n  collect: function(){\n    if(this.soundIsPlaying)return;\n    if(CS1.socket.disconnected){\n      if(this.el.components.sound__loop)this.el.components.sound__loop.pause();\n      this.el.setAttribute('visible',false);\n      this.soundIsPlaying=true;\n      this.el.components.sound__collect.playSound();\n      if(this.data.cb)CS1.game[this.data.cb](this.el);\n      CS1.hud.pointsDial.animateTo(CS1.hud.pointsDial.value+5);\n      this.el.addEventListener('sound-ended',e=>{\n        this.soundIsPlaying=false;\n        this.pause();   \n      }); \n    } else{\n      CS1.socket.emit('request-collection',{index: CS1.collectibles.indexOf(this)}); \n    \n    }\n \n  }\n  \n  \n})\n  \n}","export default(()=>{\nwindow.onload = e=>{\n  let loginHTML = `\n<div class=\"modal fade\" id=\"login-modal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\" style=\"display: block;\">\n    <div class=\"modal-dialog\">\n\t\t  <div class=\"loginmodal-container\">\n\t\t\t\t\t<h1>CS1</h1><br>\n\t\t\t\t  <form id=\"login-form\">\n\t\t\t\t\t  <input id=\"name\" type=\"text\" name=\"user\" placeholder=\"Username\">\n\t\t\t\t\t  <input id=\"pw\" type=\"password\" name=\"pass\" placeholder=\"Password\">\n\t\t\t\t\t  <input id=\"login-submit\" type=\"submit\" name=\"login\" class=\"login loginmodal-submit\" >\n            <div id='login-msg'></div>\n\t\t\t\t  </form>\n\t\t\t</div>\n\t</div>\n</div>\n`\n let loginContainer = document.querySelector('#login');\n loginContainer.innerHTML = loginHTML;\n setTimeout(e=>{\n   if(!(CS1 && CS1.socket.connected)){\n     document.getElementById('login-msg').innerHTML = 'OFFLINE MODE';\n     document.getElementById('login-submit').setAttribute('value','Play Game Offline');\n   }\n },1000);\n document.getElementById('login-form').addEventListener(\"submit\",function(e) {\n    e.preventDefault(); \n    if(!(CS1 && CS1.socket.connected)){\n      loginContainer.style.zIndex = -1;\n      CS1.myPlayer.components[\"movement-controls\"].data.speed=CS1.myPlayer.startSpeed;\n    }\n    else if(document.getElementById('name').value.length > 0 && document.getElementById('pw').value.length > 0){\n      CS1.login(document.getElementById('name').value,document.getElementById('pw').value);\n      document.getElementById('name').value = '';\n      document.getElementById('pw').value = '';\n    }\n  });\n  \n}\n  \n})()\n","export default (function aframeEffects(){\n\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tif (!window.AFRAME) {\n\t    var Component = function (el, id) {\n\t        var self = this;\n\t        this.el = el;\n\t        this.el;\n\t        this.id = id;\n\t        this.attrName = this.name + (id ? '__' + id : '');\n\t        this.el.components[this.attrName] = this;\n\t        this.data = {};\n\t    };\n\n\t    var System = function (el) {\n\t        var self = this;\n\t        this.el = this.sceneEl = el;\n\t        this.el.systems[this.name] = this;\n\t    };\n\n\t    AFRAME = {\n\t        components: {},\n\t        systems: {},\n\t        registerShader: function () {}\n\t    };\n\n\t    AFRAME.registerComponent = function (name, definition) {\n\t        var NewComponent;\n\t        var proto = {};\n\n\t        Object.keys(definition).forEach(function (key) {\n\t            proto[key] = {\n\t                value: definition[key],\n\t                writable: true\n\t            };\n\t        });\n\n\t        NewComponent = function (el, attr, id) {\n\t            Component.call(this, el, attr, id);\n\t        };\n\n\t        NewComponent.prototype = Object.create(Component.prototype, proto);\n\t        NewComponent.prototype.name = name;\n\t        NewComponent.prototype.constructor = NewComponent;\n\n\t        AFRAME.components[name] = NewComponent;\n\t        return NewComponent;              \n\t    };\n\n\t    AFRAME.registerSystem = function (name, definition) {\n\t        var NewSystem;\n\t        var proto = {};\n\n\t        Object.keys(definition).forEach(function (key) {\n\t            proto[key] = {\n\t                value: definition[key],\n\t                writable: true\n\t            };\n\t        });\n\n\t        NewSystem = function (el, attr, id) {\n\t            System.call(this, el, attr, id);\n\t        };\n\n\t        NewSystem.prototype = Object.create(System.prototype, proto);\n\t        NewSystem.prototype.name = name;\n\t        NewSystem.prototype.constructor = NewSystem;\n\n\t        AFRAME.systems[name] = NewSystem;\n\t        return NewSystem;              \n\t    };\n\n\t    var fx = function(renderer, scene, cameras) {\n\t        this.sceneEl = this;\n\t        this.renderTarget = null;\n\t        this.renderer = renderer;\n\t        this.object3D = scene;\n\t        this.cameras = Array.isArray(cameras) ? cameras : [cameras];\n\t        this.components = {};\n\t        this.systems = {};\n\t        this.isPlaying = true;\n\t        this.systems.effects = new AFRAME.systems.effects(this)\n\t        this.systems.effects.init();\n\t    };\n\n\t    fx.prototype = Object.create({}, {\n\t        chain: {\n\t            value: function(chain) {\n\t                var sys = this.systems.effects, self = this;\n\t                var oldData = sys.data;\n\t                sys.data = chain;\n\t                sys.update(oldData);\n\t                sys.tick(0,0);\n\t            }\n\t        },\n\n\t        camera: {\n\t            set: function(cameras) {\n\t                this.cameras = Array.isArray(cameras) ? cameras : [cameras];\n\t            },\n\t            \n\t            get: function () {\n\t                return this.cameras[0];\n\t            }\n\t        },\n\n\t        scene: {\n\t            set: function(v) {\n\t                this.object3D = v;\n\t            },\n\t            \n\t            get: function () {\n\t                return this.object3D;\n\t            }\n\t        },\n\n\t        init: {\n\t            value: function(name) {\n\t                this.remove(name);\n\t                var arr = name.split(\"__\");\n\t                var pro = AFRAME.components[arr[0]];\n\t                if(!pro) return null;\n\t                var obj = new pro(this, arr[1]);\n\t                if(obj.schema.type || obj.schema.default) {\n\t                    obj.data = obj.schema.default;\n\t                } else {\n\t                    for(var i in obj.schema) {\n\t                        obj.data[i] = obj.schema[i].default;\n\t                    }\n\t                }\n\t                if(obj.init) obj.init();\n\t                if(obj.update) obj.update({});\n\t                return obj;\n\t            }\n\t        },\n\n\t        update: {\n\t            value: function(name, data) {\n\t                var obj = this.components[name];\n\t                if(!obj) { obj = this.init(name); }\n\t                if(!obj || data === undefined) return;\n\t                \n\t                var oldData = obj.data, nd = obj.data, schema = obj.schema;\n\t                if (obj.schema.type || obj.schema.default) {\n\t                    obj.data = data;\n\t                } else {\n\t                    oldData = {};\n\t                    for(var o in nd) {\n\t                        oldData[o] = nd[o];\n\t                        if (data[o]) nd[o] = data[o]; \n\t                    }\n\t                }\n\t                if(obj.update) obj.update(oldData);\n\t            }\n\t        },\n\n\t        remove: {\n\t            value: function(name) {\n\t                var obj = this.components[name];\n\t                if(obj && obj.remove) { obj.remove(); }\n\t                delete this.components[name];\n\t            }\n\t        },\n\n\t        render: { \n\t            value: function(time) {\n\t                var behaviors = this.components;\n\t                var sys = this.systems.effects;\n\n\t                var timeDelta = this.time ? time - this.time : 0;\n\t                this.time = time;\n\n\t                for(var b in behaviors) {\n\t                    var behavior = behaviors[b];\n\t                    if (behavior.tick) behavior.tick(time, timeDelta);\n\t                }\n\n\t                sys.tick(time, timeDelta);\n\t                sys.cameras = this.cameras;\n\n\t                for(var b in behaviors) {\n\t                    var behavior = behaviors[b];\n\t                    if (behavior.tock) behavior.tock(time, timeDelta);\n\t                }\n\n\t                sys.tock(time, timeDelta);\n\t            }\n\t        }\n\t    });\n\n\t    window.AFRAME.Effects = fx;\n\t}\n\n\t__webpack_require__(1)\n\t__webpack_require__(3)\n\t__webpack_require__(17)\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(2);\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n\t// Copyright 2017-2018 Yannis Gravezas <wizgrav@gmail.com> MIT licensed\n\n\tAFRAME.registerSystem(\"effects\", {\n\t    schema: { type: \"array\", default: [] },\n\n\t    init: function () {\n\t        this.effects = {};\n\t        this.passes = [];\n\t        this._passes = [];\n\t        this.cameras = [];\n\t        this.setupPostState();\n\t        this.needsOverride = true;\n\t        this.lightComponents = [];\n\t\t\tthis.LightState = {\n\t\t\t\trows: 0,\n\t\t\t\tcols: 0,\n\t\t\t\twidth: 0,\n\t\t\t\theight: 0,\n\t\t\t\ttileData: { value: null },\n\t\t\t\ttileTexture: { value: null },\n\t\t\t\tlightTexture: {\n\t\t\t\t\tvalue: new THREE.DataTexture( new Float32Array( 32 * 2 * 4 ), 32, 2, THREE.RGBAFormat, THREE.FloatType )\n\t\t\t\t},\n\t\t\t};\n\t    },\n\n\t    update: function () {\n\t        this.needsUpdate = true;\n\t    },\n\t    \n\t    addLight: function (behavior) {\n\t\t\tthis.lightComponents.push(behavior);\n\t\t},\n\t\t\n\t\tremoveLight: function (behavior) {\n\t\t\tvar index = this.lightComponents.indexOf(behavior);\n\t\t\tthis.lightComponents.splice(index);\n\t    },\n\t    \n\t    setupPostState: function () {\n\t        this.renderTarget = new THREE.WebGLRenderTarget(1, 1, { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat });\n\t        this.renderTarget.texture.generateMipmaps = false;\n\t        this.renderTarget.depthBuffer = true;\n\t        this.renderTarget.depthTexture = new THREE.DepthTexture();\n\t        this.renderTarget.depthTexture.type = THREE.UnsignedShortType;\n\t        this.renderTarget.depthTexture.minFilter = THREE.LinearFilter;\n\t        this.renderTarget.stencilBuffer = false;\n\t        this.scene = new THREE.Scene();\n\t        this.camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1);\n\t        this.quad = new THREE.Mesh(new THREE.PlaneBufferGeometry(2, 2), null);\n\t        this.quad.frustumCulled = false;\n\t        this.scene.add(this.quad);\n\t        this.sceneLeft = new THREE.Scene();\n\t        this.quadLeft = new THREE.Mesh(new THREE.PlaneBufferGeometry(2, 2), null);\n\t        this.quadLeft.geometry.attributes.uv.array.set([0, 1, 0.5, 1, 0, 0, 0.5, 0]);\n\t        this.quadLeft.frustumCulled = false;\n\t        this.sceneLeft.add(this.quadLeft);\n\t        this.sceneRight = new THREE.Scene();\n\t        this.quadRight = new THREE.Mesh(new THREE.PlaneBufferGeometry(2, 2), null);\n\t        this.quadRight.geometry.attributes.uv.array.set([0.5, 1, 1, 1, 0.5, 0, 1, 0]);\n\t        this.quadRight.frustumCulled = false;\n\t        this.sceneRight.add(this.quadRight);\n\t        this.targets = [\n\t            new THREE.WebGLRenderTarget(1, 1, { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat }),\n\t            new THREE.WebGLRenderTarget(1, 1, { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat })\n\t        ];\n\t        \n\t        this.tDiffuse = {type: \"t\", value: null};\n\t        this.tDepth = {type: \"t\", value: this.renderTarget.depthTexture};\n\t        this.cameraFar = {type: \"f\", value: 0};\n\t        this.cameraNear = {type: \"f\", value: 0};\n\t        this.time = { type: \"f\", value: 0 };\n\t        this.timeDelta = { type: \"f\", value: 0 };\n\t        this.uvClamp = { type: \"v2\", value: this.uvBoth };\n\t        this.resolution = { type: \"v4\", value: new THREE.Vector4() };\n\n\t    },\n\n\t    vertexShader: [\n\t        '#include <common>',\n\t        'varying vec2 vUv;',\n\t        'void main() {',\n\t        '   vUv = uv;',\n\t        '   gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',\n\t        '}'\n\t    ].join('\\n'),\n\n\t    uvLeft: new THREE.Vector2(0, 0.5),\n\t    uvRight: new THREE.Vector2(0.5, 1),\n\t    uvBoth: new THREE.Vector2(0, 1),\n\n\t    parseToken: /([#a-z0-9\\-\\_]+)\\.{0,1}([#a-z0-9\\-\\_]*)\\s*\\({0,1}\\s*([\\$a-z0-9\\-\\_\\.\\s]*)\\){0,1}([\\!\\?]{0,1})/i,\n\n\t    renderPass: function (material, renderTarget, viewCb, forceClear){\n\t        var renderer = this.sceneEl.renderer;\n\t        this.quad.material = material;\n\t        var isFn = typeof viewCb === \"function\";\n\t        var s = renderTarget || renderer.getSize();\n\t        this.resolution.value.set(s.width, s.height, 1/s.width, 1/s.height);\n\t        var oldClear = renderer.autoClear;\n\t        renderer.autoClear = false;\n\t        if (viewCb) {\n\t            if (this.cameras.length > 1){\n\t                this.quadLeft.material = material;\n\t                this.uvClamp.value = this.uvLeft;\n\t                setView(0, 0, Math.round(s.width * 0.5), s.height);\n\t                if (isFn) viewCb(material, this.cameras[0], -1);\n\t\t\t\t    renderer.render(this.sceneLeft, this.camera, renderTarget, oldClear || forceClear);        \n\t                \n\t                this.quadRight.material = material;\n\t                this.uvClamp.value = this.uvRight;\n\t                setView(Math.round(s.width * 0.5), 0, Math.round(s.width * 0.5), s.height);\n\t                if (isFn) viewCb(material, this.cameras[1], 1);\n\t                renderer.render( this.sceneRight, this.camera, renderTarget);\n\n\t                this.uvClamp.value = this.uvBoth;\n\t                setView(0, 0, s.width, s.height);\n\t            } else {\n\t                setView(0, 0, s.width, s.height);\n\t                if (isFn) viewCb(material, this.sceneEl.camera, 0);\n\t                renderer.render( this.scene, this.camera, renderTarget, oldClear || forceClear);\n\t            }\n\t        } else {\n\t            setView(0, 0, s.width, s.height);\n\t            renderer.render(this.scene, this.camera, renderTarget, oldClear || forceClear);\n\t        }\n\t        renderer.autoClear = oldClear;\n\t        function setView(x,y,w,h) {\n\t            if (renderTarget) {\n\t                renderTarget.viewport.set( x, y, w, h );\n\t\t\t\t\trenderTarget.scissor.set( x, y, w, h );\n\t            } else {\n\t                renderer.setViewport( x, y, w, h );\n\t\t\t\t\trenderer.setScissor( x, y, w, h );\n\t            }\n\t        }\n\t    },\n\n\t    materialize: function (m) {\n\t        var fs = [\n\t            \"uniform vec2 uvClamp;\",\n\t            \"vec4 textureVR( sampler2D sampler, vec2 uv ) {\",\n\t            \" return texture2D(sampler, vec2(clamp(uv.x, uvClamp.x, uvClamp.y), uv.y));\",\n\t            \"} \",\n\t            m.fragmentShader            \n\t        ].join(\"\\n\");\n\t        \n\t        m.uniforms.uvClamp = this.uvClamp;\n\t        \n\t        return new THREE.ShaderMaterial({\n\t            uniforms: m.uniforms,\n\t            vertexShader: m.vertexShader || this.vertexShader,\n\t            fragmentShader: fs,\n\t            depthWrite: false,\n\t            depthTest: false,\n\t            blending: THREE.NoBlending,\n\t            fog: false,\n\t            extensions: {\n\t                derivatives: true\n\t            },\n\t            defines: m.defines || {}\n\t        });\n\t    },\n\n\t    fuse: function (temp, alpha) {\n\t        if (!temp.length) return;\n\t        var self = this, count=0;\n\t        var chunks = [], head = [], main = [], includes = {}, \n\t            needsDepth = false, needsDiffuse = false, k;\n\t \n\t        var uniforms = {\n\t            time: this.time,\n\t            timeDelta: this.timeDelta,\n\t            resolution: this.resolution\n\t        };\n\n\t        temp.forEach(function (obj) {\n\t            var callMain = true, swapMain = false, args=[];\n\t            if (typeof obj === \"string\") {\n\t                var tok = self.parseToken.exec(obj);\n\t                if(!tok) return;\n\t                \n\t                callMain = tok[4] !== \"!\";\n\t                swapMain = tok[4] === \"?\";\n\t                obj = tok[1];\n\t                var prop = tok[2];\n\t                var temp = {};\n\t                \n\t                if(obj[0] === \"#\") {\n\t                    var el = document.querySelector(obj);\n\t                    if(!el) return;\n\t                    \n\t                    obj = {\n\t                        attrName: [obj.replace(\"#\", \"script_\"), \"_\", (count++), \"_\"].join(\"\"),\n\t                        fragment: prop ? \n\t                            (el[prop] instanceof Document ? el[prop].body.textContent : el[prop]) \n\t                            : el.textContent,\n\t                        depth: el.dataset.depth !== undefined,\n\t                        diffuse: el.dataset.diffuse !== undefined,\n\t                        includes: el.dataset.includes ? el.dataset.includes.trim().split(\" \") : null,\n\t                        defaults: el.dataset.defaults ? el.dataset.defaults.trim().split(\" \") : null\n\t                    };\n\t                } else {\n\t                    obj = self.effects[obj];\n\t                    if (!obj) return;\n\t                    if (prop) {\n\t                        obj = obj.exports ? obj.exports[prop] : null;\n\t                        if (!obj) return;\n\t                        obj.attrName = tok[1] + \"_\" + prop + \"_\";\n\t                    }\n\t                }\n\t                if (tok[3]) {\n\t                    args = tok[3].trim().split(\" \");\n\t                }\n\t            }\n\t            var prefix = (obj.attrName ? obj.attrName : \"undefined_\" + (count++)) + \"_\";\n\t            prefix = prefix.replace(\"__\",\"_\");\n\t            if (obj.defaults) {\n\t                obj.defaults.forEach(function (d, i) {\n\t                    var v = args[i];\n\t                    chunks.push([\"#define $\", i, \" \", v  && v !== \"$\" ? v : d ].join(\"\").replace(/\\$/g, prefix).replace(\"__\",\"_\"));\n\t                });\n\t            }\n\t            if (obj.diffuse) { needsDiffuse = true; }\n\t            if (obj.depth) { needsDepth = true; }\n\t            if (obj.fragment) { chunks.push(obj.fragment.replace(/\\$/g, prefix)); }\n\t            if (obj.uniforms) {\n\t                for (var u in obj.uniforms) {\n\t                    uniforms[prefix + u] = obj.uniforms[u];\n\t                }\n\t            };\n\t            if (obj.includes) {\n\t                obj.includes.forEach(function (inc) {\n\t                    includes[inc] = true;\n\t                });\n\t            }\n\t            if (callMain) {\n\t                main.push([\"  \", prefix, \"main(\", ( swapMain ? \"origColor, color\": \"color, origColor\"), \", vUv, depth);\"].join(\"\"));\n\t            }\n\t        });\n\t        var t2u = { \"i\": \"int\", \"f\": \"float\", \"t\": \"sampler2D\",\n\t            \"v2\": \"vec2\", \"v3\": \"vec3\", \"c\": \"vec3\",\"v4\": \"vec4\", \n\t            \"m2\": \"mat2\", \"m3\":\"mat3\", \"m4\": \"mat4\", \"b\": \"bool\" };\n\n\t        for(k in includes) { head.push(\"#include <\" + k + \">\"); }\n\t        \n\t        var premain = [\n\t            \"void main () {\" \n\t        ];\n\t        uniforms[\"tDiffuse\"] = this.tDiffuse;\n\t             \n\t        if (needsDiffuse){\n\t             premain.push(\"  vec4 color = texture2D(tDiffuse, vUv);\"); \n\t        } else {\n\t             premain.push(\"  vec4 color = vec4(0.0);\"); \n\t        }\n\t        premain.push(\"  vec4 origColor = color;\"); \n\t        \n\t        uniforms[\"tDepth\"] = this.tDepth;\n\t        uniforms[\"cameraFar\"] = this.cameraFar;\n\t        uniforms[\"cameraNear\"] = this.cameraNear;\n\t            \n\t        if (needsDepth){\n\t            premain.push(\"  float depth = texture2D(tDepth, vUv).x;\");\n\t        } else {\n\t            premain.push(\"  float depth = 0.0;\");\n\t        }\n\t        \n\t        for(k in uniforms) {\n\t            var u = uniforms[k];\n\t            head.push([\"uniform\", t2u[u.type], k, \";\"].join(\" \"));\n\t        }\n\t        \n\t        head.push(\"varying vec2 vUv;\");\n\t        var source = [\n\t            head.join(\"\\n\"), chunks.join(\"\\n\"), \"\\n\",\n\t                premain.join(\"\\n\"), main.join(\"\\n\"), \n\t                alpha ? \"  gl_FragColor = color;\" : \"  gl_FragColor = vec4(color.rgb, 1.0);\", \"}\"\n\t        ].join(\"\\n\");\n\n\t        var material = this.materialize({\n\t            fragmentShader: source, \n\t            uniforms: uniforms\n\t        });\n\n\t        if(this.sceneEl.components.debug) console.log(source, material);\n\t        return material;\n\t    },\n\n\t    rebuild: function () {\n\t        var self = this, passes = [], temp = [];\n\t        this.passes.forEach(function(pass){\n\t            if (pass.dispose) pass.dispose();\n\t        });\n\t        this.data.forEach(function (k) {\n\t            if(!k){\n\t                pickup();\n\t                return;\n\t            }\n\t            var obj, name;\n\t            var tok = self.parseToken.exec(k);\n\t            if(!tok || !tok[1]) return;\n\t            name = tok[1];\n\t            obj = self.effects[name];\n\t            if (!obj){\n\t                temp.push(k);\n\t                return;\n\t            }\n\t            if (obj.pass) {\n\t                pickup();\n\t                passes.push({ pass: obj.pass, behavior: obj } );\n\t            } else if (obj.material){\n\t                pickup();\n\t                passes.push({ pass: makepass(obj.material, false, obj.vr), behavior: obj });\n\t            } else {\n\t                temp.push(k);\n\t            }          \n\t        });\n\n\t        function pickup () {\n\t            if (!temp.length) return;\n\t            passes.push({ pass: makepass(self.fuse(temp), true)});\n\t            temp = [];\n\t        }\n\n\t        function makepass (material, dispose, viewCb) {\n\t            return {\n\t                render: function(renderer, writeBuffer, readBuffer){\n\t                    self.renderPass(material, writeBuffer, viewCb);\n\t                },\n\n\t                dispose: function () {\n\t                    if (dispose) material.dispose();\n\t                }\n\t            }\n\t        }\n\t        pickup();\n\t        this.needsUpdate = false;\n\t        this.passes = passes;\n\t    },\n\n\t    isActive: function (behavior, resize) {\n\t        var scene = this.sceneEl;\n\t        if (behavior.bypass) return false;\n\t        var isEnabled = scene.renderTarget ? true : false;\n\t        if (!isEnabled) return false;\n\t        if (resize && (this.needsResize || behavior.needsResize) && behavior.setSize) {\n\t            var size = scene.renderer.getSize();\n\t            behavior.setSize(size.width, size.height);\n\t            delete behavior.needsResize;\n\t        }\n\t        return true;\n\t    },\n\n\t    register: function (behavior) {\n\t        this.effects[behavior.attrName] = behavior;\n\t        this.needsUpdate = true;\n\t    },\n\n\t    unregister: function (behavior) {\n\t        delete this.effects[behavior.attrName];\n\t        this.needsUpdate = true;\n\t    },\n\n\t    tick: function (time, timeDelta) {\n\t        var self = this, sceneEl = this.sceneEl, renderer = sceneEl.renderer, effect = sceneEl.effect, \n\t            rt = this.renderTarget, rts = this.targets, scene = sceneEl.object3D;\n\t        if(!rt || !renderer) { return; }\n\t        if (this.needsOverride) {\n\t            if(scene.onBeforeRender) {\n\t                scene.onBeforeRender = function (renderer, scene, camera) {\n\t                    var size = renderer.getSize();\n\t                    if (size.width !== rt.width || size.height !== rt.height) {\n\t                        rt.setSize(size.width, size.height);\n\t                        rts[0].setSize(size.width, size.height);\n\t                        rts[1].setSize(size.width, size.height);\n\t                        self.resolution.value.set(size.width, size.height, 1/size.width, 1/size.height);\n\t                        self.needsResize = true;\n\t                        self.resizeTiles();\n\t                    }\n\t                    if(camera instanceof THREE.ArrayCamera) {\n\t                        self.cameras = camera.cameras;\n\t                    } else {\n\t                        self.cameras.push(camera);\n\t                    }\n\t                    self.tileLights(renderer, scene, camera);\n\t                }\n\t            } else {\n\t                var rendererRender = renderer.render;\n\t                renderer.render = function (scene, camera, renderTarget, forceClear) {\n\t                    if (renderTarget === rt) {\n\t                        var size = renderer.getSize();\n\t                        if (size.width !== rt.width || size.height !== rt.height) {\n\t                            rt.setSize(size.width, size.height);\n\t                            rts[0].setSize(size.width, size.height);\n\t                            rts[1].setSize(size.width, size.height);\n\t                            self.resolution.value.set(size.width, size.height, 1/size.width, 1/size.height);\n\t                            self.needsResize = true;\n\t                        }\n\t                        self.cameras.push(camera);\n\t                    }\n\t                    rendererRender.call(renderer, scene, camera, renderTarget, forceClear);\n\t                }\n\t            }        \n\t            this.needsOverride = false;\n\t        }\n\t        this.cameras = [];\n\t        this.time.value = time / 1000;\n\t        this.timeDelta.value = timeDelta / 1000;\n\n\t        if (this.needsUpdate === true) { this.rebuild(); }\n\n\t       this.setupPasses();\n\n\t        this.tDiffuse.value = this.renderTarget.texture;\n\t        this.tDepth.value = this.renderTarget.depthTexture;\n\t        var camera = this.sceneEl.camera;\n\t        this.cameraFar.value = camera.far;\n\t        this.cameraNear.value = camera.near;                \n\t    },\n\n\t    setupPasses : function () {\n\t        var arr = [], rt = this.renderTarget;\n\t        this.passes.forEach(function (p) {\n\t            if (p.behavior && p.behavior.bypass === true) return;\n\t            arr.push(p);\n\t        });\n\t        this.sceneEl.renderTarget = arr.length && this.sceneEl.isPlaying ? rt : null;\n\t        this._passes = arr;\n\t    },\n\t    tock: function () {\n\t        var scene = this.sceneEl, renderer = scene.renderer, self = this;\n\t        if(!scene.renderTarget) { return; }\n\t        var rt = scene.renderTarget, rts = this.targets;\n\t        this._passes.forEach(function (pass, i) {\n\t            var r = i ? rts[i & 1] : rt;\n\t            self.tDiffuse.value = r.texture;   \n\t            if (pass.behavior && pass.behavior.resize) self.isActive(pass.behavior, true);\n\t            pass.pass.render(renderer, i < self._passes.length - 1 ? rts[(i+1) & 1] : null, r);\n\t        });\n\t        this.needsResize = false;\n\t    },\n\n\t    resizeTiles: function () {\n\t        var LightState = this.LightState;\n\t        var width = LightState.width;\n\t        var height = LightState.height;\n\t        LightState.cols = Math.ceil( width / 32 );\n\t        LightState.rows = Math.ceil( LightState.height / 32 );\n\t        LightState.tileData.value = [ width, height, 0.5 / Math.ceil( width / 32 ), 0.5 / Math.ceil( height / 32 ) ];\n\t        LightState.tileTexture.value = new THREE.DataTexture( new Uint8Array( LightState.cols * LightState.rows * 4 ), LightState.cols, LightState.rows );\n\t    },\n\t    \n\t    tileLights: function ( renderer, scene, camera ) {\n\t        if ( ! camera.projectionMatrix ) return;\n\t        var LightState = this.LightState, lights = this.lightComponents;\n\t        var size = renderer.getSize();\n\t        var d = LightState.tileTexture.value.image.data;\n\t        var ld = LightState.lightTexture.value.image.data;\n\t        var viewMatrix = camera.matrixWorldInverse;\n\t        d.fill( 0 );\n\t        var vector = new THREE.Vector3();\n\n\t        var passes;\n\t        if(camera instanceof THREE.ArrayCamera) {\n\t            passes = [ [0.5, 0, camera.cameras[0]], [0.5, 0.5, camera.cameras[1]]];\n\t        } else {\n\t            passes = [1.0, 0, camera];\n\t        }\n\t        passes.forEach(function(pass){\n\t            lights.forEach( function ( light, index ) {\n\t                vector.setFromMatrixPosition( light.el.object3D.matrixWorld );\n\t                var pw = LightState.width * pass[0];\n\t                var pm = LightState.width * pass[1];\n\t                var bs = self.lightBounds( pass[2], vector, light.data.radius, pw );\n\t                vector.applyMatrix4( viewMatrix );\n\t                vector.toArray( ld, 4 * index );\n\t                ld[ 4 * index + 3 ] = light.data.radius;\n\t                light.data.color.toArray( ld, 32 * 4 + 4 * index );\n\t                ld[ 32 * 4 + 4 * index + 3 ] = light.data.decay;\n\t                if ( bs[ 1 ] < 0 || bs[ 0 ] > pw || bs[ 3 ] < 0 || bs[ 2 ] > LightState.height ) return;\n\t                if ( bs[ 0 ] < 0 ) bs[ 0 ] = 0;\n\t                if ( bs[ 1 ] > pw ) bs[ 1 ] = pw;\n\t                if ( bs[ 2 ] < 0 ) bs[ 2 ] = 0;\n\t                if ( bs[ 3 ] > LightState.height ) bs[ 3 ] = LightState.height;\n\t                var i4 = Math.floor( index / 8 ), i8 = 7 - ( index % 8 );\n\t                for ( var i = Math.floor( bs[ 2 ] / 32 ); i <= Math.ceil( bs[ 3 ] / 32 ); i ++ ) {\n\t                    for ( var j = Math.floor( (bs[ 0 ] + pm) / 32  ); j <= Math.ceil( (bs[ 1 ] + pm) / 32 ); j ++ ) {\n\t                        d[ ( LightState.cols * i + j ) * 4 + i4 ] |= 1 << i8;\n\t                    }\n\t                }\n\t            } );\n\t        });\n\t        LightState.tileTexture.value.needsUpdate = true;\n\t        LightState.lightTexture.value.needsUpdate = true;\n\t    },\n\t    \n\t    lightBounds: function () {  \n\t        let v = new THREE.Vector3();\n\t        return function ( camera, pos, r, w ) {\n\t            var LightState = this.LightState;\n\t            var minX = w, maxX = 0, minY = LightState.height, maxY = 0, hw = w / 2, hh = LightState.height / 2;\n\t            for ( var i = 0; i < 8; i ++ ) {\n\t                v.copy( pos );\n\t                v.x += i & 1 ? r : - r;\n\t                v.y += i & 2 ? r : - r;\n\t                v.z += i & 4 ? r : - r;\n\t                var vector = v.project( camera );\n\t                var x = ( vector.x * hw ) + hw;\n\t                var y = ( vector.y * hh ) + hh;\n\t                minX = Math.min( minX, x );\n\t                maxX = Math.max( maxX, x );\n\t                minY = Math.min( minY, y );\n\t                maxY = Math.max( maxY, y );\n\t            }\n\t            return [ minX, maxX, minY, maxY ];\n\t    };\n\t    }()\n\t});\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(4);\n\t__webpack_require__(5);\n\t__webpack_require__(6);\n\t__webpack_require__(8);\n\t__webpack_require__(10);\n\t__webpack_require__(11);\n\t__webpack_require__(12);\n\t__webpack_require__(13);\n\t__webpack_require__(16);\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\n\t// Sobel and freichen shaders from three.js examples\n\n\tAFRAME.registerComponent(\"outline\", {\n\t\tmultiple: true,\n\n\t    schema: {\n\t\t\tenabled: { default: true },\n\t        color: { type: \"color\", default: \"#000000\" },\n\t\t\twidth: { type: \"vec2\", default: new THREE.Vector2(1,1) },\n\t\t\trange: { type: \"vec2\", default: new THREE.Vector2(0,1500) },\n\t\t\tstrength: {type: \"number\", default: 1},\n\t\t\tratio: { type: \"number\", default: 0.5 },\n\t\t\tsmooth: { default: false }  \n\t\t},\n\n\t    init: function () {\n\t        this.system = this.el.sceneEl.systems.effects;\n\t\t\tvar pars = { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat };\n\t        this.renderTarget = new THREE.WebGLRenderTarget( 1, 1, pars );\n\t\t\tthis.blurTarget = new THREE.WebGLRenderTarget( 1, 1, pars );\n\t\t\tthis.needsResize = true;\n\t\t\tthis.resolution = { type: \"v4\", value: new THREE.Vector4()};\n\t\t\tthis.tockUniforms = {\n\t\t\t\tresolution: this.resolution,\n\t            color: { type: \"c\", value: new THREE.Color() },\n\t\t\t\twidth: { type: \"v2\", value: null },\n\t\t\t\trange: { type: \"v2\", value: null },\n\t\t\t\tstrength: { type: \"f\", value: 1 }\n\t        };\n\t\t\t\n\t\t\tthis.blurDirection = { type: \"v2\", value: new THREE.Vector2()};\n\t\t\t\n\t\t\tthis.exports = {\n\t\t\t\tsobel: {\n\t\t\t\t\tfragment: this.sobel,\n\t\t\t\t\tuniforms: this.tockUniforms,\n\t\t\t\t\tincludes: [\"packing\"],\n\t\t\t\t\tdepth: true\n\t\t\t\t},\n\n\t\t\t\tblur: {\n\t\t\t\t\tfragment: this.blur,\n\t\t\t\t\tuniforms: { resolution: this.tockUniforms.resolution, direction: this.blurDirection },\n\t\t\t\t\tdiffuse: true\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.currentMaterial = this.system.fuse([this.exports.sobel], true);\n\n\t\t\t\n\t\t\tthis.blurMaterial = this.system.fuse([this.exports.blur], true);\n\n\t\t\tthis.uniforms = {\n\t\t\t\ttexture: { type: \"t\", value: this.renderTarget.texture }\n\t\t\t}\n\t\t\t\n\t\t\tthis.system.register(this);\n\t    },\n\n\t    update: function (oldData) {\n\t\t\tthis.bypass = !this.data.enabled;\n\t        this.tockUniforms.color.value.set(this.data.color);\n\t\t\tthis.tockUniforms.width.value = this.data.width;\n\t\t\tthis.tockUniforms.range.value = this.data.range;\n\t\t\tthis.tockUniforms.strength.value = 1 / this.data.strength;\n\t    },\n\n\t\tsetSize: function(w, h) {\n\t\t\tw = Math.round(w * this.data.ratio);\n\t\t\th = Math.round(h * this.data.ratio);\n\t\t\tthis.renderTarget.setSize(w,h);\n\t\t\tthis.blurTarget.setSize(w,h);\n\t\t\tthis.resolution.value.set(w, h, 1/w, 1/h);\n\t\t},\n\n\t\ttock: function () {\n\t\t\tif (!this.system.isActive(this, true)) return;\n\t\t\tthis.system.renderPass(this.currentMaterial, this.renderTarget);\n\t\t\tthis.system.tDiffuse.value = this.renderTarget;\n\t\t\tif (!this.data.smooth) return;\n\t\t\tthis.blurDirection.value.set(1,0);\n\t\t\tthis.system.renderPass(this.blurMaterial, this.blurTarget);\n\t\t\tthis.system.tDiffuse.value = this.blurTarget;\n\t\t\tthis.blurDirection.value.set(0,1);\n\t\t\tthis.system.renderPass(this.blurMaterial, this.renderTarget);\n\t\t},\n\n\t    remove: function () {\n\t        this.system.unregister(this);\n\t    },\n\n\t    diffuse: true,\n\n\t    sobel: [\n\t\t\t\"mat3 $G[2];\",\n\n\t\t\t\"const mat3 $g0 = mat3( 1.0, 2.0, 1.0, 0.0, 0.0, 0.0, -1.0, -2.0, -1.0 );\",\n\t\t\t\"const mat3 $g1 = mat3( 1.0, 0.0, -1.0, 2.0, 0.0, -2.0, 1.0, 0.0, -1.0 );\",\n\n\n\t\t\t\"void $main(inout vec4 color, vec4 origColor, vec2 uv, float depth) {\",\n\t\t\t\n\t\t\t\t\"vec3 I[3];\",\n\t\t\t\t\"float cnv[2];\",\n\t\t\t\t\"float d;\",\n\n\t\t\t\t\"$G[0] = $g0;\",\n\t\t\t\t\"$G[1] = $g1;\",\n\n\t\t\t\t\"for (float i=0.0; i<3.0; i++)\",\n\t\t\t\t\"for (float j=0.0; j<3.0; j++) {\",\n\t\t\t\"           d = texture2D(tDepth, uv + resolution.zw * vec2(i-1.0,j-1.0) ).x;\",\n\t        \"           d = perspectiveDepthToViewZ(d, cameraNear, cameraFar); \",\n\t\t\t\"\t\t\tI[int(i)][int(j)] = viewZToOrthographicDepth(d, cameraNear, cameraFar);\",\n\t\t\t\t\"}\",\n\n\t\t\t\t\"for (int i=0; i<2; i++) {\",\n\t\t\t\t\t\"float dp3 = dot($G[i][0], I[0]) + dot($G[i][1], I[1]) + dot($G[i][2], I[2]);\",\n\t\t\t\t\t\"cnv[i] = dp3 * dp3; \",\n\t\t\t\t\"}\",\n\t\t\t\t\"color = vec4($color, sqrt(cnv[0]*cnv[0]+cnv[1]*cnv[1]));\",\n\t\t\t\"} \"\n\t\t].join(\"\\n\"),\n\n\t\tblur: [\n\t\t\t\"void $main(inout vec4 color, vec4 origColor, vec2 uv, float depth){\",\n\t\t\t\"color.a *= 0.44198;\",\n\t\t\t\"color.a += texture2D(tDiffuse, uv + ($direction * $resolution.zw )).a * 0.27901;\",\n\t\t\t\"color.a += texture2D(tDiffuse, uv - ($direction * $resolution.zw )).a * 0.27901;\",\n\t\t\t\"}\"\n\t\t].join(\"\\n\"),\n\n\t\tfragment: [\n\t        \"void $main(inout vec4 color, vec4 origColor, vec2 uv, float depth){\",\n\t        \"\tvec4 texel = texture2D($texture, uv);\",\n\t\t\t\"   color.rgb = mix(color.rgb, texel.rgb, smoothstep(0.1,0.3,texel.a));\",\n\t        \"}\"\n\t    ].join(\"\\n\")\n\t});\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\n\t// Ported from the standard shader in Three.js examples\n\n\tAFRAME.registerComponent(\"film\", {\n\t    multiple: true,\n\n\t    schema: {\n\t        \"speed\":       { default: 1.0 },\n\t        \"nIntensity\": { default: 0.5 },\n\t        \"sIntensity\": { default: 0.05 },\n\t        \"sCount\":     { default: 4096 }\n\t\t},\n\n\t    init: function () {\n\t        this.uniforms = {\n\t            \"speed\":       { type: \"f\", value: 0.0 },\n\t            \"nIntensity\": { type: \"f\", value: 0.5 },\n\t            \"sIntensity\": { type: \"f\", value: 0.05 },\n\t            \"sCount\":     { type: \"f\", value: 4096 }\n\t\t    };\n\t        this.system = this.el.sceneEl.systems.effects;\n\t        this.system.register(this);\n\t    },\n\n\t    update: function () {\n\t        var d = this.data, us =  this.uniforms;\n\t        for(var u in us) {\n\t            if(d[u]) us[u].value = d[u]; \n\t        }\n\t    },\n\n\t    remove: function () {\n\t        this.system.unregister(this);\n\t    },\n\n\t    includes: [\"common\"],\n\n\t    diffuse: true,\n\n\t    fragment: [\n\t\t\t\"void $main(inout vec4 color, vec4 origColor, vec2 uv, float depth) {\",\n\t\t\t\"   vec4 cTextureScreen = color;\",\n\t\t\t\"   float dx = rand( uv + mod(time, 3.14) * $speed );\",\n\t\t\t\"   vec3 cResult = cTextureScreen.rgb + cTextureScreen.rgb * clamp( 0.1 + dx, 0.0, 1.0 );\",\n\t\t\t\"   vec2 sc = vec2( sin( uv.y * $sCount ), cos( uv.y * $sCount ) );\",\n\t\t\t\"   cResult += cTextureScreen.rgb * vec3( sc.x, sc.y, sc.x ) * $sIntensity;\",\n\t        \"   cResult = cTextureScreen.rgb + clamp( $nIntensity, 0.0,1.0 ) * ( cResult - cTextureScreen.rgb );\",\n\t\t\t\"   color.rgb =  cResult; //cResult;\",\n\t\t\t\"}\"\n\t\t].join( \"\\n\" )\n\t});\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t// Uses matdesl's three-fxaa-shader\n\n\tvar FXAAShader = __webpack_require__(7);\n\n\tAFRAME.registerComponent(\"fxaa\", {\n\t    schema: { default: true },\n\n\t    init: function () {\n\t        this.system = this.el.sceneEl.systems.effects;\n\t        this.material = new THREE.ShaderMaterial({\n\t            fragmentShader: FXAAShader.fragmentShader,\n\t            vertexShader: FXAAShader.vertexShader,\n\t            uniforms: {\n\t                tDiffuse: this.system.tDiffuse,\n\t                resolution: { type: 'v2', value: new THREE.Vector2() }\n\t            }\n\t        });\n\t        this.system.register(this);\n\t        this.needsResize = true;\n\t    },\n\n\t    update: function () {\n\t        this.bypass = !this.data;\n\t    },\n\n\t    setSize: function (w, h) {\n\t        this.material.uniforms.resolution.value.set(w, h);\n\t    },\n\n\t    resize: true,\n\n\t    remove: function () {\n\t        this.material.dispose();\n\t        this.system.unregister(this);\n\t    }\n\t});\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n\t\n\t// Adapted from https://github.com/mattdesl/three-shader-fxaa\n\tmodule.exports =  {\n\t  uniforms: {\n\t    tDiffuse: { type: 't', value: null },\n\t    resolution: { type: 'v2', value: new THREE.Vector2() }\n\t  },\n\t  vertexShader: \"#define GLSLIFY 1\\nvarying vec2 vUv;\\n\\nvarying vec2 v_rgbNW;\\nvarying vec2 v_rgbNE;\\nvarying vec2 v_rgbSW;\\nvarying vec2 v_rgbSE;\\nvarying vec2 v_rgbM;\\n\\nuniform vec2 resolution;\\n\\nvoid main() {\\n  vUv = uv;\\n  vec2 fragCoord = uv * resolution;\\n  vec2 inverseVP = 1.0 / resolution.xy;\\n  v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\\n  v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\\n  v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\\n  v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\\n  v_rgbM = vec2(fragCoord * inverseVP);\\n\\n  gl_Position = projectionMatrix *\\n              modelViewMatrix *\\n              vec4(position,1.0);\\n}\\n\",\n\t  fragmentShader: \"#define GLSLIFY 1\\nvarying vec2 vUv;\\n\\n//texcoords computed in vertex step\\n//to avoid dependent texture reads\\nvarying vec2 v_rgbNW;\\nvarying vec2 v_rgbNE;\\nvarying vec2 v_rgbSW;\\nvarying vec2 v_rgbSE;\\nvarying vec2 v_rgbM;\\n\\n//make sure to have a resolution uniform set to the screen size\\nuniform vec2 resolution;\\nuniform sampler2D tDiffuse;\\n\\n/**\\nBasic FXAA implementation based on the code on geeks3d.com with the\\nmodification that the texture2DLod stuff was removed since it's\\nunsupported by WebGL.\\n\\n--\\n\\nFrom:\\nhttps://github.com/mitsuhiko/webgl-meincraft\\n\\nCopyright (c) 2011 by Armin Ronacher.\\n\\nSome rights reserved.\\n\\nRedistribution and use in source and binary forms, with or without\\nmodification, are permitted provided that the following conditions are\\nmet:\\n\\n    * Redistributions of source code must retain the above copyright\\n      notice, this list of conditions and the following disclaimer.\\n\\n    * Redistributions in binary form must reproduce the above\\n      copyright notice, this list of conditions and the following\\n      disclaimer in the documentation and/or other materials provided\\n      with the distribution.\\n\\n    * The names of the contributors may not be used to endorse or\\n      promote products derived from this software without specific\\n      prior written permission.\\n\\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\\n\\\"AS IS\\\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\\nLIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\\nA PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\\nOWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\\nSPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\\nLIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\\nDATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\\nTHEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\\n*/\\n\\n#ifndef FXAA_REDUCE_MIN\\n    #define FXAA_REDUCE_MIN   (1.0/ 128.0)\\n#endif\\n#ifndef FXAA_REDUCE_MUL\\n    #define FXAA_REDUCE_MUL   (1.0 / 8.0)\\n#endif\\n#ifndef FXAA_SPAN_MAX\\n    #define FXAA_SPAN_MAX     8.0\\n#endif\\n\\n//optimized version for mobile, where dependent \\n//texture reads can be a bottleneck\\nvec4 fxaa_1540259130(sampler2D tex, vec2 fragCoord, vec2 resolution,\\n            vec2 v_rgbNW, vec2 v_rgbNE, \\n            vec2 v_rgbSW, vec2 v_rgbSE, \\n            vec2 v_rgbM) {\\n    vec4 color;\\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\\n    vec4 texColor = texture2D(tex, v_rgbM);\\n    vec3 rgbM  = texColor.xyz;\\n    vec3 luma = vec3(0.299, 0.587, 0.114);\\n    float lumaNW = dot(rgbNW, luma);\\n    float lumaNE = dot(rgbNE, luma);\\n    float lumaSW = dot(rgbSW, luma);\\n    float lumaSE = dot(rgbSE, luma);\\n    float lumaM  = dot(rgbM,  luma);\\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\\n    \\n    mediump vec2 dir;\\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\\n    \\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\\n    \\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\\n              dir * rcpDirMin)) * inverseVP;\\n    \\n    vec3 rgbA = 0.5 * (\\n        texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\\n        texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\\n        texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\\n        texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\\n\\n    float lumaB = dot(rgbB, luma);\\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\\n        color = vec4(rgbA, texColor.a);\\n    else\\n        color = vec4(rgbB, texColor.a);\\n    return color;\\n}\\n\\nvoid main() {\\n  vec2 fragCoord = vUv * resolution;   \\n  gl_FragColor = fxaa_1540259130(tDiffuse, fragCoord, resolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\\n}\\n\"\n\t}\n\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t// Adapted from spidersharma UnrealBloomPass\n\tvar LuminosityHighPassShader = __webpack_require__(9);\n\n\tvar BlurDirectionX = new THREE.Vector2( 1.0, 0.0 );\n\tvar BlurDirectionY = new THREE.Vector2( 0.0, 1.0 );\n\n\tAFRAME.registerComponent(\"bloom\", {\n\t\tmultiple: true,\n\n\t    schema: {\n\t\t\tenable: { default: true},\n\t        strength: { default: 1 },\n\t        radius: { default: 0.4 },\n\t        threshold: { default: 0.8 },\n\t\t\tfilter: { type: \"array\", default: [] }\n\t    },\n\n\t    init: function () {\n\t        this.system = this.el.sceneEl.systems.effects;\n\t        var pars = { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat };\n\t        this.renderTargetsHorizontal = [];\n\t        this.renderTargetsVertical = [];\n\t        this.nMips = 5;\n\t        \n\t        this.renderTargetBright = new THREE.WebGLRenderTarget( 1, 1, pars );\n\t        this.renderTargetBright.texture.name = \"UnrealBloomPass.bright\";\n\t        this.renderTargetBright.texture.generateMipmaps = false;\n\n\t        for( var i=0; i<this.nMips; i++) {\n\n\t            var renderTarget = new THREE.WebGLRenderTarget( 1, 1, pars );\n\n\t            renderTarget.texture.name = \"UnrealBloomPass.h\" + i;\n\t            renderTarget.texture.generateMipmaps = false;\n\n\t            this.renderTargetsHorizontal.push(renderTarget);\n\n\t            var renderTarget = new THREE.WebGLRenderTarget( 1, 1, pars );\n\n\t            renderTarget.texture.name = \"UnrealBloomPass.v\" + i;\n\t            renderTarget.texture.generateMipmaps = false;\n\n\t            this.renderTargetsVertical.push(renderTarget);\n\n\t        }\n\n\t        // luminosity high pass material, accessable as bloom.filter\n\n\t\t\tthis.exports = {\n\t\t\t\t\"filter\": {\n\t\t\t\t\tuniforms: {\n\t\t\t\t\t\t\"luminosityThreshold\": { type: \"f\", value: 1.0 },\n\t\t\t\t\t\t\"smoothWidth\": { type: \"f\", value: 0.01 },\n\t\t\t\t\t\t\"defaultColor\": { type: \"c\", value: new THREE.Color( 0x000000 ) },\n\t\t\t\t\t\t\"defaultOpacity\":  { type: \"f\", value: 1.0 }\n\t\t\t\t\t},\n\t\t\t\t\tdiffuse: true,\n\t\t\t\t\tfragment: [\n\t\t\t\t\t\t\"void $main(inout vec4 color, vec4 origColor, vec2 uv, float depth) {\",\n\t\t\t\t\t\t\t\"vec4 texel = color;\",\n\t\t\t\t\t\t\t\"float v = dot( texel.xyz, vec3( 0.299, 0.587, 0.114 ) );\",\n\t\t\t\t\t\t\t\"vec4 outputColor = vec4( $defaultColor.rgb, $defaultOpacity );\",\n\t\t\t\t\t\t\t\"float alpha = smoothstep( $luminosityThreshold, $luminosityThreshold + $smoothWidth, v );\",\n\t\t\t\t\t\t\t\"color = mix( outputColor, texel, alpha );\",\n\t\t\t\t\t\t\"}\"\n\t\t\t\t\t].join(\"\\n\")\n\t\t\t\t}\n\t\t\t}\n\n\t        this.materialHighPassFilter = null;\n\t        // Gaussian Blur Materials\n\t        this.separableBlurMaterials = [];\n\t        var kernelSizeArray = [3, 5, 7, 9, 11];\n\t        \n\t        for( var i=0; i<this.nMips; i++) {\n\n\t            this.separableBlurMaterials.push(this.getSeperableBlurMaterial(kernelSizeArray[i]));\n\n\t            this.separableBlurMaterials[i].uniforms[ \"texSize\" ].value = new THREE.Vector2(1, 1);\n\n\t        }\n\n\t        // Composite material\n\t        this.compositeMaterial = this.getCompositeMaterial(this.nMips);\n\t        this.compositeMaterial.uniforms[\"blurTexture1\"].value = this.renderTargetsVertical[0].texture;\n\t        this.compositeMaterial.uniforms[\"blurTexture2\"].value = this.renderTargetsVertical[1].texture;\n\t        this.compositeMaterial.uniforms[\"blurTexture3\"].value = this.renderTargetsVertical[2].texture;\n\t        this.compositeMaterial.uniforms[\"blurTexture4\"].value = this.renderTargetsVertical[3].texture;\n\t        this.compositeMaterial.uniforms[\"blurTexture5\"].value = this.renderTargetsVertical[4].texture;\n\t        this.compositeMaterial.needsUpdate = true;\n\n\t        var bloomFactors = [1.0, 0.8, 0.6, 0.4, 0.2];\n\t        this.compositeMaterial.uniforms[\"bloomFactors\"].value = bloomFactors;\n\t        this.bloomTintColors = [new THREE.Vector3(1,1,1), new THREE.Vector3(1,1,1), new THREE.Vector3(1,1,1)\n\t                                                    ,new THREE.Vector3(1,1,1), new THREE.Vector3(1,1,1)];\n\t        this.compositeMaterial.uniforms[\"bloomTintColors\"].value = this.bloomTintColors;\n\t\t\tthis.oldClearColor = new THREE.Color();\n\t        this.uniforms = {\n\t            \"texture\": { type: \"t\", value: this.renderTargetsHorizontal[0] }\n\t        }\n\t        this.needsResize = true;\n\t        this.system.register(this);\n\t    },\n\n\t\tupdate: function (oldData) {\n\t\t\tif (oldData.filter !== this.data.filter) {\n\t\t\t\tif (this.materialHighPassFilter) this.materialHighPassFilter.dispose();\n\t\t\t\tvar chain = this.data.filter.length ? this.data.filter : [this.exports.filter];\n\t\t\t\tthis.materialHighPassFilter = this.system.fuse(chain, false);\n\t\t\t}\n\t\t},\n\n\t    tock: function (time) {\n\t        if (!this.data.enable || !this.system.isActive(this, true)) return;\n\t\t\tvar scene = this.el.sceneEl;\n\t\t\tvar renderer = scene.renderer;\n\t        var readBuffer = scene.renderTarget;\n\t        this.oldClearColor.copy( renderer.getClearColor() );\n\t\t\tthis.oldClearAlpha = renderer.getClearAlpha();\n\t\t\tvar oldAutoClear = renderer.autoClear;\n\t\t\trenderer.autoClear = false;\n\n\t\t\trenderer.setClearColor( new THREE.Color( 0, 0, 0 ), 0 );\n\n\t\t\t// 1. Extract Bright Areas\n\t\t\tthis.system.tDiffuse.value = readBuffer.texture;\n\t\t\tthis.exports.filter.uniforms[ \"luminosityThreshold\" ].value = this.data.threshold;\n\t\t\tthis.system.renderPass(this.materialHighPassFilter, this.renderTargetBright, null, false);\n\n\t\t\t// 2. Blur All the mips progressively\n\t\t\tvar inputRenderTarget = this.renderTargetBright;\n\n\t\t\tfor(var i=0; i<this.nMips; i++) {\n\t\t\n\t\t\t\tthis.separableBlurMaterials[i].uniforms[ \"colorTexture\" ].value = inputRenderTarget.texture;\n\n\t\t\t\tthis.separableBlurMaterials[i].uniforms[ \"direction\" ].value = BlurDirectionX;\n\n\t            this.system.renderPass(this.separableBlurMaterials[i], this.renderTargetsHorizontal[i], true);\n\n\t\t\t\tthis.separableBlurMaterials[i].uniforms[ \"colorTexture\" ].value = this.renderTargetsHorizontal[i].texture;\n\n\t\t\t\tthis.separableBlurMaterials[i].uniforms[ \"direction\" ].value = BlurDirectionY;\n\n\t\t\t\tthis.system.renderPass(this.separableBlurMaterials[i], this.renderTargetsVertical[i], true);\n\n\t\t\t\tinputRenderTarget = this.renderTargetsVertical[i];\n\t\t\t}\n\n\t\t\t// Composite All the mips\n\t\t\tthis.compositeMaterial.uniforms[\"bloomStrength\"].value = this.data.strength;\n\t\t\tthis.compositeMaterial.uniforms[\"bloomRadius\"].value = this.data.radius;\n\t\t\tthis.compositeMaterial.uniforms[\"bloomTintColors\"].value = this.bloomTintColors;\n\t        this.system.renderPass(this.compositeMaterial, this.renderTargetsHorizontal[0], null);\n\n\t\t\trenderer.setClearColor( this.oldClearColor, this.oldClearAlpha );\n\t\t\trenderer.autoClear = oldAutoClear;\n\t\t},\n\n\t    setSize: function ( width, height ) {\n\n\t\t\tvar resx = Math.round(width/2);\n\t\t\tvar resy = Math.round(height/2);\n\n\t\t\tthis.renderTargetBright.setSize(resx, resy);\n\n\t\t\tfor( var i=0; i<this.nMips; i++) {\n\n\t\t\t\tthis.renderTargetsHorizontal[i].setSize(resx, resy);\n\t\t\t\tthis.renderTargetsVertical[i].setSize(resx, resy);\n\n\t\t\t\tthis.separableBlurMaterials[i].uniforms[ \"texSize\" ].value = new THREE.Vector2(resx, resy);\n\n\t\t\t\tresx = Math.round(resx/2);\n\t\t\t\tresy = Math.round(resy/2);\n\t\t\t}\n\t\t},\n\n\t    remove: function () {\n\t        this.system.unregister(this);\n\t        for( var i=0; i< this.renderTargetsHorizontal.length; i++) {\n\t\t\t\tthis.renderTargetsHorizontal[i].dispose();\n\t\t\t}\n\t\t\tfor( var i=0; i< this.renderTargetsVertical.length; i++) {\n\t\t\t\tthis.renderTargetsVertical[i].dispose();\n\t\t\t}\n\t\t\tthis.renderTargetBright.dispose();\n\t    },\n\n\t    getSeperableBlurMaterial: function(kernelRadius) {\n\n\t\t\treturn this.system.materialize( {\n\n\t\t\t\tdefines: {\n\t\t\t\t\t\"KERNEL_RADIUS\" : kernelRadius,\n\t\t\t\t\t\"SIGMA\" : kernelRadius\n\t\t\t\t},\n\n\t\t\t\tuniforms: {\n\t\t\t\t\t\"colorTexture\": { value: null },\n\t\t\t\t\t\"texSize\": \t\t\t\t{ value: new THREE.Vector2( 0.5, 0.5 ) },\n\t\t\t\t\t\"direction\": \t\t\t\t{ value: new THREE.Vector2( 0.5, 0.5 ) }\n\t\t\t\t},\n\n\t\t\t\tvertexShader:\n\t\t\t\t\t\"varying vec2 vUv;\\n\\\n\t\t\t\t\tvoid main() {\\n\\\n\t\t\t\t\t\tvUv = uv;\\n\\\n\t\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n\\\n\t\t\t\t\t}\",\n\n\t\t\t\tfragmentShader:\n\t\t\t\t\t\"#include <common>\\\n\t\t\t\t\tvarying vec2 vUv;\\n\\\n\t\t\t\t\tuniform sampler2D colorTexture;\\n\\\n\t\t\t\t\tuniform vec2 texSize;\\\n\t\t\t\t\tuniform vec2 direction;\\\n\t\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\\\n\t\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\\\n\t\t\t\t\t}\\\n\t\t\t\t\tvoid main() {\\n\\\n\t\t\t\t\t\tvec2 invSize = 1.0 / texSize;\\\n\t\t\t\t\t\tfloat fSigma = float(SIGMA);\\\n\t\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\\\n\t\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\\\n\t\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\\\n\t\t\t\t\t\t\tfloat x = float(i);\\\n\t\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\\\n\t\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\\\n\t\t\t\t\t\t\tvec3 sample1 = textureVR( colorTexture, vUv + uvOffset).rgb;\\\n\t\t\t\t\t\t\tvec3 sample2 = textureVR( colorTexture, vUv - uvOffset).rgb;\\\n\t\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\\\n\t\t\t\t\t\t\tweightSum += 2.0 * w;\\\n\t\t\t\t\t\t}\\\n\t\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\\n\\\n\t\t\t\t\t}\"\n\t\t\t} );\n\t\t},\n\n\t\tgetCompositeMaterial: function(nMips) {\n\n\t\t\treturn new THREE.ShaderMaterial( {\n\n\t\t\t\tdefines:{\n\t\t\t\t\t\"NUM_MIPS\" : nMips\n\t\t\t\t},\n\n\t\t\t\tuniforms: {\n\t\t\t\t\t\"blurTexture1\": { value: null },\n\t\t\t\t\t\"blurTexture2\": { value: null },\n\t\t\t\t\t\"blurTexture3\": { value: null },\n\t\t\t\t\t\"blurTexture4\": { value: null },\n\t\t\t\t\t\"blurTexture5\": { value: null },\n\t\t\t\t\t\"bloomStrength\" : { value: 1.0 },\n\t\t\t\t\t\"bloomFactors\" : { value: null },\n\t\t\t\t\t\"bloomTintColors\" : { value: null },\n\t\t\t\t\t\"bloomRadius\" : { value: 0.0 }\n\t\t\t\t},\n\n\t\t\t\tvertexShader:\n\t\t\t\t\t\"varying vec2 vUv;\\n\\\n\t\t\t\t\tvoid main() {\\n\\\n\t\t\t\t\t\tvUv = uv;\\n\\\n\t\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n\\\n\t\t\t\t\t}\",\n\n\t\t\t\tfragmentShader:\n\t\t\t\t\t\"varying vec2 vUv;\\\n\t\t\t\t\tuniform sampler2D blurTexture1;\\\n\t\t\t\t\tuniform sampler2D blurTexture2;\\\n\t\t\t\t\tuniform sampler2D blurTexture3;\\\n\t\t\t\t\tuniform sampler2D blurTexture4;\\\n\t\t\t\t\tuniform sampler2D blurTexture5;\\\n\t\t\t\t\tuniform float bloomStrength;\\\n\t\t\t\t\tuniform float bloomRadius;\\\n\t\t\t\t\tuniform float bloomFactors[NUM_MIPS];\\\n\t\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\\\n\t\t\t\t\t\\\n\t\t\t\t\tfloat lerpBloomFactor(const in float factor) { \\\n\t\t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\\\n\t\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\\\n\t\t\t\t\t}\\\n\t\t\t\t\t\\\n\t\t\t\t\tvoid main() {\\\n\t\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) + \\\n\t\t\t\t\t\t \t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) + \\\n\t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) + \\\n\t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) + \\\n\t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\\\n\t\t\t\t\t}\"\n\t\t\t} );\n\t\t},\n\n\t\tdiffuse: true,\n\t\tdefaults: [\"1.0\"],\n\t    fragment: [\n\t        \"void $main(inout vec4 color, vec4 origColor, vec2 uv, float depth){\",\n\t        \"   color.rgb += texture2D($texture, uv).rgb;\",\n\t        \"}\"\n\t    ].join(\"\\n\")\n\t});\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports) {\n\n\t/**\n\t * @author bhouston / http://clara.io/\n\t *\n\t * Luminosity\n\t * http://en.wikipedia.org/wiki/Luminosity\n\t */\n\n\tmodule.exports = {\n\n\t  shaderID: \"luminosityHighPass\",\n\n\t\tuniforms: {\n\n\t\t\t\"tDiffuse\": { type: \"t\", value: null },\n\t\t\t\"luminosityThreshold\": { type: \"f\", value: 1.0 },\n\t\t\t\"smoothWidth\": { type: \"f\", value: 1.0 },\n\t\t\t\"defaultColor\": { type: \"c\", value: new THREE.Color( 0x000000 ) },\n\t\t\t\"defaultOpacity\":  { type: \"f\", value: 0.0 }\n\n\t\t},\n\n\t\tvertexShader: [\n\n\t\t\t\"varying vec2 vUv;\",\n\n\t\t\t\"void main() {\",\n\n\t\t\t\t\"vUv = uv;\",\n\n\t\t\t\t\"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\"),\n\n\t\tfragmentShader: [\n\n\t\t\t\"uniform sampler2D tDiffuse;\",\n\t\t\t\"uniform vec3 defaultColor;\",\n\t\t\t\"uniform float defaultOpacity;\",\n\t\t\t\"uniform float luminosityThreshold;\",\n\t\t\t\"uniform float smoothWidth;\",\n\n\t\t\t\"varying vec2 vUv;\",\n\n\t\t\t\"void main() {\",\n\n\t\t\t\t\"vec4 texel = texture2D( tDiffuse, vUv );\",\n\n\t\t\t\t\"vec3 luma = vec3( 0.299, 0.587, 0.114 );\",\n\n\t\t\t\t\"float v = dot( texel.xyz, luma );\",\n\n\t\t\t\t\"vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );\",\n\n\t\t\t\t\"float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );\",\n\n\t\t\t\t\"gl_FragColor = mix( outputColor, texel, alpha );\",\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\")\n\n\t};\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports) {\n\n\tAFRAME.registerComponent(\"colors\", {\n\t    multiple: true,\n\n\t    schema: {\n\t        \"mode\": { default: \"map\" },\n\t        \"lut\": { type: \"selector\"},\n\t        \"lutClamp\": { default: false },\n\t        \"lutFlip\": { default: false },\n\t        \"add\": { type: \"vec3\", default: new THREE.Vector3(0,0,0) },\n\t        \"mul\": { type: \"vec3\", default: new THREE.Vector3(1,1,1) },\n\t        \"pow\": { type: \"vec3\", default: new THREE.Vector3(1,1,1) },\n\t        \"left\": { type: \"vec3\", default: new THREE.Vector3(0,0,0) },\n\t        \"right\": { type: \"vec3\", default: new THREE.Vector3(1,1,1) },\n\t        \"min\": { type: \"vec3\", default: new THREE.Vector3(0,0,0) },\n\t        \"max\": { type: \"vec3\", default: new THREE.Vector3(1,1,1) },\n\t        \"quant\": { type: \"vec3\", default: new THREE.Vector3(0.2,0.2,0.2) },\n\t        \"orig\": { type: \"vec3\", default: new THREE.Vector3(1,1,1) },\n\t        \"red\": { type: \"vec3\", default: new THREE.Vector3(1,0,0) },\n\t        \"green\": { type: \"vec3\", default: new THREE.Vector3(0,0.5,0.5) },\n\t        \"blue\": { type: \"vec3\", default: new THREE.Vector3(0,0.5,0.5) },\n\t    },\n\n\t    init: function () {\n\t        this.system = this.el.sceneEl.systems.effects;\n\t        this.uniforms = {\n\t            \"add\": { type: \"v3\", value: null },\n\t            \"mul\": { type: \"v3\", value: null },\n\t            \"pow\": { type: \"v3\", value: null },\n\t            \"left\": { type: \"v3\", value: null },\n\t            \"right\": { type: \"v3\", value: null },\n\t            \"min\": { type: \"v3\", value: null },\n\t            \"max\": { type: \"v3\", value: null },\n\t            \"quant\": { type: \"v3\", value: null },\n\t            \"orig\": { type: \"v3\", value: null },\n\t            \"red\": { type: \"v3\", value: null },\n\t            \"green\": { type: \"v3\", value: null },\n\t            \"blue\": { type: \"v3\", value: null },\n\t            \"texture\": { \n\t                type: \"t\", \n\t                value: new THREE.Texture(\n\t                    undefined, // Default Image\n\t                    undefined, // Default Mapping\n\t                    undefined, // Default wrapS\n\t                    undefined, // Default wrapT\n\t                    THREE.NearestFilter, // magFilter\n\t                    THREE.NearestFilter  // minFilter\n\t                )}\n\t        }\n\t        \n\t        this.rebuild();\n\t    \n\t        this.system.register(this);\n\t    },\n\n\t    update: function (oldData) {\n\t        var d = this.data, us =  this.uniforms, needsRebuild = false;\n\t        \n\t        for(var u in us) {\n\t            if(d[u] !== undefined) us[u].value = d[u]; \n\t        }\n\t        []\n\t        if(this.data.lutFlip !== oldData.lutFlip || this.data.lutClamp !== oldData.lutClamp || this.data.mode != oldData.mode) {\n\t            this.rebuild();\n\t        }\n\n\t        if(this.data.lut !== oldData.lut) {\n\t            const texture = this.uniforms.texture.value;\n\t            texture.image = this.data.lut;\n\t            texture.needsUpdate = true;\n\t        }\n\t    },\n\n\t    remove: function () {\n\t        this.system.unregister(this);\n\t    },\n\n\t    rebuild: function () {\n\t        var arr = [], m = this.data.mode;\n\t        for(var i=0; i < m.length; i++){\n\t            var op = this.ops[m[i]];\n\t            if(op) arr.push(op);\n\t        }\n\t        \n\t        this.fragment = [\n\t            this.data.lutClamp ? \"\" : \"#define $LUT_NO_CLAMP 1\",\n\t            this.data.lutFlip ? \"#define $LUT_FLIP_Y 1\" : \"\",\n\t            this.preFragment, \n\t            arr.join(\"\\n\"), \n\t            \"}\"\n\t        ].join(\"\\n\");\n\n\t        this.system.needsUpdate = true;\n\t    },\n\n\t    ops: {\n\t        \"m\": \"color.rgb *= $mul;\",\n\t        \"a\": \"color.rgb += $add;\",\n\t        \"p\": \"color.rgb = pow(color.rgb, $pow);\",\n\t        \"h\": \"color.rgb = $rgb2hsv(color.rgb);\",\n\t        \"r\": \"color.rgb = $hsv2rgb(color.rgb);\",\n\t        \"s\": \"color.rgb = smoothstep($left, $right, color.rgb);\",\n\t        \"l\": \"color.rgb = $lut(color).rgb;\",\n\t        \"q\": \"color.rgb = floor(color.rgb / $quant) * $quant;\",\n\t        \"c\": \"color.rgb = clamp(color.rgb, $min, $max);\",\n\t        \"g\": \"color.rgb = vec3(dot(color.rgb, vec3(0.299, 0.587, 0.114)));\",\n\t        \"o\": \"color.rgb = mix(color.rgb, orig.rgb, $orig);\",\n\t        \"t\": \"color.rgb = vec3(dot(color.rgb, $red), dot(color.rgb, $green), dot(color.rgb, $blue));\",\n\t        \"b\": \"color.rgb = color.rgb;\"\n\t    },\n\n\t    diffuse: true,\n\n\t    preFragment: [\n\t        // Lut from https://github.com/mattdesl/glsl-lut\n\t        \"vec4 $lut(vec4 textureColor) {\",\n\t        \"    #ifndef $LUT_NO_CLAMP\",\n\t        \"        textureColor = clamp(textureColor, 0.0, 1.0);\",\n\t        \"    #endif\",\n\n\t        \"    mediump float blueColor = textureColor.b * 63.0;\",\n\n\t        \"    mediump vec2 quad1;\",\n\t        \"    quad1.y = floor(floor(blueColor) / 8.0);\",\n\t        \"    quad1.x = floor(blueColor) - (quad1.y * 8.0);\",\n\n\t        \"    mediump vec2 quad2;\",\n\t        \"    quad2.y = floor(ceil(blueColor) / 8.0);\",\n\t        \"    quad2.x = ceil(blueColor) - (quad2.y * 8.0);\",\n\n\t        \"    highp vec2 texPos1;\",\n\t        \"    texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * textureColor.r);\",\n\t        \"    texPos1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * textureColor.g);\",\n\n\t        \"    #ifdef $LUT_FLIP_Y\",\n\t        \"        texPos1.y = 1.0-texPos1.y;\",\n\t        \"    #endif\",\n\n\t        \"    highp vec2 texPos2;\",\n\t        \"    texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * textureColor.r);\",\n\t        \"    texPos2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * textureColor.g);\",\n\n\t        \"    #ifdef $LUT_FLIP_Y\",\n\t        \"        texPos2.y = 1.0-texPos2.y;\",\n\t        \"    #endif\",\n\n\t        \"    lowp vec4 newColor1 = texture2D($texture, texPos1);\",\n\t        \"    lowp vec4 newColor2 = texture2D($texture, texPos2);\",\n\n\t        \"    lowp vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\",\n\t        \"    return newColor;\",\n\t        \"}\",\n\n\t        \"vec3 $rgb2hsv(vec3 c){\",\n\t        \n\t        \"    vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\",\n\t        \"    vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\",\n\t        \"    vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\",\n\n\t        \"    float d = q.x - min(q.w, q.y);\",\n\t        \"    float e = 1.0e-10;\",\n\t        \"    return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\",\n\t        \"}\",\n\n\t        \"vec3 $hsv2rgb(vec3 c)\",\n\t        \"{\",\n\t        \"    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\",\n\t        \"    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\",\n\t        \"    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\",\n\t        \"}\",\n\n\t        \"void $main(inout vec4 color, vec4 origColor, vec2 uv, float depth){\",\n\t        \"vec3 orig = color.rgb;\",\n\t    ].join(\"\\n\")\n\t});\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports) {\n\n\t// Ported from three's glitch pass/shader and added VR support\n\n\tAFRAME.registerComponent(\"glitch\", {\n\t    schema: { default: true },\n\n\t    init: function () {\n\t        this.system = this.el.sceneEl.systems.effects;\n\n\t        this.uniforms = {\n\t            \"tDisp\":\t\t{ type: \"t\", value: this.generateHeightmap( 64 ) },\n\t            \"amount\":\t\t{ type: \"f\", value: 0.08 },\n\t            \"angle\":\t\t{ type: \"f\", value: 0.02 },\n\t            \"seed\":\t\t\t{ type: \"f\", value: 0.02 },\n\t            \"seed_x\":\t\t{ type: \"f\", value: 0.02 },//-1,1\n\t            \"seed_y\":\t\t{ type: \"f\", value: 0.02 },//-1,1\n\t            \"distortion_x\":\t{ type: \"f\", value: 0.5 },\n\t            \"distortion_y\":\t{ type: \"f\", value: 0.6 },\n\t            \"col_s\":\t\t{ type: \"f\", value: 0.05 }\n\t\t    };\n\t        \n\t\t\tthis.exports = {\n\t\t\t\tglitch: {\n\t                fragment: this.fragment,\n\t                uniforms: this.uniforms\n\t            }\n\t\t\t}\n\t        // by declaring a .material property we set this component to take a whole pass of it's own\n\t        this.material = this.system.fuse([this.exports.glitch]);\n\n\t        this.system.register(this);\n\t    },\n\n\t    vr: true,\n\n\t    update: function () {\n\t        this.bypass = !this.data;\n\t        this.curF = 0;\n\t        this.generateTrigger();\n\t    },\n\n\t    remove: function () {\n\t        this.system.unregister(this);\n\t    },\n\n\t    tock: function () {\n\t        this.uniforms[ 'seed' ].value = Math.random();//default seeding\n\t\t\t\n\t\t\tif ( this.curF % this.randX == 0) {\n\n\t\t\t\tthis.uniforms[ 'amount' ].value = Math.random() / 30;\n\t\t\t\tthis.uniforms[ 'angle' ].value = THREE.Math.randFloat( - Math.PI, Math.PI );\n\t\t\t\tthis.uniforms[ 'seed_x' ].value = THREE.Math.randFloat( - 1, 1 );\n\t\t\t\tthis.uniforms[ 'seed_y' ].value = THREE.Math.randFloat( - 1, 1 );\n\t\t\t\tthis.uniforms[ 'distortion_x' ].value = THREE.Math.randFloat( 0, 1 );\n\t\t\t\tthis.uniforms[ 'distortion_y' ].value = THREE.Math.randFloat( 0, 1 );\n\t\t\t\tthis.curF = 0;\n\t\t\t\tthis.generateTrigger();\n\n\t\t\t} else if ( this.curF % this.randX < this.randX / 5 ) {\n\n\t\t\t\tthis.uniforms[ 'amount' ].value = Math.random() / 90;\n\t\t\t\tthis.uniforms[ 'angle' ].value = THREE.Math.randFloat( - Math.PI, Math.PI );\n\t\t\t\tthis.uniforms[ 'distortion_x' ].value = THREE.Math.randFloat( 0, 1 );\n\t\t\t\tthis.uniforms[ 'distortion_y' ].value = THREE.Math.randFloat( 0, 1 );\n\t\t\t\tthis.uniforms[ 'seed_x' ].value = THREE.Math.randFloat( - 0.3, 0.3 );\n\t\t\t\tthis.uniforms[ 'seed_y' ].value = THREE.Math.randFloat( - 0.3, 0.3 );\n\n\t\t\t} \n\n\t\t\tthis.curF ++;\n\t    },\n\n\t    generateTrigger: function() {\n\n\t\t\tthis.randX = THREE.Math.randInt( 120, 240 );\n\n\t\t},\n\n\t\tgenerateHeightmap: function( dt_size ) {\n\n\t\t\tvar data_arr = new Float32Array( dt_size * dt_size * 3 );\n\t\t\tvar length = dt_size * dt_size;\n\n\t\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\t\tvar val = THREE.Math.randFloat( 0, 1 );\n\t\t\t\tdata_arr[ i * 3 + 0 ] = val;\n\t\t\t\tdata_arr[ i * 3 + 1 ] = val;\n\t\t\t\tdata_arr[ i * 3 + 2 ] = val;\n\n\t\t\t}\n\n\t\t\tvar texture = new THREE.DataTexture( data_arr, dt_size, dt_size, THREE.RGBFormat, THREE.FloatType );\n\t\t\ttexture.needsUpdate = true;\n\t\t\treturn texture;\n\n\t\t},\n\n\t    fragment: [\n\t\t\t\"float $rand(vec2 co){\",\n\t\t\t\t\"return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\",\n\t\t\t\"}\",\n\t\t\t\t\t\n\t\t\t\"void $main(inout vec4 color, vec4 origColor, vec2 uv, float depth) {\",\n\t\t\t\t\t\"vec2 p = uv;\",\n\t                \"vec2 p2 = vec2( smoothstep(uvClamp.x, uvClamp.y, p.x),p.y);\",\n\t\t\t\t\t\"float xs = floor(gl_FragCoord.x / 0.5);\",\n\t\t\t\t\t\"float ys = floor(gl_FragCoord.y / 0.5);\",\n\t\t\t\t\t//based on staffantans glitch shader for unity https://github.com/staffantan/unityglitch\n\t\t\t\t\t\"vec4 normal = texture2D ($tDisp, p2 * $seed * $seed);\",\n\t\t\t\t\t\"if(p2.y < $distortion_x + $col_s && p2.y > $distortion_x - $col_s * $seed) {\",\n\t\t\t\t\t\t\"if($seed_x>0.){\",\n\t\t\t\t\t\t\t\"p.y = 1. - (p.y + $distortion_y);\",\n\t\t\t\t\t\t\"}\",\n\t\t\t\t\t\t\"else {\",\n\t\t\t\t\t\t\t\"p.y = $distortion_y;\",\n\t\t\t\t\t\t\"}\",\n\t\t\t\t\t\"}\",\n\t\t\t\t\t\"if(p2.x < $distortion_y + $col_s && p2.x > $distortion_y - $col_s * $seed) {\",\n\t\t\t\t\t\t\"if( $seed_y > 0.){\",\n\t\t\t\t\t\t\t\"p.x = $distortion_x;\",\n\t\t\t\t\t\t\"}\",\n\t\t\t\t\t\t\"else {\",\n\t\t\t\t\t\t\t\"p.x = 1. - (p.x + $distortion_x);\",\n\t\t\t\t\t\t\"}\",\n\t\t\t\t\t\"}\",\n\t\t\t\t\t\"p.x+=normal.x* $seed_x * ($seed/5.);\",\n\t\t\t\t\t\"p.y+=normal.y* $seed_y * ($seed/5.);\",\n\t\t\t\t\t//base from RGB shift shader\n\t\t\t\t\t\"vec2 offset = $amount * vec2( cos($angle), sin($angle));\",\n\t\t\t\t\t\"vec4 cr = textureVR(tDiffuse, p + offset);\",\n\t\t\t\t\t\"vec4 cga = textureVR(tDiffuse, p);\",\n\t\t\t\t\t\"vec4 cb = textureVR(tDiffuse, p - offset);\",\n\t\t\t\t\t\"color = vec4(cr.r, cga.g, cb.b, cga.a);\",\n\t\t\t\t\t//add noise\n\t\t\t\t\t\"vec4 snow = 200.*$amount*vec4($rand(vec2(xs * $seed,ys * $seed*50.))*0.2);\",\n\t\t\t\t\t\"color = color+ snow;\",\n\t\t\t\"}\"\n\t\t].join( \"\\n\" )\n\t});\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports) {\n\n\t// Ported from the shader in Three.js examples\n\t// with the addition of a separate input pass\n\n\tAFRAME.registerComponent(\"godrays\", {\n\t    schema: {\n\t        \"tint\": { type: \"color\", default: \"#FFFFFF\" },\n\t        \"threshold\": { type: \"vec4\", default: new THREE.Vector4(0,1,1) },\n\t        \"src\": { type: \"selector\", default: null },\n\t        \"intensity\": { default: 1 },\n\t        \"filter\": { type: \"array\", default: [] },\n\t        \"ratio\": { default: 0.25 }\n\t\t},\n\n\t    init: function () {\n\t        this.system = this.el.sceneEl.systems.effects;\n\t        var pars = { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat };\n\t\t\tthis.rtFilter = new THREE.WebGLRenderTarget( 1, 1, pars );\n\t        this.rtTextureGodRays1 = new THREE.WebGLRenderTarget( 1, 1, pars );\n\t\t\tthis.rtTextureGodRays2 = new THREE.WebGLRenderTarget( 1, 1, pars );\n\t        \n\t        this.exports = {\n\t            filter: {\n\t                includes: [\"packing\"],\n\t                uniforms: {\n\t                    \"tint\": { type: \"c\", value: new THREE.Color() },\n\t                    \"threshold\": { type: \"v2\", value: new THREE.Vector2(0,1) },\n\t                },\n\t                depth: true, \n\t                fragment: [\n\t                    \"void $main(inout vec4 color, vec4 origColor, vec2 uv, float depth) {\",\n\t                    \"   float v = viewZToOrthographicDepth(perspectiveDepthToViewZ(depth, cameraNear, cameraFar), cameraNear, cameraFar);\",\n\t                    \"   color.rgb = vec3(smoothstep($threshold.x, $threshold.y, v)) * $tint;\",\n\t                    \"}\"\n\t                ].join( \"\\n\" ),\n\t            },\n\t            blur: {\n\t                uniforms: {\n\t                    step: { type:\"f\", value: 1.0 },\n\t                    src: { type: \"v3\", value: new THREE.Vector3( 0.5, 0.5, 0. ) }\n\t                },\n\t                fragment: [\n\t                    \"void $main(inout vec4 color, vec4 orig, vec2 uv, float depth) {\",\n\t                        \"vec2 center = vec2(mix(uvClamp.x, uvClamp.y, $src.x), $src.y);\",\n\t                        \"vec2 delta = center - uv;\",\n\t                        \"float dist = length( delta );\",\n\t                        \"vec2 stepv = $step * delta / dist;\",\n\t                        \"float iters = dist/$step;\",\n\t                        \"vec4 col = vec4(0.0);\",\n\t                        \"if ( 0.0 <= iters && uv.y < 1.0 ) col += textureVR( tDiffuse, uv );\",\n\t                        \"uv += stepv;\",\n\t                        \"if ( 1.0 <= iters && uv.y < 1.0 ) col += textureVR( tDiffuse, uv );\",\n\t                        \"uv += stepv;\",\n\t                        \"if ( 2.0 <= iters && uv.y < 1.0 ) col += textureVR( tDiffuse, uv );\",\n\t                        \"uv += stepv;\",\n\t                        \"if ( 3.0 <= iters && uv.y < 1.0 ) col += textureVR( tDiffuse, uv );\",\n\t                        \"uv += stepv;\",\n\t                        \"if ( 4.0 <= iters && uv.y < 1.0 ) col += textureVR( tDiffuse, uv );\",\n\t                        \"uv += stepv;\",\n\t                        \"if ( 5.0 <= iters && uv.y < 1.0 ) col += textureVR( tDiffuse, uv );\",\n\t                        \"color = col/6.0;\",\n\t                    \"}\"\n\n\t                ].join( \"\\n\" )\n\t            }\n\t        }\n\t        \n\t        this.materialGodraysGenerate = this.system.fuse([this.exports.blur]);\n\t        this.uniforms = {\n\t            \"intensity\": { type: \"f\", value: 1 },\n\t            \"attenuation\": {type: \"f\", value: 1 },\n\t            \"texture\": { type: \"t\", value: this.rtTextureGodRays2 }\n\t\t    };\n\n\t        this.materialFilter = null;\n\t        \n\t        this.needsResize = true;\n\t        this.system.register(this);\n\t    },\n\n\t    setSize: function (w,h) {\n\t       w = Math.round(w * this.data.ratio);\n\t       h = Math.round(h * this.data.ratio);\n\t       this.rtTextureGodRays1.setSize(w,h);\n\t       this.rtTextureGodRays2.setSize(w,h);\n\t       this.rtFilter.setSize(w,h);\n\t    },\n\n\t    update: function (oldData) {\n\t        this.exports.filter.uniforms.tint.value.set(this.data.tint);\n\t        this.uniforms.intensity.value = this.data.intensity;\n\t        if(this.data.filter !== oldData.filter) {\n\t            if(this.materialFilter) this.materialFilter.dispose();\n\t            this.materialFilter = this.system.fuse(this.data.filter.length ? this.data.filter : [this.exports.filter]);\n\t        }\n\t        this.bypass = this.data.src === null;\n\t    },\n\n\t    tock: function () {\n\t        if (!this.system.isActive(this, true)) return;\n\t        var self = this;\n\t        \n\t        this.system.tDiffuse.value = this.system.renderTarget.texture;\n\t        this.system.renderPass(this.materialFilter, this.rtFilter, fn )\n\n\t        var fn = function (material, camera, eye) {\n\t            var cp3 = new THREE.Vector3(), cd3 = new THREE.Vector3();\n\t            var v3 = self.exports.blur.uniforms[ \"src\" ].value;\n\t            self.data.src.object3D.getWorldPosition(v3);\n\t            camera.getWorldPosition(cp3);\n\t            camera.getWorldDirection(cd3);\n\t            cp3.sub(v3);\n\t            cp3.normalize();\n\t            cd3.normalize();\n\t            self.uniforms.attenuation.value = Math.pow(Math.max(0, -cd3.dot(cp3)), 1.33);\n\t            \n\t            v3.project( camera );\n\t            v3.set((v3.x + 1 ) / 2, (v3.y + 1 ) / 2, 0);\n\t            \n\t        };\n\n\t        var filterLen = 1.0;\n\t\t\tvar TAPS_PER_PASS = 6.0;\n\t        \n\t        var pass = 1.0;\n\t        var stepLen = filterLen * Math.pow( TAPS_PER_PASS, -pass );\n\t        this.exports.blur.uniforms[ \"step\" ].value = stepLen;\n\t        this.system[ \"tDiffuse\" ].value = this.rtFilter.texture;\n\t        this.system.renderPass(this.materialGodraysGenerate, this.rtTextureGodRays2, fn )\n\t        \n\t        pass = 2.0;\n\t        stepLen = filterLen * Math.pow( TAPS_PER_PASS, -pass );\n\t        this.exports.blur.uniforms[ \"step\" ].value = stepLen;\n\t        this.system[ \"tDiffuse\" ].value = this.rtTextureGodRays2.texture;\n\t        this.system.renderPass(this.materialGodraysGenerate, this.rtTextureGodRays1, fn );\n\t        \n\t        pass = 3.0;\n\t        stepLen = filterLen * Math.pow( TAPS_PER_PASS, -pass );\n\t        this.exports.blur.uniforms[ \"step\" ].value = stepLen;\n\t        this.system[ \"tDiffuse\" ].value = this.rtTextureGodRays1.texture;\n\t        this.system.renderPass(this.materialGodraysGenerate, this.rtTextureGodRays2, fn )\n\t    },\n\n\t    remove: function () {\n\t        this.rtTextureGodRays1.dispose();\n\t        this.rtTextureGodRays2.dispose();\n\t        this.rtFilter.dispose();\n\n\t        this.materialGodraysGenerate.dispose();\n\t        this.materialFilter.dispose();\n\t        this.system.unregister(this);\n\t    },\n\n\t    diffuse: true,\n\n\t    fragment: [\n\t        \"float $blendScreen(float base, float blend) {\",\n\t        \"    return 1.0-((1.0-base)*(1.0-blend));\",\n\t        \"}\",\n\n\t        \"vec3 $blendScreen(vec3 base, vec3 blend) {\",\n\t        \"    return vec3($blendScreen(base.r,blend.r),$blendScreen(base.g,blend.g),$blendScreen(base.b,blend.b));\",\n\t        \"}\",\n\n\t        \"vec3 $blendScreen(vec3 base, vec3 blend, float opacity) {\",\n\t\t    \"    return ($blendScreen(base, blend) * opacity + base * (1.0 - opacity));\",\n\t        \"}\",\n\n\t\t\t\"void $main(inout vec4 color, vec4 origColor, vec2 uv, float depth) {\",\n\t\t\t\"   vec4 texel = texture2D($texture, uv);\",\n\t        \"   color.rgb = $blendScreen( color.rgb, texel.rgb, $intensity * $attenuation);\",\n\t        \"}\"\n\t\t].join( \"\\n\" )\n\t});\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar SAOShader = __webpack_require__(14);\n\tvar DepthLimitedBlurShader = __webpack_require__(15);\n\n\tAFRAME.registerComponent(\"ssao\", {\n\t    schema: {\n\t        \"samples\": { type: \"number\", default: 16},\n\t        \"rings\": { type: \"number\", default: 7 },\n\t        \"radius\": { type: \"number\", default: 0.5 },\n\t        \"ratio\": { default: 0.5 },\n\t        \"intensity\": { default: 1.0 },\n\t        \"maxDepth\": { default: 0.99 },\n\t        \"bias\": { default: 0.05 },\n\t        \"scale\": { default: 0.15 },\n\t        \"blurRadius\": { default: 7 },\n\t        \"depthCutoff\":  { default: 10 }\n\t\t},\n\n\t    init: function () {\n\t        this.system = this.el.sceneEl.systems.effects;\n\t        var pars = { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat };\n\t        this.renderTargets = [];\n\t\t\tthis.renderTargets.push(new THREE.WebGLRenderTarget( 1, 1, pars));\n\t\t\tthis.renderTargets.push(new THREE.WebGLRenderTarget( 1, 1, pars));\t\n\t        this.uniforms = {\n\t            \"texture\": { type: \"t\", value: this.renderTargets[0].texture },\n\t            \"intensity\": { type: \"f\", value: 1.0 },\n\t            \"maxDepth\": { type: \"f\", value: 0.99 },\n\t            \"depthCutoff\": { type: \"f\", default: 1}\n\t\t    };\n\t        this.SAOMaterial = null;\n\t        this.hBlurMaterial = null;\n\t        this.vBlurMaterial = null;\n\t        this.sizeUniform = { type: \"v2\", value: new THREE.Vector2()};\n\t        this.system.register(this);\n\t    },\n\n\t    update: function (od) {\n\t        var d = this.data, self=this;\n\n\t        this.rebuild(d.rings !== od.rings || d.samples !== od.samples, d.blurRadius !== od.blurRadius);\n\t        this.uniforms.depthCutoff.value = d.depthCutoff;\n\t        this.uniforms.intensity.value = d.intensity;\n\t        this.uniforms.maxDepth.value = d.maxDepth;\n\t        this.SAOMaterial.uniforms.bias.value = d.bias;\n\t        this.SAOMaterial.uniforms.scale.value = d.scale;\n\t        this.SAOMaterial.uniforms.kernelRadius.value = d.radius;\n\t        this.hBlurMaterial.uniforms.depthCutoff.value = d.depthCutoff;\n\t        this.vBlurMaterial.uniforms.depthCutoff.value = d.depthCutoff;\n\t    },\n\n\t    rebuild: function (sao, blur) {\n\t        var d = this.data;\n\t        if(sao) {\n\t            if (this.SAOMaterial) {\n\t                this.SAOMaterial.dispose();\n\t            }\n\t            this.SAOMaterial = this.system.materialize(SAOShader(true));\n\t\t\t\tthis.SAOMaterial.defines[\"RINGS\"] = parseInt(d.rings) + \".\";\n\t\t\t\tthis.SAOMaterial.defines[\"SAMPLES\"] = parseInt(d.samples) + \".\";\n\t\t\t\tthis.SAOMaterial.uniforms.cameraFar = this.system.cameraFar;\n\t            this.SAOMaterial.uniforms.cameraNear = this.system.cameraNear;\n\t        }\n\t        if(blur) {\n\t            if (this.hBlurMaterial) {\n\t                this.hBlurMaterial.dispose();\n\t                this.vBlurMaterial.dispose();\n\t            }\n\t            this.hBlurMaterial = this.system.materialize(DepthLimitedBlurShader(d.blurRadius, d.blurRadius/2, new THREE.Vector2(1,0)));\n\t            this.vBlurMaterial = this.system.materialize(DepthLimitedBlurShader(d.blurRadius, d.blurRadius/2, new THREE.Vector2(0,1)));\n\t            this.hBlurMaterial.uniforms.size = this.sizeUniform;\n\t            this.vBlurMaterial.uniforms.size = this.sizeUniform;\n\t            this.hBlurMaterial.uniforms.cameraFar = this.system.cameraFar;\n\t            this.hBlurMaterial.uniforms.cameraNear = this.system.cameraNear;\n\t            this.vBlurMaterial.uniforms.cameraFar = this.system.cameraFar;\n\t            this.vBlurMaterial.uniforms.cameraNear = this.system.cameraNear;\n\t        }\n\t    },\n\n\t    setSize: function(w, h) {\n\t        w = Math.ceil(w * this.data.ratio);\n\t        h = Math.ceil(h * this.data.ratio);\n\t        \n\t        this.sizeUniform.value.set(w,h);\n\n\t        this.renderTargets.forEach(function (rt) {\n\t            rt.setSize(w,h);\n\t        });\n\t    },\n\n\t    tock: function (time) {\n\t        if (!this.system.isActive(this, true)) return;\n\t        //this.SAOMaterial.uniforms.randomSeed.value = Math.random();\n\t        this.SAOMaterial.uniforms[ 'cameraInverseProjectionMatrix' ].value.getInverse( this.el.sceneEl.camera.projectionMatrix );\n\t\t\tthis.SAOMaterial.uniforms[ 'cameraProjectionMatrix' ].value = this.el.sceneEl.camera.projectionMatrix;\n\t    \n\t        this.SAOMaterial.uniforms.tDepth.value = this.el.sceneEl.renderTarget.depthTexture;\n\t        this.system.renderPass(this.SAOMaterial, this.renderTargets[0], true);\n\n\t\t\tif(this.data.blurRadius) {\n\t\t\t\tthis.hBlurMaterial.uniforms.tDiffuse.value = this.renderTargets[0].texture;\n\t\t\t\tthis.system.renderPass(this.hBlurMaterial, this.renderTargets[1], true);\n\n\t\t\t\tthis.vBlurMaterial.uniforms.tDiffuse.value = this.renderTargets[1].texture;\n\t\t\t\tthis.system.renderPass(this.vBlurMaterial, this.renderTargets[0], true);\n\t\t\t}\n\t\t},\n\n\t    remove: function () {\n\t        this.SAOMaterial.dispose();\n\t        this.hBlurMaterial.dispose();\n\t        this.vBlurMaterial.dispose();\n\t        this.renderTargets[0].dispose();\n\t        this.renderTargets[1].dispose();\n\t        this.system.unregister(this);\n\t    },\n\n\t    includes: [\"packing\"],\n\n\t    depth: true,\n\n\t    diffuse: true,\n\t    \n\t    fragment: [\n\t        \"float $unpackDepth(vec3 pack) {\",\n\t        \"\tfloat depth = dot( pack, 1.0 / vec3(1.0, 256.0, 256.0*256.0) );\",\n\t        \"\treturn depth * (256.0*256.0*256.0) / (256.0*256.0*256.0 - 1.0);\",\n\t        \"}\",\n\t\t\t\"void $main(inout vec4 color, vec4 origColor, vec2 uv, float depth) {\",\n\t\t\t\"   vec4 texel = texture2D($texture, uv);\",\n\t        \"   float z = perspectiveDepthToViewZ( $unpackDepth(texel.xyz), cameraNear, cameraFar );\",\n\t        \"   float Z = perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\",\n\t        \"   color.rgb *= abs(z-Z) > $depthCutoff || Z >= $maxDepth * cameraFar ? 1.0  :  1.0 - texel.a * $intensity;\",\n\t        \"}\"\n\t\t].join( \"\\n\" )\n\t});\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports) {\n\n\t/**\n\t * @author bhouston / http://clara.io/\n\t *\n\t * Scalable Ambient Occlusion\n\t *\n\t */\n\n\tmodule.exports = function (isFirst) {\n\t\treturn {\n\t\t\tdefines: {},\n\n\t\t\tuniforms: {\n\n\t\t\t\t\"tDepth\":       { type: \"t\", value: null },\n\t\t\t\t\n\t\t\t\t\"cameraNear\":   { type: \"f\", value: 1 },\n\t\t\t\t\"cameraFar\":    { type: \"f\", value: 100 },\n\t\t\t\t\"cameraProjectionMatrix\": { type: \"m4\", value: new THREE.Matrix4() },\n\t\t\t\t\"cameraInverseProjectionMatrix\": { type: \"m4\", value: new THREE.Matrix4() },\n\n\t\t\t\t\"scale\":        { type: \"f\", value: 1.0 },\n\t\t\t\t\"bias\":         { type: \"f\", value: 0.5 },\n\n\t\t\t\t\"minResolution\": { type: \"f\", value: 0.0 },\n\t\t\t\t\"kernelRadius\": { type: \"f\", value: 0.5 },\n\t\t\t\t\"randomSeed\":   { type: \"f\", value: 0.0 },\n\t\t\t\t\"maxDepth\":   { type: \"f\", value: 1.0 }\n\t\t\t},\n\n\t\t\tvertexShader: [\n\n\t\t\t\t\"varying vec2 vUv;\",\n\t\t\t\t\"void main() {\",\n\n\t\t\t\t\t\"vUv = uv;\",\n\n\t\t\t\t\t\"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\t\t\"}\"\n\n\t\t\t].join( \"\\n\" ),\n\n\t\t\tfragmentShader: [\n\n\t\t\t\t// total number of samples at each fragment\",\n\t\t\t\t\n\t\t\t\t\"#include <common>\",\n\t\t\t\t\"#include <packing>\",\n\n\t\t\t\t\"varying vec2 vUv;\",\n\n\t\t\t\t\"uniform sampler2D tDepth;\",\n\n\t\t\t\t\"uniform float cameraNear;\",\n\t\t\t\t\"uniform float cameraFar;\",\n\t\t\t\t\"uniform mat4 cameraProjectionMatrix;\",\n\t\t\t\t\"uniform mat4 cameraInverseProjectionMatrix;\",\n\n\t\t\t\t\"uniform float scale;\",\n\t\t\t\t\"uniform float intensity;\",\n\t\t\t\t\"uniform float bias;\",\n\t\t\t\t\"uniform float kernelRadius;\",\n\t\t\t\t\"uniform float minResolution;\",\n\t\t\t\t\"uniform float randomSeed;\",\n\t\t\t\t\"uniform float maxDepth;\",\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\"float unpackDepth(vec3 pack) {\",\n\t\t\t\t\"\tfloat depth = dot( pack, 1.0 / vec3(1.0, 256.0, 256.0*256.0) );\",\n\t  \t\t\t\"\treturn depth * (256.0*256.0*256.0) / (256.0*256.0*256.0 - 1.0);\",\n\t\t\t\t\"}\",\n\t\t\t\t\n\t\t\t\t\"vec3 packDepth(float depth) {\",\n\t\t\t\t\"\tfloat depthVal = depth * (256.0*256.0*256.0 - 1.0) / (256.0*256.0*256.0);\",\n\t   \t\t\t\"\tvec4 encode = fract( depthVal * vec4(1.0, 256.0, 256.0*256.0, 256.0*256.0*256.0) );\",\n\t    \t\t\"\treturn encode.xyz - encode.yzw / 256.0 + 1.0/512.0;\",\n\t\t\t\t\"}\",\n\n\t\t\t\t\n\t\t\t\t\"float getViewZ( const in float depth ) {\",\n\n\t\t\t\t\t\"return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\",\n\n\t\t\t\t\"}\",\n\n\t\t\t\t\"vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {\",\n\n\t\t\t\t\t\"float clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];\",\n\t\t\t\t\t\"vec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );\",\n\t\t\t\t\t\"clipPosition *= clipW;\", // unprojection.\n\t\t\t\t\t\"return ( cameraInverseProjectionMatrix * clipPosition ).xyz;\",\n\n\t\t\t\t\"}\",\n\n\t\t\t\t\"vec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPosition ) {\",\n\n\t\t\t\t\t\"return normalize( cross( dFdx( viewPosition ), dFdy( viewPosition ) ) );\",\n\t\t\t\t\n\t\t\t\t\"}\",\n\n\t\t\t\t\"float scaleDividedByCameraFar;\",\n\t\t\t\t\"float minResolutionMultipliedByCameraFar;\",\n\n\t\t\t\t\"float getOcclusion( const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition ) {\",\n\n\t\t\t\t\t\"vec3 viewDelta = sampleViewPosition - centerViewPosition;\",\n\t\t\t\t\t\"float viewDistance = length( viewDelta );\",\n\t\t\t\t\t\"float scaledScreenDistance = scaleDividedByCameraFar * viewDistance;\",\n\t\t\t\t\t\"return max(0.0, (dot(centerViewNormal, viewDelta) - minResolutionMultipliedByCameraFar) / scaledScreenDistance - bias) / (1.0 + pow2( scaledScreenDistance ) );\",\n\n\t\t\t\t\"}\",\n\n\t\t\t\t// moving costly divides into consts\n\t\t\t\t\"const float ANGLE_STEP = PI2 * RINGS / SAMPLES;\",\n\t\t\t\t\"const float INV_NUM_SAMPLES = 1.0 / SAMPLES;\",\n\n\t\t\t\t\"float getAmbientOcclusion( const in vec3 centerViewPosition) {\",\n\n\t\t\t\t\t// precompute some variables require in getOcclusion.\n\t\t\t\t\t\"scaleDividedByCameraFar = scale;\",\n\t\t\t\t\t\"minResolutionMultipliedByCameraFar = minResolution * cameraFar;\",\n\t\t\t\t\t\"vec3 centerViewNormal = getViewNormal( centerViewPosition, vUv );\",\n\n\t\t\t\t\t// jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/\n\t\t\t\t\t\"float angle = rand( vUv + randomSeed ) * PI2;\",\n\t\t\t\t\t\"vec2 radius = vec2( kernelRadius * INV_NUM_SAMPLES );\",\n\t\t\t\t\t\"vec2 radiusStep = radius;\",\n\t\t\t\t\t\"float occlusionSum = 0.;\",\n\t\t\t\t\t\"float weightSum = 0.;\",\n\t\t\t\t\t\"for( int i = 0; i < int(SAMPLES); i ++ ) {\",\n\t\t\t\t\t\t\"vec2 sampleUv = vUv + vec2( cos( angle ), sin( angle ) ) * radius;\",\n\t\t\t\t\t\t\"radius += radiusStep;\",\n\t\t\t\t\t\t\"angle += ANGLE_STEP;\",\n\n\t\t\t\t\t\t\"float sampleDepth = textureVR( tDepth, sampleUv ).x;\",\n\t\t\t\t\t\t\"if( sampleDepth >= ( 1.0 - EPSILON ) ) {\",\n\t\t\t\t\t\t\t\"continue;\",\n\t\t\t\t\t\t\"}\",\n\n\t\t\t\t\t\t\"float sampleViewZ = getViewZ( sampleDepth );\",\n\t\t\t\t\t\t\"vec3 sampleViewPosition = getViewPosition( sampleUv, sampleDepth, sampleViewZ );\",\n\t\t\t\t\t\t\"occlusionSum += getOcclusion( centerViewPosition, centerViewNormal, sampleViewPosition );\",\n\t\t\t\t\t\t\"weightSum += 1.0;\",\n\n\t\t\t\t\t\"}\",\n\n\t\t\t\t\t\"if( weightSum == 0.0 ) discard;\",\n\t\t\t\t\t\"return occlusionSum / weightSum;\",\n\t\t\t\t\t\n\t\t\t\t\"}\",\n\n\n\t\t\t\t\"void main() {\",\n\t\t\t\t\t\"vec4 texel = texture2D( tDepth, vUv );\",\n\t\t\t\t\t\"float centerDepth = texel.x;\",\n\t\t\t\t\t\n\t\t\t\t\t\"if( centerDepth >= ( maxDepth - EPSILON ) ) {\",\n\t\t\t\t\t\t\"discard;\",\n\t\t\t\t\t\"}\",\n\n\t\t\t\t\t\"float centerViewZ = getViewZ( centerDepth );\",\n\t\t\t\t\t\"vec3 viewPosition = getViewPosition( vUv, centerDepth, centerViewZ );\",\n\n\t\t\t\t\t\"gl_FragColor =  vec4(packDepth(texel.x), getAmbientOcclusion( viewPosition));\",\n\t\t\t\t\"}\"\n\n\t\t\t].join( \"\\n\" )\n\n\t\t};\n\t}\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports) {\n\n\t/**\n\t * @author bhouston / http://clara.io\n\t *\n\t * For a horizontal blur, use X_STEP 1, Y_STEP 0\n\t * For a vertical blur, use X_STEP 0, Y_STEP 1\n\t *\n\t *\n\t */\n\n\t// Adapted by wizgrav to pack depth and AO in a single rgba texture\n\n\tTHREE.BlurShaderUtils = {\n\n\t\tcreateSampleWeights: function( kernelRadius, stdDev ) {\n\n\t\t\tvar gaussian = function( x, stdDev ) {\n\t\t\t\treturn Math.exp( - ( x*x ) / ( 2.0 * ( stdDev * stdDev ) ) ) / ( Math.sqrt( 2.0 * Math.PI ) * stdDev );\n\t\t\t};\n\n\t\t\tvar weights = [];\n\n\t\t\tfor( var i = 0; i <= kernelRadius; i ++ ) {\n\t\t\t\tweights.push( gaussian( i, stdDev ) );\n\t\t\t}\n\n\t\t\treturn weights;\n\t\t},\n\n\t\tcreateSampleOffsets: function( kernelRadius, uvIncrement ) {\n\n\t\t\tvar offsets = [];\n\n\t\t\tfor( var i = 0; i <= kernelRadius; i ++ ) {\n\t\t\t\toffsets.push( uvIncrement.clone().multiplyScalar( i ) );\n\t\t\t}\n\n\t\t\treturn offsets;\n\n\t\t},\n\n\t\tconfigure: function( kernelRadius, stdDev, uvIncrement ) {\n\t\t\treturn {\n\t\t\t\t'sampleUvOffsets': THREE.BlurShaderUtils.createSampleOffsets( kernelRadius, uvIncrement ),\n\t\t\t\t'sampleWeights': THREE.BlurShaderUtils.createSampleWeights( kernelRadius, stdDev )\n\t\t\t}\n\t\t}\n\n\t};\n\n\n\tmodule.exports =  function (radius, stdDev, uvIncrement) {\n\t\tradius = radius || 4;\n\t\tvar config = THREE.BlurShaderUtils.configure(radius, stdDev, uvIncrement )\n\t\treturn {\n\t\t\tdefines: {\n\n\t\t\t\t\"KERNEL_RADIUS\": radius,\n\n\t\t\t},\n\n\t\t\tuniforms: {\n\n\t\t\t\t\"tDiffuse\":         { type: \"t\", value: null },\n\t\t\t\t\"size\":             { type: \"v2\", value: new THREE.Vector2( 512, 512 ) },\n\t\t\t\t\"sampleUvOffsets\":  { type: \"v2v\", value: config.sampleUvOffsets },\n\t\t\t\t\"sampleWeights\":    { type: \"1fv\", value: config.sampleWeights },\n\t\t\t\t\"depthCutoff\":      { type: \"f\", value: 10 },\n\t\t\t\t\"cameraFar\":      { type: \"f\", value: 1 },\n\t\t\t\t\"cameraNear\":      { type: \"f\", value: 1000 }\n\t\t\t},\n\n\t\t\tvertexShader: [\n\n\t\t\t\t\"#include <common>\",\n\n\t\t\t\t\"uniform vec2 size;\",\n\n\t\t\t\t\"varying vec2 vUv;\",\n\t\t\t\t\"varying vec2 vInvSize;\",\n\n\t\t\t\t\"void main() {\",\n\n\t\t\t\t\t\"vUv = uv;\",\n\t\t\t\t\t\"vInvSize = 1.0 / size;\",\n\n\t\t\t\t\t\"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\t\t\"}\"\n\n\t\t\t].join( \"\\n\" ),\n\n\t\t\tfragmentShader: [\n\n\t\t\t\t\"#include <common>\",\n\t\t\t\t\"#include <packing>\",\n\n\t\t\t\t\"uniform sampler2D tDiffuse;\",\n\t\t\t\t\n\t\t\t\t\"uniform vec2 sampleUvOffsets[ KERNEL_RADIUS + 1 ];\",\n\t\t\t\t\"uniform float sampleWeights[ KERNEL_RADIUS + 1 ];\",\n\t\t\t\t\"uniform float depthCutoff;\",\n\t\t\t\t\"uniform float cameraFar;\",\n\t\t\t\t\"uniform float cameraNear;\",\n\n\t\t\t\t\"varying vec2 vUv;\",\n\t\t\t\t\"varying vec2 vInvSize;\",\n\t\t\t\t\n\t\t\t\t\"float unpackDepth(vec3 pack) {\",\n\t\t\t\t\"\tfloat depth = dot( pack, 1.0 / vec3(1.0, 256.0, 256.0*256.0) );\",\n\t  \t\t\t\"\treturn depth * (256.0*256.0*256.0) / (256.0*256.0*256.0 - 1.0);\",\n\t\t\t\t\"}\",\n\t\t\t\t\n\t\t\t\t\"float getViewZ( const in float depth ) {\",\n\n\t\t\t\t \"return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\",\n\n\t\t\t \t\"}\",\n\t\t\t\t\"void main() {\",\n\t\t\t\t\t\"vec4 texel = texture2D( tDiffuse, vUv );\",\n\t\t\t\t\t\"vec3 orig = texel.xyz;\",\n\t\t\t\t\t\"float depth = unpackDepth( orig );\",\n\t\t\t\t\t\"if( depth >= ( 1.0 - EPSILON ) ) {\",\n\t\t\t\t\t\t\"discard;\",\n\t\t\t\t\t\"}\",\n\t\t\t\t\t\"float centerViewZ = -getViewZ( depth );\",\n\t\t\t\t\t\"bool rBreak = false, lBreak = false;\",\n\n\t\t\t\t\t\"float weightSum = sampleWeights[0];\",\n\t\t\t\t\t\"float AOSum = texel.a * weightSum;\",\n\n\t\t\t\t\t\"for( int i = 1; i <= KERNEL_RADIUS; i ++ ) {\",\n\n\t\t\t\t\t\t\"float sampleWeight = sampleWeights[i];\",\n\t\t\t\t\t\t\"vec2 sampleUvOffset = sampleUvOffsets[i] * vInvSize;\",\n\n\t\t\t\t\t\t\"vec2 sampleUv = vUv + sampleUvOffset;\",\n\t\t\t\t\t\t\"texel = textureVR( tDiffuse, sampleUv );\",\n\t\t\t\t\t\t\"float viewZ = -getViewZ(unpackDepth( texel.xyz ));\",\n\n\t\t\t\t\t\t\"if( abs( viewZ - centerViewZ ) > depthCutoff ) rBreak = true;\",\n\n\t\t\t\t\t\t\"if( ! rBreak ) {\",\n\t\t\t\t\t\t\t\"AOSum += texel.a * sampleWeight;\",\n\t\t\t\t\t\t\t\"weightSum += sampleWeight;\",\n\t\t\t\t\t\t\"}\",\n\n\t\t\t\t\t\t\"sampleUv = vUv - sampleUvOffset;\",\n\t\t\t\t\t\t\"texel = textureVR( tDiffuse, sampleUv );\",\n\t\t\t\t\t\t\"viewZ = -getViewZ(unpackDepth( texel.xyz ));\",\n\n\t\t\t\t\t\t\"if( abs( viewZ - centerViewZ ) > depthCutoff ) lBreak = true;\",\n\n\t\t\t\t\t\t\"if( ! lBreak ) {\",\n\t\t\t\t\t\t\t\"AOSum += texel.a * sampleWeight;\",\n\t\t\t\t\t\t\t\"weightSum += sampleWeight;\",\n\t\t\t\t\t\t\"}\",\n\n\t\t\t\t\t\"}\",\n\n\t\t\t\t\t\"gl_FragColor = vec4(orig, AOSum / weightSum);\",\n\n\t\t\t\t\"}\"\n\n\t\t\t].join( \"\\n\" )\n\n\t};\n\t}\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports) {\n\n\tAFRAME.registerComponent(\"lighty\", {\n\t\tschema: {\n\t\t\tcolor: { type: \"color\", default: \"#000000\" },\n\t\t\tradius: { type: \"number\", default: 0 },\n\t\t\tdecay: { type: \"number\", default: 1 }\n\t\t},\n\t\t\n\t\tinit: function () {\n\t\t\tthis.el.sceneEl.systems.effects.addLight(this);\n\t\t},\n\t\t\n\t\tremove: function () {\n\t\t\tthis.el.sceneEl.systems.effects.removeLight(this);\n\t\t}\n\t});\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports) {\n\n\tTHREE.ShaderChunk[ 'lights_pars_maps' ] += [\n\t\t'#if defined TILED_FORWARD',\n\t\t'uniform vec4 tileData;',\n\t\t'uniform sampler2D tileTexture;',\n\t\t'uniform sampler2D lightTexture;',\n\t\t'#endif'\n\t].join( '\\n' );\n\n\tTHREE.ShaderChunk[ 'lights_fragment_maps' ] += [\n\t\t'',\n\t\t'#if defined TILED_FORWARD',\n\t\t'vec2 tUv = floor(gl_FragCoord.xy / tileData.xy * 32.) / 32. + tileData.zw;',\n\t\t'vec4 tile = texture2D(tileTexture, tUv);',\n\t\t'for (int i=0; i < 4; i++) {',\n\t\t'\tfloat tileVal = tile.x * 255.;',\n\t\t'  \ttile.xyzw = tile.yzwx;',\n\t\t'\tif(tileVal == 0.){ continue; }',\n\t\t'  \tfloat tileDiv = 128.;',\n\t\t'\tfor (int j=0; j < 8; j++) {',\n\t\t'  \t\tif (tileVal < tileDiv) {  tileDiv *= 0.5; continue; }',\n\t\t'\t\ttileVal -= tileDiv;',\n\t\t'\t\ttileDiv *= 0.5;',\n\t\t'  \t\tPointLight pointlight;',\n\t\t'\t\tfloat uvx = (float(8 * i + j) + 0.5) / 32.;',\n\t\t'  \t\tvec4 lightData = texture2D(lightTexture, vec2(uvx, 0.));',\n\t\t'  \t\tvec4 lightColor = texture2D(lightTexture, vec2(uvx, 1.));',\n\t\t'  \t\tpointlight.position = lightData.xyz;',\n\t\t'  \t\tpointlight.distance = lightData.w;',\n\t\t'  \t\tpointlight.color = lightColor.rgb;',\n\t\t'  \t\tpointlight.decay = lightColor.a;',\n\t\t'  \t\tgetPointDirectLightIrradiance( pointlight, geometry, directLight );',\n\t\t'\t\tRE_Direct( directLight, geometry, material, reflectedLight );',\n\t\t'\t}',\n\t\t'}',\n\t\t'#endif'\n\t].join( '\\n' );\n\n\tvar utils = AFRAME.utils;\n\n\tvar CubeLoader = new THREE.CubeTextureLoader();\n\tvar texturePromises = {};\n\n\t/**\n\t * Standard (physically-based) shader with tiled forward lighting.\n\t */\n\tAFRAME.registerShader('standard-fx', {\n\t  schema: {\n\t    ambientOcclusionMap: {type: 'map'},\n\t    ambientOcclusionMapIntensity: {default: 1},\n\t    ambientOcclusionTextureOffset: {type: 'vec2'},\n\t    ambientOcclusionTextureRepeat: {type: 'vec2', default: {x: 1, y: 1}},\n\n\t    color: {type: 'color'},\n\n\t    displacementMap: {type: 'map'},\n\t    displacementScale: {default: 1},\n\t    displacementBias: {default: 0.5},\n\t    displacementTextureOffset: {type: 'vec2'},\n\t    displacementTextureRepeat: {type: 'vec2', default: {x: 1, y: 1}},\n\t    emissive: {type: 'color', default: '#000'},\n\t    emissiveIntensity: {default: 1},\n\t    envMap: {default: ''},\n\n\t    fog: {default: true},\n\t    height: {default: 256},\n\n\t    metalness: {default: 0.0, min: 0.0, max: 1.0},\n\t    metalnessMap: {type: 'map'},\n\t    metalnessTextureOffset: {type: 'vec2'},\n\t    metalnessTextureRepeat: {type: 'vec2', default: {x: 1, y: 1}},\n\n\t    normalMap: {type: 'map'},\n\t    normalScale: {type: 'vec2', default: {x: 1, y: 1}},\n\t    normalTextureOffset: {type: 'vec2'},\n\t    normalTextureRepeat: {type: 'vec2', default: {x: 1, y: 1}},\n\n\t    offset: {type: 'vec2', default: {x: 0, y: 0}},\n\t    repeat: {type: 'vec2', default: {x: 1, y: 1}},\n\n\t    roughness: {default: 0.5, min: 0.0, max: 1.0},\n\t    roughnessMap: {type: 'map'},\n\t    roughnessTextureOffset: {type: 'vec2'},\n\t    roughnessTextureRepeat: {type: 'vec2', default: {x: 1, y: 1}},\n\n\t    sphericalEnvMap: {type: 'map'},\n\t    src: {type: 'map'},\n\t    width: {default: 512},\n\t    wireframe: {default: false},\n\t    wireframeLinewidth: {default: 2}\n\t  },\n\n\t  /**\n\t   * Initializes the shader.\n\t   * Adds a reference from the scene to this entity as the camera.\n\t   */\n\t  init: function (data) {\n\t    this.material = new THREE.MeshStandardMaterial(getMaterialData(data));\n\t    utils.material.updateMap(this, data);\n\t    if (data.normalMap) { utils.material.updateDistortionMap('normal', this, data); }\n\t    if (data.displacementMap) { utils.material.updateDistortionMap('displacement', this, data); }\n\t    if (data.ambientOcclusionMap) { utils.material.updateDistortionMap('ambientOcclusion', this, data); }\n\t    if (data.metalnessMap) { utils.material.updateDistortionMap('metalness', this, data); }\n\t    if (data.roughnessMap) { utils.material.updateDistortionMap('roughness', this, data); }\n\t    this.updateEnvMap(data);\n\t\tthis.material.onBeforeCompile = function ( shader ) {\n\t\t\tshader.uniforms.tileData = State.tileData;\n\t\t\tshader.uniforms.tileTexture = State.tileTexture;\n\t\t\tshader.uniforms.lightTexture = State.lightTexture;\n\t\t\tshader.defines[ 'TILED_FORWARD' ] = 1;  \n\t\t}\n\t  },\n\n\t  update: function (data) {\n\t    this.updateMaterial(data);\n\t    utils.material.updateMap(this, data);\n\t    if (data.normalMap) { utils.material.updateDistortionMap('normal', this, data); }\n\t    if (data.displacementMap) { utils.material.updateDistortionMap('displacement', this, data); }\n\t    if (data.ambientOcclusionMap) { utils.material.updateDistortionMap('ambientOcclusion', this, data); }\n\t    if (data.metalnessMap) { utils.material.updateDistortionMap('metalness', this, data); }\n\t    if (data.roughnessMap) { utils.material.updateDistortionMap('roughness', this, data); }\n\t    this.updateEnvMap(data);\n\t  },\n\n\t  /**\n\t   * Updating existing material.\n\t   *\n\t   * @param {object} data - Material component data.\n\t   * @returns {object} Material.\n\t   */\n\t  updateMaterial: function (data) {\n\t    var material = this.material;\n\t    data = getMaterialData(data);\n\t    Object.keys(data).forEach(function (key) {\n\t      material[key] = data[key];\n\t    });\n\t  },\n\n\t  /**\n\t   * Handle environment cubemap. Textures are cached in texturePromises.\n\t   */\n\t  updateEnvMap: function (data) {\n\t    var self = this;\n\t    var material = this.material;\n\t    var envMap = data.envMap;\n\t    var sphericalEnvMap = data.sphericalEnvMap;\n\n\t    // No envMap defined or already loading.\n\t    if ((!envMap && !sphericalEnvMap) || this.isLoadingEnvMap) {\n\t      material.envMap = null;\n\t      material.needsUpdate = true;\n\t      return;\n\t    }\n\t    this.isLoadingEnvMap = true;\n\n\t    // if a spherical env map is defined then use it.\n\t    if (sphericalEnvMap) {\n\t      this.el.sceneEl.systems.material.loadTexture(sphericalEnvMap, {src: sphericalEnvMap}, function textureLoaded (texture) {\n\t        self.isLoadingEnvMap = false;\n\t        texture.mapping = THREE.SphericalReflectionMapping;\n\t        material.envMap = texture;\n\t        utils.material.handleTextureEvents(self.el, texture);\n\t        material.needsUpdate = true;\n\t      });\n\t      return;\n\t    }\n\n\t    // Another material is already loading this texture. Wait on promise.\n\t    if (texturePromises[envMap]) {\n\t      texturePromises[envMap].then(function (cube) {\n\t        self.isLoadingEnvMap = false;\n\t        material.envMap = cube;\n\t        utils.material.handleTextureEvents(self.el, cube);\n\t        material.needsUpdate = true;\n\t      });\n\t      return;\n\t    }\n\n\t    // Material is first to load this texture. Load and resolve texture.\n\t    texturePromises[envMap] = new Promise(function (resolve) {\n\t      utils.srcLoader.validateCubemapSrc(envMap, function loadEnvMap (urls) {\n\t        CubeLoader.load(urls, function (cube) {\n\t          // Texture loaded.\n\t          self.isLoadingEnvMap = false;\n\t          material.envMap = cube;\n\t          utils.material.handleTextureEvents(self.el, cube);\n\t          resolve(cube);\n\t        });\n\t      });\n\t    });\n\t  }\n\t});\n\n\t/**\n\t * Builds and normalize material data, normalizing stuff along the way.\n\t *\n\t * @param {object} data - Material data.\n\t * @returns {object} data - Processed material data.\n\t */\n\tfunction getMaterialData (data) {\n\t  var newData = {\n\t    color: new THREE.Color(data.color),\n\t    emissive: new THREE.Color(data.emissive),\n\t    emissiveIntensity: data.emissiveIntensity,\n\t    fog: data.fog,\n\t    metalness: data.metalness,\n\t    roughness: data.roughness,\n\t    wireframe: data.wireframe,\n\t    wireframeLinewidth: data.wireframeLinewidth\n\t  };\n\n\t  if (data.normalMap) { newData.normalScale = data.normalScale; }\n\n\t  if (data.ambientOcclusionMap) { newData.aoMapIntensity = data.ambientOcclusionMapIntensity; }\n\n\t  if (data.displacementMap) {\n\t    newData.displacementScale = data.displacementScale;\n\t    newData.displacementBias = data.displacementBias;\n\t  }\n\n\t  return newData;\n\t}\n\n/***/ })\n/******/ ]);\n  \n  \n})()","let CS1 = window.CS1 = {};\nimport utils from './utils';\nutils(CS1);\nimport loadSpinner from './load-spinner';\nimport './load-spinner.css';\nimport grabbable from './grabbable';\nimport navpointer from './nav-pointer';\nimport player from './player';\nimport d3graph from './d3-graph';\nimport shaderfrog from './shader-frog';\nimport particles from './particles';\nparticles(CS1);\nimport proximityGlitch from './proximity-glitch'\nimport hud from './hud';\nimport './hud.css';\nhud(CS1);\nimport game from './game';\ngame(CS1);\nimport socket from './client-socket';\nsocket(CS1);\nimport collectible from './collectible';\ncollectible(CS1);\nimport './main.css';\nimport login from './login';\nimport './login.css';\nimport aframeEffects from './aframe-effects';\n\n  \n\n  "],"names":["CS1","utils","uid","firstItem","value","counter","split","reduce","acc","curValue","curIndex","arr","curObj","prev","now","Date","performance","toString","replace","Math","random","substr","isEqual","other","key","hasOwnProperty","item1","item2","itemType","Object","prototype","call","window","addEventListener","console","log","loadSpinner","document","createElement","className","i","appendChild","style","left","innerWidth","loadingScreen","querySelector","width","height","innerHeight","copyTransform","scratchMat","THREE","Matrix4","source","destination","matrix","copy","matrixWorld","applyMatrix","getInverse","parent","AFRAME","registerComponent","schema","origin","type","init","grab","e","cancelBubble","isDragging","cursor","detail","cursorEl","self","el","sceneEl","setAttribute","setTimeout","createProxyObject","object3D","originEl","emit","addState","release","proxyObject","remove","getAttribute","removeState","cursorObject","Object3D","visible","add","this","data","classList","device","isMobile","updateGrabbables","grabbablesData","keys","grabbables","length","name","game","hasBegun","forEach","d","index","b","debug","position","scale","rotation","quaternion","tick","ctrlEl","active","intersection","point","color","components","raycaster","refreshObjects","t","dt","setAvatar","src","setAnimation","side","default","url","dependencies","canvas","id","ctx","getContext","fillStyle","fillRect","dataProcessed","fetch","then","resp","json","processData","catch","err","dataToProcess","list","day","push","dt_txt","temp_max","k2f","main","k","round","visualizeData","updateCanvas","dt_width","hue","drawRectangles","x","y","material","getObject3D","map","needsUpdate","shaders","Polkadot_Shader","Sun_Shader","Jelly_Shader","Green_Dance_Shader","Cosmic_Shader","Cool_Tiles_Shader","Disco_Shader","Marching_Ants_Shader","Goo_Shader","Psycho_Shader","ShaderRuntime","extend","arguments","obj","l","clone","omit","cloned","mainCamera","cubeCameras","reserved","time","cameraPosition","umap","float","int","vec2","[object Object]","Vector2","vec3","Vector3","vec4","Vector4","samplerCube","sampler2D","camera","Camera","Error","renderTarget","identifier","config","findBy","shaderTypes","shader","newShaderData","runningShaders","oldName","newName","shaderType","initted","create","shaderName","uniform","newData","fragmentShader","fragment","vertexShader","vertex","uniformName","uniforms","getUmap","glslType","RawShaderMaterial","viewMatrix","matrixWorldInverse","registerSystem","registerCamera","systems","frog_runtime","clock","Clock","scene","hasLoaded","bind","updateShaders","getElapsedTime","originalMaterial","shaderData","update","system","get","modules","__webpack_require__","moduleId","installedModules","exports","module","m","c","getter","o","defineProperty","configurable","enumerable","n","__esModule","object","property","p","s","BufferGeometryUtils","computeTangents","geometry","handleVertex","v","fromArray","normals","n2","tan1","tmp","sub","multiplyScalar","dot","normalize","tmp2","crossVectors","test","tan2","w","tangents","z","attributes","undefined","normal","uv","warn","indices","array","positions","uvs","nVertices","tangent","addAttribute","BufferAttribute","Float32Array","vA","vB","vC","uvA","uvB","uvC","sdir","tdir","groups","start","count","il","j","group","jl","a","x1","x2","y1","y2","z1","z2","s1","s2","t1","t2","r","set","mergeBufferGeometries","geometries","useGroups","isIndexed","attributesUsed","Set","morphAttributesUsed","morphAttributes","mergedGeometry","BufferGeometry","offset","has","userData","mergedUserData","addGroup","indexOffset","mergedIndex","getX","setIndex","mergedAttribute","mergeBufferAttributes","numMorphTargets","morphAttributesToMerge","mergedMorphAttribute","TypedArray","itemSize","normalized","arrayLength","attribute","isInterleavedBufferAttribute","constructor","transformPlane","particleIndex","originalArray","NUM_PLANE_POSITIONS","tri","vertices","rotateX","rotateY","rotateZ","copyArray","dest","BLENDINGS","NormalBlending","additive","AdditiveBlending","substractive","SubstractiveBlending","multiply","MultiplyBlending","SHADERS","flat","MeshBasicMaterial","lambert","MeshLambertMaterial","phong","MeshPhongMaterial","standard","MeshStandardMaterial","OFFSCREEN_VEC3","blending","oneOf","delay","dur","img","interpolate","loop","on","poolSize","protation","pscale","multiple","frame","framedata","indexPool","lastFrame","msPerFrame","numFrames","numParticles","originalVertexPositions","particleCount","particleSystems","restPositions","restRotations","sprite_rotation","useRotation","particles","oldData","removeEventListener","loadParticlesJSON","floor","parseInt","min","max","Array","materialParams","Color","DoubleSide","TextureLoader","load","depthWrite","opacity","transparent","createParticles","alive","jsonData","frames","precision","frameIndex","rawP","tempGeometries","numParticleSystems","isNaN","Number","MAX_VALUE","particleSystem","activeParticleIndices","loopCount","loopTotal","mesh","ratio","PlaneBufferGeometry","PI","mergedBufferGeometry","Mesh","setObject3D","evt","startAfterDelay","found","oldestTime","Euler","resetParticles","doLoop","resetParticle","rand","helperPositionVec3","delta","fdata","fdataNext","frameTime","particleSystemIndex","activeParticleIndex","lerpVectors","_transformPlane","Geometry","faces","Face3","dust","Particles_Dust","energy","Particles_Energy","orb","Particles_Orb","pos","posString","p1","p2","p3","fire","particleplayer","threshold","baseEffects","playerDistanceTo","RingDial","container","labelText","suffix","labelColor","gradientColor1","gradientColor2","size","strokeWidth","radius","direction","svg","defs","slice","overlay","text","label","arrow","createSvg","createDefs","createSlice","createOverlay","createText","createLabel","createElementNS","gc1","gc2","linearGradient","stop1","stop2","linearGradientBackground","circle","fontSize","tspanSize","innerHTML","createArrow","arrowYOffset","arrowSize","arrowPosX","arrowPosY","arrowDOffset","animateStart","intervalOne","setInterval","toFixed","clearInterval","setValue","animateTo","to","animateReset","polarToCartesian","centerX","centerY","angleInDegrees","angleInRadians","cos","sin","describeArc","startAngle","endAngle","end","largeArcFlag","join","xy","Meter","low","high","optimum","widget","marginTop","marginBottom","parseFloat","range","textAlign","generateRegions","hudElement","containers","top","hud","pointsDial","statusDial","magicDial","oxygenMeter","gameName","emoji","favicon","theme","fontFamily","titleFontColor","formFontColor","formColor","overlayColor","avatar","models","yOffset","animations","idle","msg","thruster","innerColor","outerColor","buttonFaces","buttonColor","speed","sounds","playerJoined","playerLeft","yay","volume","splashIn","splashOut","hyperspace","environment","preset","seed","shadow","playArea","shadowSize","dressing","dressingAmount","dressingColor","dressingScale","dressingVariance","dressingUniformScale","fog","flatShading","skyType","horizonColor","skyColor","ground","groundYScale","groundTexture","groundColor","groundColor2","grid","gridColor","lighting","lightPosition","bgm","songs","playAll","initialDelay","releasePointerLockOnUI","toggleUI","nextSong","toggleMute","toggleCursor","showCursor","voice","rate","pitch","welcomeDelay","physics","gravity","maxGrabDistance","objects","collectibles","itemDefs","collectSound","collectParticles","callback","params","amount","animation","readouts","rotations","textAttributes","align","font","mobile","thruster_icon","joystick_outer_color","joystick_inner_color","vr","mode","isRunning","display","myPlayer","cam","spawnPos","spawnRot","startSpeed","op_template","voices","speechSynthesis","getVoices","say","SpeechSynthesisUtterance","filter","speak","printVoices","lang","soundName","Audio","scenes","otherPlayers","addOtherPlayer","newPlayerObject","model","cloneNode","play","updateOtherPlayers","socket","faceIndex","op","removePlayer","parentNode","removeChild","setPlayerMessage","totalSteps","playerData","rot","setPlayerData","sendUpdateToServer","onended","entity","distanceTo","fireParticles","io","lastPlayerData","login","un","pw","success","zIndex","getElementById","isInitialized","initializePlayerData","is","assign","bodiesData","states","includes","dirty","soundState","ibs","playersObject","location","reload","RTCPeerConnection","mozRTCPeerConnection","webkitRTCPeerConnection","pc","iceServers","noop","createDataChannel","createOffer","setLocalDescription","onicecandidate","ice","candidate","arg","exec","soundCollect","soundLoop","cb","soundIsPlaying","_callbacks","collectedEntity","sound__loop","pause","sound__collect","playSound","collector","collect","disconnected","indexOf","onload","loginContainer","connected","preventDefault","loaded","Component","attrName","System","registerShader","definition","NewComponent","proto","writable","attr","NewSystem","fx","renderer","cameras","isArray","isPlaying","effects","chain","sys","pro","nd","render","behaviors","timeDelta","behavior","tock","Effects","passes","_passes","setupPostState","needsOverride","lightComponents","LightState","rows","cols","tileData","tileTexture","lightTexture","DataTexture","RGBAFormat","FloatType","addLight","removeLight","splice","WebGLRenderTarget","minFilter","LinearFilter","magFilter","format","texture","generateMipmaps","depthBuffer","depthTexture","DepthTexture","UnsignedShortType","stencilBuffer","Scene","OrthographicCamera","quad","frustumCulled","sceneLeft","quadLeft","sceneRight","quadRight","targets","tDiffuse","tDepth","cameraFar","cameraNear","uvClamp","uvBoth","resolution","uvLeft","uvRight","parseToken","renderPass","viewCb","forceClear","setView","h","viewport","scissor","setViewport","setScissor","isFn","getSize","oldClear","autoClear","materialize","fs","ShaderMaterial","depthTest","NoBlending","extensions","derivatives","defines","fuse","temp","alpha","chunks","head","needsDepth","needsDiffuse","callMain","swapMain","args","tok","prop","Document","body","textContent","depth","dataset","diffuse","trim","defaults","prefix","u","inc","t2u","f","v2","v3","v4","m2","m3","m4","premain","rebuild","pickup","pass","makepass","dispose","writeBuffer","readBuffer","isActive","resize","bypass","needsResize","setSize","register","unregister","rt","effect","rts","onBeforeRender","resizeTiles","ArrayCamera","tileLights","rendererRender","setupPasses","far","near","ceil","Uint8Array","projectionMatrix","lights","image","ld","fill","vector","light","setFromMatrixPosition","pm","bs","lightBounds","applyMatrix4","toArray","decay","i4","i8","minX","maxX","minY","maxY","hw","hh","project","enabled","strength","smooth","pars","blurTarget","tockUniforms","blurDirection","sobel","blur","currentMaterial","blurMaterial","nIntensity","sIntensity","sCount","us","FXAAShader","BlurDirectionX","BlurDirectionY","enable","renderTargetsHorizontal","renderTargetsVertical","nMips","renderTargetBright","luminosityThreshold","smoothWidth","defaultColor","defaultOpacity","materialHighPassFilter","separableBlurMaterials","kernelSizeArray","getSeperableBlurMaterial","compositeMaterial","getCompositeMaterial","bloomFactors","bloomTintColors","oldClearColor","getClearColor","oldClearAlpha","getClearAlpha","oldAutoClear","setClearColor","inputRenderTarget","resx","resy","kernelRadius","KERNEL_RADIUS","SIGMA","colorTexture","texSize","NUM_MIPS","blurTexture1","blurTexture2","blurTexture3","blurTexture4","blurTexture5","bloomStrength","bloomRadius","shaderID","lut","lutClamp","lutFlip","mul","pow","right","quant","orig","red","green","blue","Texture","NearestFilter","ops","preFragment","q","g","tDisp","generateHeightmap","angle","seed_x","seed_y","distortion_x","distortion_y","col_s","glitch","curF","generateTrigger","randX","randFloat","randInt","dt_size","data_arr","val","RGBFormat","tint","intensity","rtFilter","rtTextureGodRays1","rtTextureGodRays2","step","materialGodraysGenerate","attenuation","materialFilter","fn","eye","cp3","cd3","getWorldPosition","getWorldDirection","stepLen","SAOShader","DepthLimitedBlurShader","samples","rings","maxDepth","bias","blurRadius","depthCutoff","renderTargets","SAOMaterial","hBlurMaterial","vBlurMaterial","sizeUniform","od","sao","isFirst","cameraProjectionMatrix","cameraInverseProjectionMatrix","minResolution","randomSeed","BlurShaderUtils","createSampleWeights","stdDev","weights","exp","sqrt","createSampleOffsets","uvIncrement","offsets","configure","sampleUvOffsets","sampleWeights","getMaterialData","emissive","emissiveIntensity","metalness","roughness","wireframe","wireframeLinewidth","normalMap","normalScale","ambientOcclusionMap","aoMapIntensity","ambientOcclusionMapIntensity","displacementMap","displacementScale","displacementBias","ShaderChunk","CubeLoader","CubeTextureLoader","texturePromises","ambientOcclusionTextureOffset","ambientOcclusionTextureRepeat","displacementTextureOffset","displacementTextureRepeat","envMap","metalnessMap","metalnessTextureOffset","metalnessTextureRepeat","normalTextureOffset","normalTextureRepeat","repeat","roughnessMap","roughnessTextureOffset","roughnessTextureRepeat","sphericalEnvMap","updateMap","updateDistortionMap","updateEnvMap","onBeforeCompile","State","updateMaterial","isLoadingEnvMap","loadTexture","mapping","SphericalReflectionMapping","handleTextureEvents","cube","Promise","resolve","srcLoader","validateCubemapSrc","urls","collectible"],"mappings":"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"}